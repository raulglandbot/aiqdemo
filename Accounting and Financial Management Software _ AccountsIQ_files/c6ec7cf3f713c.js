//15.176.1-es2019 2026-02-05T09:00:43.085Z (c6ec7cf3f713c)
var CS_CONF={"collectionEnabled":true,"projectId":300176,"status":1,"hostnames":["accountsiq.com","app.storylane.io"],"crossDomainTracking":1,"crossDomainSingleIframeTracking":1,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":25,"validationRate":10,"lastTrackingDraw":1757609769,"trackerDomain":"c.az.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":0,"jsErrorsEnabled":0,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":1,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":null,"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":"","anonymisationMethod":null,"anonymizeDigits":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":1,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":1,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":1,"tagVerificationDomain":"tcvsapi.contentsquare.com","displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-eu1.az.contentsquare.net","malkaRecordingDomain":"k-eu1.az.contentsquare.net","staticResourceManagerDomain":"srm.aa.contentsquare.net","voc":{"siteId":null,"enabled":0},"dynamicConfDomain":"t.contentsquare.net/settings"};
var CS_INTEGRATIONS_CONF = {"google-analytics-4":{},"google-analytics-4-events":{},"hubspot-client-side":{"settings":["sendSurveyResponses"]},"convert":{}};
/* integration-google-analytics-4 0.14.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Google Analytics 4","dvarPrefix":"AN_GA_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-google-analytics-4-contentsquare","version":"0.14.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function r(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);let i,a=1e3,u=10;function c(e,n,t,o,l,s){var d;n&&t&&(i||(i=r(e,"timingSettings"),"object"==typeof(d=i)&&null!==d&&Object.keys(d).length&&(a=i.doOnlyWhenInterval,u=i.doOnlyWhenTimes)),void 0===(l=l)&&(l=a),void 0===(s=s)&&(s=u),--s<0?"function"==typeof o&&o():t()?n():setTimeout((function(){c(e,n,t,o,l,s)}),l))}function l(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var s=t(0);const d=function(e){let n,t,r,i;if(o((function(){const o=e.name;n=e.version;const a=o.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";i=new RegExp(u+"$").test(a),r=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),i||(u="-cap",i=new RegExp(u+"$").test(a),r=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),i)return{snippetBuildName:t,parameterName:r,snippetVersion:n}}(t(1)),f=d.parameterName,p=d.snippetBuildName,g=d.snippetVersion;o((function(){const e=s.displayName,n=s.dvarPrefix;var t,o;t=e,o=g,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+o);const i=r(f,"logSettings");var a;const u=(a=i,Array.isArray(a)?i:[]).includes("enableLogsVID");function d(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),l(p,`Dynamic variable with ${e} and value ${t} sent`)}function b(){var e,n;e="gaGlobal.vid doesn't exist",n=p,window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION LOG ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}c(f,(function(){const e=window.gaGlobal.vid;e?d("ClientID",e):b()}),(function(){return!(!window.gaGlobal||!gaGlobal.vid)}),(function(){u&&b()}))}),p)}]);
/* integration-google-analytics-4-events 2.2.3 */
(()=>{"use strict";function n(n,t){try{n()}catch(n){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",t,n]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${t}] : ${n.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(n))}}let t,e=1e3,o=10;function i(n,r,c,a,u,s){var l;r&&c&&(t||(t=function(n){function t(n){return"object"==typeof n&&null!==n}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[n]))return window.CS_INTEGRATIONS_CONF[n].timingSettings}(n),"object"==typeof(l=t)&&null!==l&&Object.keys(l).length&&(e=t.doOnlyWhenInterval,o=t.doOnlyWhenTimes)),void 0===u&&(u=e),void 0===s&&(s=o),--s<0?"function"==typeof a&&a():c()?r():setTimeout(function(){i(n,r,c,a,u,s)},u))}function r(n,t,e){if((e=e||window)&&t&&n){let o=!1,i=e[n];i?t():Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:function(){return i},set:function(n){i=n,o||(o=!0,t())}})}}const c=JSON.parse('{"QC":"Google Analytics 4 Events","Mz":"AN_GA4Event_","be":"GA_"}'),a=function(t){let e,o,i,r;if(n(function(){const n=t.name;e=t.version;const c=n.replace("@contentsquare/integration-","");o=c+"-"+e;let a="-contentsquare";r=new RegExp(a+"$").test(c),i=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(a="-cap",r=new RegExp(a+"$").test(c),i=c.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),r)return{snippetBuildName:o,parameterName:i,snippetVersion:e}}(JSON.parse('{"name":"@contentsquare/integration-google-analytics-4-events-contentsquare","version":"2.2.3","scripts":{"build:snippet":"npx webpack"}}')),u=a.parameterName,s=a.snippetBuildName,l=a.snippetVersion;n(function(){const t=c.QC,e=c.Mz,o=c.be;var a,f;function g(n){const t=`${e}${n}`;var i,r;!function(n,t){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:n,value:t}])}(t,n),i=`${o}${r=n,r&&"string"==typeof r?r.replace(/[\W_]+/g,"-"):""}`,window._uxa=window._uxa||[],window._uxa.push(["event",i]),function(n,t,e){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(e?"warn"===e&&console.log(`%cCSQ INTEGRATION: [${n}] : ${t}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${n}] : ${t}`,"color: #2a9d8f; font-weight: bold"))}(s,t)}a=t,f=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(a+" - v"+f);let w={},p=!1,d=!1;const y=[];function _(n){if(!n||!n.length||n.length<2||"event"!==n[0])return;const t={action:n[1],category:n[2]&&n[2].event_category||""};if(function(n){return"detect_user"===n.action&&"Contentsquare"===n.category}(t))return;const e=t.action;-1===y.indexOf(e)&&(y.push(e),g(e))}function h(){if(p=!0,!d){const n=window.dataLayer;if(!0===n._csGA4integration)return;n.forEach(n=>{_(n)});const t=n.push;n.push=function(){t.apply(n,arguments),_(arguments[0])},n._csGA4integration=!0}}function b(){if(d=!0,!p){const n=window.gtag;window.gtag=function(){const t=Array.prototype.slice.call(arguments);n.apply(null,t),_(t)}}!async function(){if("function"==typeof window.Promise&&"function"==typeof SubtleCrypto){const n=w.sessionKey.split(".")[0],t=(await async function(n){return await async function(n){const t=await crypto.subtle.digest("SHA-256",function(n){const t=new ArrayBuffer(n.length),e=new Uint8Array(t);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return t}(n));let e=new Uint8Array(t.slice(0,8));return e=function(n){const t=new ArrayBuffer(n.byteLength+1),e=new Uint8Array(t);for(let t=1;t<e.byteLength;t++)e[t]=n[t-1];return e}(e),function(n){const t=[];return Uint8Array.from(n).forEach(function(n){let e=n.toString(16);e.length%2&&(e="0"+e),t.push(e)}),BigInt("0x"+t.join(""))}(e)}(n)}(n)).toString().replace("n","");gtag("set","user_properties",{csuid:t}),gtag("event","detect_user",{event_category:"Contentsquare",event_label:t,non_interaction:!0})}}()}!function(n){let t=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(e){t||(n(e),t=!0)}])}(function(t){n(function(){w=t,function(n,t,e){e=e||window;const o=n.split(".");if(1==o.length)r(n,t,e);else{let n=e,i=0;const c=function(){n=i>0?n[o[i-1]]:window,i++,i>=o.length?r(o[i-1],t,n):r(o[i-1],c,n)};c()}}("dataLayer",h),i(u,b,function(){return"function"==typeof gtag})},s)})},s)})();
/* integration-hubspot-client-side 0.10.1 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}function t(e){const n=e+"=",t=document.cookie.split(";");for(let e=0;e<t.length;e++){let o=t[e];for(;" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return""}let o,i=1e3,c=10;function r(e,t,s,u,a,l){var d;t&&s&&(o||(o=n(e,"timingSettings"),"object"==typeof(d=o)&&null!==d&&Object.keys(d).length&&(i=o.doOnlyWhenInterval,c=o.doOnlyWhenTimes)),void 0===a&&(a=i),void 0===l&&(l=c),--l<0?"function"==typeof u&&u():s()?t():setTimeout(function(){r(e,t,s,u,a,l)},a))}const s=JSON.parse('{"Q":"Hubspot","M":"MA_HS_"}'),u=function(n){let t,o,i,c;if(e(function(){const e=n.name;t=n.version;const r=e.replace("@contentsquare/integration-","");o=r+"-"+t;let s="-contentsquare";c=new RegExp(s+"$").test(r),i=r.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),c||(s="-cap",c=new RegExp(s+"$").test(r),i=r.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),c)return{snippetBuildName:o,parameterName:i,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-hubspot-client-side-contentsquare","version":"0.10.1","scripts":{"build:snippet":"npx webpack"}}')),a=u.parameterName,l=u.snippetBuildName,d=u.snippetVersion;e(function(){const e=s.Q,o=s.M;var i,c;i=e,c=d,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(i+" - v"+c);const u=n(a,"settings");var g;function p(e,n){var t,i;(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=o+e,n),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(l,(t=e,i=n,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=t,document.getElementById("csValue").textContent=i),`Dynamic variable with ${t} and value ${i} sent`))}if((g=u,Array.isArray(g)?u:[]).includes("sendRecordings")){function f(){const e=t("hubspotutk");e&&p("utk",e)}r(a,f,function(){return!!t("hubspotutk")})}},l)})();
/* integration-convert 2.7.3 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e){return Array.isArray(e)}function t(e,n,t){if((t=t||window)&&n&&e){let o=!1,c=t[e];c?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return c},set:function(e){c=e,o||(o=!0,n())}})}}function o(e){return e&&"string"==typeof e?e.replace(/[\W_]+/g,"-"):""}const c=JSON.parse('{"QC":"Convert","Mz":"AB_CV_","be":"CV_"}'),r=function(n){let t,o,c,r;if(e(function(){const e=n.name;t=n.version;const i=e.replace("@contentsquare/integration-","");o=i+"-"+t;let a="-contentsquare";r=new RegExp(a+"$").test(i),c=i.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(a="-cap",r=new RegExp(a+"$").test(i),c=i.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),r)return{snippetBuildName:o,parameterName:c,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-convert-contentsquare","version":"2.7.3","scripts":{"build:snippet":"npx webpack"}}')),i=(r.parameterName,r.snippetBuildName),a=r.snippetVersion;e(function(){const r=c.QC,s=c.Mz,u=c.be;var l,d;function p(e,n){var t,c;(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=s+e,n),function(e){window._uxa=window._uxa||[],window._uxa.push(["event",e])}(`${u}${o(e.replace(s,""))}-${o(n)}`),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(i,(t=e,c=n,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=t,document.getElementById("csValue").textContent=c),`Dynamic variable with ${t} and value ${c} sent`))}l=r,d=a,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(l+" - v"+d),function(e,n,o){o=o||window;const c=e.split(".");if(1==c.length)t(e,n,o);else{let e=o,r=0;const i=function(){e=r>0?e[c[r-1]]:window,r++,r>=c.length?t(c[r-1],n,e):t(c[r-1],i,e)};i()}}("_conv_q",function(){setTimeout(function(){e(function(){window._conv_q=window._conv_q||[],_conv_q.push([function(){e(function(){if(window.convert&&convert.currentData)if(convert.currentData.experiments&&convert.data&&convert.data.experiments){const e=convert.currentData.experiments,t=convert.data.experiments,o=Object.keys(e);if(n(o))for(let n=0;n<o.length;n++){const c=t[o[n]].n,r=e[o[n]].variation_name;c&&r&&p(c,r)}}else if(convert.currentData.experiences&&convert.data.experiences){const e=convert.currentData.experiences,t=Object.keys(e),o=convert.data.experiences;if(n(t)&&n(o))for(let n=0;n<t.length;n++){let c;const r=e[t[n]].variation.name;for(let e=0;e<o.length;e++)if(t[n]===o[e].id){c=o[e].name;break}c&&r&&p(c,r)}}},i)}])},i)},500)})},i)})();
(()=>{var bf=Object.defineProperty;var Rf=(s,r,t)=>r in s?bf(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var Ce=(s,r,t)=>Rf(s,typeof r!="symbol"?r+"":r,t);var Ee={};Ee.d=(s,r)=>{for(var t in r)Ee.o(r,t)&&!Ee.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};Ee.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();Ee.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);Ee.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var Do={};Ee.r(Do);Ee.d(Do,{getRequestParameters:()=>_m});function xs(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}var ct=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})();function $t(s){return st(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Se(s){return s===parseInt(s,10)}function q(s){return st(s)&&(typeof s=="string"||s instanceof csString)}function bi(s){return typeof s=="boolean"}function ne(s){return typeof s=="object"}function st(s){return typeof s!="undefined"}function Dt(s){return st(s)&&s!==null}function Ps(s){return typeof s=="object"&&s!==null}function Cf(s,r,t){return Se(s)&&s>=r&&s<=t}function Gn(s){for(let r in s)return!1;return!0}function oe(s){return typeof s=="function"}function Ur(s){return s instanceof Element}function je(s){return s instanceof Error}function jr(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var un={[ct.debug]:0,[ct.warn]:1,[ct.implementation]:1,[ct.error]:2,[ct.critical]:3},ot={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function If(s){ot=s}var U=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return Os(n,o.bind(this))(...c)}}};function Os(s,r){return function(...t){try{let e=r.apply(this,t);return st(self.Promise)&&e instanceof self.Promise?e.then(i=>i,i=>ot.error(je(i)?i:new Error(i),s)):e}catch(e){try{ot.error(je(e)?e:new Error(e),s)}catch{}}}}function ft(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var Di=typeof window=="undefined";function Pf(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Ee.g!="undefined"?Ee.g:typeof process!="undefined"?process:Function("return this")()}var nt=Pf();function ko(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function xa(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function sl(s){let r=nt.atob(s);return ko(r)}function qn(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function La(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){ot.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?sl(e[1]):ko(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var il=typeof performance!="undefined"&&!!performance.now,Va=il?()=>performance.now():()=>csDate.now(),Of=(()=>{var s,r;return il?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),xo=34164e6,k={now(){return Math.round(Va()+Of)},elapsed(){return Va()}};function Ua(){return Math.floor(k.now()/1e3)}function rl(){return typeof nt.Promise=="function"}function Nf(){var s;return typeof crypto!="undefined"&&oe((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function ja(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function jt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function ki(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Mf=Number.MAX_SAFE_INTEGER||9007199254740991,_e={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=Mf){return Math.floor(Math.random()*s)}};function _r(s,r){let t,e,i,n,o,c=null,l=u=>{let d=k.elapsed();if(!u&&c!==null){let m=r-(d-c);if(m>=1){i=nt.csSetTimeout(l,m);return}}let g=d-n;i=null,c=null,n=null,o=s.apply(t,[g,...e])},h=function(){if(t=this,e=arguments,n){c=k.elapsed();return}return n=k.elapsed(),i=nt.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(nt.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(nt.csClearTimeout(i),i=null)},h}var re=(()=>{class s{static setGlobalService(t){s.globalService=t}static KE(t){this.QE.test(t)||ot.error(`Invalid metric name: "${t}". Must contain only letters with optional hyphens or dots between words.`)}static validateParameterName(t){!/^https?:\/\/.+/.test(t)&&!this.ZE.test(t)&&ot.error(`Invalid parameter name: "${t}". Must start with letters and can contain letters or numbers after hyphens, dots, or colons.`)}constructor(t){this.name=t,this.values={},s.KE(t)}reset(){this.values={}}flush(t=""){if(!s.globalService)return!1;let e=this.values,i=Object.keys(e);if(!i.length)return!1;let n=csArray.prototype.map.call(i,o=>({name:this.name,parameter:`${t===""?"":`${t}.`}${o}`,value:Math.round(e[o])}));return s.globalService.push(n),this.reset(),n.length>0}}return s.globalService=null,s.QE=/^[a-zA-Z]+([-.][a-zA-Z]+)*$/,s.ZE=/^[a-zA-Z]+([-.:_][a-zA-Z0-9]+)*$/,ft([U()],s.prototype,"flush",null),s})(),St=(()=>{class s extends re{constructor(t,e=100){super(t),this.sv=e,this.values={},e&&(this.debouncedFlush=_r(()=>this.flush(),this.sv))}count(t,e=1){re.globalService&&(this.values[t]||re.validateParameterName(t),this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),cr=(()=>{class s extends re{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e,this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}flush(t=""){if(this.count===0)return!1;let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>i===n)),i=>{delete this.values[i]}),super.flush(t)}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),lr=(()=>{class s extends re{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e}flush(t=""){let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>csString.prototype.endsWith.call(i,`.${n}`))),i=>{delete this.values[i]}),super.flush(t)}add(t,e){var i,n,o,c,l,h,u;if(!re.globalService)return;this.values[`${t}.count`]||re.validateParameterName(t);let d=g=>this.values[`${t}.${g}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[u=`${t}.total`])!==null&&n!==void 0||(h[u]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=d("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=d("total")/d("count")}}return s})(),Df=(()=>{class s extends re{constructor(){super(...arguments),this.values={}}set(t,e="flags"){var i,n;re.globalService&&(this.values[e]||re.validateParameterName(e),(i=(n=this.values)[e])!==null&&i!==void 0||(n[e]=0),this.values[e]|=t,this.flush())}}return s})(),kf=(()=>{class s extends re{constructor(t,e={iterations:10,interval:2e3}){super(t),this.uf=e,this.na=0,this.je=null,this.oa=[],this.values={}}push(t){document.visibilityState!=="hidden"&&(this.na+=t,this.je||this.iv())}iv(){this.je=window.csSetInterval(()=>{csArray.prototype.push.call(this.oa,this.na),this.na=0,this.oa.length>=this.uf.iterations&&this.je&&csClearInterval(this.je)},this.uf.interval)}flush(t){return this.je&&(csClearInterval(this.je),this.je=null),csArray.prototype.forEach.call(this.oa,(e,i)=>{this.values[`interval.${i+1}`]=e}),this.oa=[],this.na=0,super.flush(t)}}return s})(),H={counters:{commandsFromIntegrations:new St("commands-from-integrations"),commandsFromCSTC:new St("commands-from-cstc"),commandsFromIframe:new St("commands-from-iframe"),commandApplied:new St("command-applied"),commandError:new St("command-error"),commandMisuse:new St("command-misuse"),CSTCSnippetUsed:new St("cstc-snippet-used"),redactedPII:new St("redacted-pii"),pageAnonymisation:new St("page-anonymisation"),patchedNativeFunctions:new St("patched-native-functions"),pureWindowState:new St("pure-window-state"),sensitiveElements:new St("sensitive-elements"),cspErrors:new St("csp-errors"),networkRequests:new St("network-requests"),webVitalsErrors:new St("web-vitals-errors"),trackedFeatures:new St("tracked-features"),longTasks:new cr("long-tasks"),errors:new St("errors"),methodPerformance:new lr("perf"),transferSize:new cr("transfer-size",["max","average"]),downloadTime:new cr("download-time",["average"]),blockingTime:new cr("blocking-time"),inpContribution:new lr("inp-contribution"),tasks:new lr("tasks"),availableFeatures:new Df("available-features"),dom:new lr("dom",["total"]),mutations:new kf("mutations"),requestTimeouts:new St("request-timeouts"),requestErrors:new St("request-errors"),requestCounts:new St("request-counter")},setService(s){re.setGlobalService(s)},normalizeParameter(s){return csString.prototype.toLowerCase.call(csString.prototype.replace.call(csString.prototype.replace.call(s,/([a-z])([A-Z])/g,"$1-$2"),/([A-Z])([A-Z][a-z])/g,"$1-$2"))}},xi=(()=>{class s{constructor(){this.aa=0}get length(){return this.aa}get isEmpty(){return!this.Qs}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.aa++,this.wn?this.wn=this.wn[1]=[t,void 0]:this.wn=this.Qs=[t,void 0]}pop(){if(!this.Qs)return null;this.aa--;let t=this.Qs[0];return this.Qs=this.Qs[1],this.Qs||(this.wn=void 0),t}forEach(t){let e=this.Qs;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.aa=0,this.Qs=this.wn=void 0}}return s})(),Wn=0,Lo=s=>{Wn++,csQueueMicrotask(()=>Ls(()=>{try{s()}finally{Wn--}},[we.MicroTask,"queueMicrotask"]))},wr=new xi,Ar=new xi;function Qt(s,r="high"){wr.isEmpty&&Ar.isEmpty&&nl(xf),r==="high"?Ar.push(Ha(s)):wr.push(Ha(s))}function nl(s,r=10){r===0?Lo(s):csQueueMicrotask(()=>nl(s,r-1))}function xf(){for(;!Ar.isEmpty;)Ar.pop()();for(;!wr.isEmpty;)wr.pop()()}async function ol(s=1){for(let r=0;r<s;r++)await new Promise(t=>Qt(t))}function Ha(s){return function(){try{s.apply(window,arguments)}catch(r){ot.critical(r)}}}var vr="null",as=null,al=[],Lf=()=>{var s;return Di||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!Di&&Lf()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],as=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Yn({type:"UXA_EVENT",event:s.detail})}),as.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===vr)return;vr=s.data.sessionId,csArray.prototype.forEach.call(al,r=>r()),as==null||as.postMessage({type:"CONNECTED",sessionId:vr})}}));function Vf(s){Di||(vr!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(al,s)))}function Yn(s){as==null||as.postMessage(s)}function Ri(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function ve(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Uf(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function cl(s,r){let t=[];return Uf(s,r,e=>csArray.prototype.push.call(t,e)),t}function J(s,r){if(jf(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function jf(s){return s.length>=0}function Li(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Hf(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function ll(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function Bf(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function Ba(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function Ns(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}function Ff(s){return csArray.isArray(s)&&s.length>0}var Vi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),Ie=(()=>{class s extends Vi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var Fa=(()=>{class s extends Vi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),Pe=(()=>{class s extends Vi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=k.elapsed();t(),this.count++;let i=k.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=k.elapsed();return()=>{this.count++;let e=k.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),$f=(()=>{class s extends Vi{constructor(){super("INP","Value: {value}")}getData(){return{value:zt.tasks.eventListener.max}}}return s})(),zt={general:{category:"General",nbEvents:new Ie("Nb of Events"),pendingTasks:new Ie("Pending Tasks"),pendingEvents:new Ie("Pending Tasks"),nbOfMutationObservers:new Fa("Nb of Mutation Observers"),inp:new $f},mutations:{category:"Mutations",initialDOM:new Pe("Initial DOM"),pendingMutations:new Ie("Nb of Mutations scheduled"),serializedMutations:new Pe("Serialized Mutations"),count:new Ie("Mutation Count"),elementMutationObserved:new Fa("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new Pe("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Ie("Nb of Hidden Elements "),nbElements:new Ie("Nb of  Elements")},tasks:{category:"Tasks",tasks:new Ie("Tasks"),errors:new Ie("Errors"),timer:new Pe("Timers"),microtask:new Pe("Microtasks"),mutationObserver:new Pe("MutationObserver"),monkeyPatch:new Pe("MonkeyPatch"),eventListener:new Pe("EventListener"),intersectionObserver:new Pe("Intersection")}};function zf(){let s=null;Vf(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(zt),n=>zt[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof Vi));Yn({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{Ls(()=>{let n=cl(ve(e,o=>ve(o,c=>c.getData())),o=>o);Yn({type:"UXA_PERFORMANCE_COUNTER",event:n})},[we.Timer,"performance-counter-interval"])},1e3))})}var we=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Ft=null,Gf=["click","tap","keyup","keydown","pointerup","pointerdown"];async function Ls(s,r,t=null){if(Ft&&r[0]!==we.MicroTask)return s();t&&(Ft=t),Ft||(Ft={type:r[0],elapsed:0},zt.tasks.tasks.increase());try{Ft.elapsed+=qf(s)}catch(e){zt.tasks.errors.increase(),ot.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{Wn<=0&&(zt.tasks[Ft.type].elapsed(Ft.elapsed),Ft.elapsed>50&&(H.counters.longTasks.push(Ft.elapsed),H.counters.blockingTime.push(Ft.elapsed-50)),H.counters.tasks.add(r[0],Ft.elapsed),csArray.prototype.includes.call(Gf,r[1])&&H.counters.inpContribution.add(r[1],Ft.elapsed),Ft=null)}}function qf(s){let r=k.elapsed();return s(),k.elapsed()-r}var dn,hl="cs-native-frame";var Ze={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild","nodeType"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function ul(s,r){let t=xs(window,s);return function(e,i){return t(()=>Ls(e,[r,s]),i)}}window.csSetTimeout=ul("setTimeout",we.Timer);window.csSetInterval=ul("setInterval",we.Timer);window.csQueueMicrotask=(dn=xs(window,"queueMicrotask"))!==null&&dn!==void 0?dn:setTimeout;window.csClearTimeout=xs(window,"clearTimeout");window.csClearInterval=xs(window,"clearInterval");window.csFileReader=xs(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function Wf(){let s=document.createElement("iframe");s.id=hl,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Yf(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function Xf(s,r,t){let e=Yf(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function dl(s){var r,t;Object.keys(Ze.constructors).forEach(i=>{window[Ze.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Qf(s);let e=s.MutationObserver;("Prototype"in window||Kf())&&(e=(t=(r=xs(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=$a(window.IntersectionObserver,we.IntersectionObserver),window.csMutationObserver=$a(e,we.MutationObserver),qs("csNode",Ze.nodeProperties,s.Node.prototype,"get"),qs("csElement",Ze.elementProperties,s.Element.prototype,"get"),qs("csElement",Ze.elementPropertiesValues,s.Element.prototype,"value",!1),qs("csHTMLImageElement",Ze.imageProperties,s.HTMLImageElement.prototype,"set"),qs("csEvent",Ze.eventProperties,s.Event.prototype,"get"),qs("csNavigator",Ze.navigatorProperties,s.navigator,"value")}function qs(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=Xf(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function Vo(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function Jf(){try{let s=Wf();return s?(window.CSPureWindow=s,dl(window.CSPureWindow),!0):!1}catch(s){return Vo("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!Jf())try{dl(nt)}catch(s){Vo("Critical",`failed to copy references from window: ${s.message}`)}function Kf(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Qf(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function $a(s,r){try{let t=function(e,i){return new s((o,c)=>{Ls(()=>e(o,c),[r,s.name])},i)};return t.base=s,t}catch{return Vo("Warning",`failed to extends ${s.name}`),s}}var Ct=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function Xn(s){return Ct.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Zf(s){let r=s.getAttribute("id");return r&&Ct.escapeInvalidCharacters(r)}function dt(s){return csNodenodeType.apply(s)===1}function Tr(s){return csNodenodeType.apply(s)===3}function tp(s){return csNodenodeType.apply(s)===8}function fl(s){return dt(s)&&s.localName==="link"}function ep(s){return dt(s)&&s.localName==="source"}function pl(s){return dt(s)&&s.localName==="a"}function Uo(s){return fl(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function sp(s){return dt(s)&&s.localName==="img"}function Hr(s){return dt(s)&&s.localName==="style"}function Br(s){return dt(s)&&s.localName==="input"}function jo(s){return dt(s)&&s.localName==="textarea"}function Fr(s){return dt(s)&&s.localName==="script"}function ip(s){return dt(s)&&s.localName==="button"}function Vs(s){return dt(s)&&"ownerSVGElement"in s}function Ho(s){return dt(s)&&s.localName==="select"}function rp(s){return dt(s)&&s.localName==="details"}function np(s){return dt(s)&&s.localName==="summary"}function op(s){return Vs(s)&&s.localName==="image"}function ap(s){return Vs(s)&&s.localName==="use"}function cp(s){return Vs(s)&&s.localName==="feImage"}function lp(s){switch(csNodenodeType.apply(s)){case 9:case 11:return!0;default:return!1}}function hp(s){switch(csNodenodeType.apply(s)){case 9:case 11:case 1:return!0;default:return!1}}function br(s){return csNodenodeType.apply(s)===9}function ei(s){return lp(s)&&"host"in s&&"mode"in s}function gl(s){return dt(s)&&!!csElementshadowRoot.apply(s)&&ei(csElementshadowRoot.apply(s))}var up=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function dp(s){return dt(s)&&Dt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(up,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Ui="detached";function ml(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return Rr(r)&&csArray.prototype.push.call(t,Ui),{ancestors:t,selectionRoot:r}}function fp(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&pl(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return Rr(r)&&csArray.prototype.push.call(t,Ui),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function Rr(s){return Ve.isValidElement(s)}var _s=(()=>{var s,r;return(r=(s=nt.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),ae=_s.matches||_s.matchesSelector||_s.mozMatchesSelector||_s.msMatchesSelector||_s.oMatchesSelector||_s.webkitMatchesSelector,za=_s.closest,yl=9;function pp(s,r){return r?csArray.prototype.some.call(r,t=>ae.call(s,t)):!1}function gp(s,r,t){if(s===Ui||csNodenodeType.apply(s)===yl)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=Xn(r),o=0,c=r.previousElementSibling;for(;c;)(Xn(c)===n||i&&(e!=null&&e.test(c.localName)))&&!pp(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function mp(s,r,t){if(s===Ui||csNodenodeType.apply(s)===yl)return 0;let e=0,i=r.previousElementSibling;for(;i;)ae.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var yp=[/\d{4}/,/^ember\d+$/],Ep="@",Bo="data-cs-override-id",vp="data-cs-dynamic-id";function El(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=Xn(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${Ep}`)),wp(s,t)){let g=Fo(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${Bo}="${g}"]`}}let c=Pp(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Sp(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=Zf(s);if(Tp(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let u=_p(s,e);if(u){let g=mp(r,s,u);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${u}](${g})`}}let d=gp(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${d})`}}function Sp(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(ae.call(s,e)&&Ip(e,r))return e}}function _p(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(ae.call(s,t))return t}}function wp(s,r){let t=Fo(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&$o(Bo,t,r)}function Ap(s){return Fo(s)!==null}function Fo(s){return s.getAttribute(Bo)}function Tp(s,r,t,e){return r&&!Ap(s)&&!bp(s,r,e)&&Cp(r,t)}function bp(s,r,t){return s.hasAttribute(vp)||Rp(r,t)}function Rp(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(yp,e=>e.test(s))||t)}function Cp(s,r){return s&&$o("id",s,r)}function $o(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Ip(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Pp(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&$o(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Jn=11;function Cr(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Ga(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=El(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${Ga(h,t)}${o}`}let l=Cr(s,r,t);return`${l?`${l}>`:""}${o}`}function Ga(s,r){if(s===Ui)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=ml(s.host);return`${Cr(t,e,r)}|shadow-root|`}return csNodenodeType.apply(s)===Jn?"|fragment|":""}var vl=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Op=(()=>{class s extends vl{constructor(){super(...arguments),this.ca=!1,this.ha=!1,this.rl=!1}rv(t,e){return this.ca&&!(e===null&&Rr(t))&&csNodenodeType.apply(t)!==Jn&&!t.host}nv(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.rv(t,e))return;let o=!1;e===null&&Rr(t)&&(o=!0,this.done=!0);let c=this.ha&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.rl=!0,this.ca=!1,this.ha=!1),!l&&e===null&&csNodenodeType.apply(t)===Jn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.nv(t))return;let h=e!=null?e:"detached",{elementSelector:u,hasUniqueIdentifier:d}=El(t,h,i,this.options);d&&(this.ha=!0,this.ca=!this.options.fullPath);let g=`${o?`|detached|${c}`:""}${this.ca&&!d?"":u}`,v=!d&&this.ha&&!this.options.fullPath?"":this.path&&!this.rl?">":"";this.rl=!1,this.path=`${g}${v}${this.path}`}}return s})(),At=(()=>{let s;return function(r){function t(){let d=[i()];return document.documentElement&&csArray.prototype.push.call(d,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(d,document.body.scrollHeight,document.body.offsetHeight),Math.max(...d)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let d=window.csScreen.width;return Se(d)&&d>0?d:window.screen.width}r.screenWidth=o;function c(){let d=window.csScreen.height;return Se(d)&&d>0?d:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function u(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=u}(s||(s={})),s})();function Zt(s,r=Vt.SHOW_ALL){let t=r|Vt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=qa(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=qa(c);if(r&Vt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(pn[csNodenodeType.apply(c)]&r)!==0)return c}return null},visitAll(o){pn[csNodenodeType.apply(s)]&r&&o(s);let c=this.nextNode();for(;c;){if((pn[csNodenodeType.apply(c)]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function qa(s){return s&&gl(s)?s.shadowRoot:null}var fn=(()=>{var s;return(s=nt.Node)!==null&&s!==void 0?s:{}})(),Vt=(()=>{var s;return(s=nt.NodeFilter)!==null&&s!==void 0?s:{}})(),pn={2:Vt.SHOW_ATTRIBUTE,4:Vt.SHOW_CDATA_SECTION,8:Vt.SHOW_COMMENT,11:Vt.SHOW_DOCUMENT_FRAGMENT,9:Vt.SHOW_DOCUMENT,10:Vt.SHOW_DOCUMENT_TYPE,1:Vt.SHOW_ELEMENT,[fn.ENTITY_NODE]:Vt.SHOW_ENTITY,[fn.ENTITY_REFERENCE_NODE]:Vt.SHOW_ENTITY_REFERENCE,[fn.NOTATION_NODE]:Vt.SHOW_NOTATION,7:Vt.SHOW_PROCESSING_INSTRUCTION,3:Vt.SHOW_TEXT},Sl=!1,Kn=5,hr=50;function Np(s=5){Sl=ot.isPerfLoggingActive(),Kn=s}function Us(s,r){return function(){if(!Sl)return s.apply(this,arguments);let t=k.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=k.elapsed()-t;i>=Kn&&H.counters.methodPerformance.add(r,i),i>hr&&H.counters.blockingTime.push(i-hr)});else{let i=k.elapsed()-t;i>=Kn&&H.counters.methodPerformance.add(r,i),i>hr&&H.counters.blockingTime.push(i-hr)}return e}}var Ht=function(s){return function(r,t,e){let i=e.value;e.value=Us(i,s)}},Rs=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&gl(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return Zt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=Us(i,"getAllShadowHosts")}(s||(s={})),s})(),gn=(()=>{var s;return(s=nt.Node)!==null&&s!==void 0?s:Object})(),mt=(()=>{let s;return function(r){let t="isConnected"in gn.prototype?w=>w.isConnected:w=>!w.ownerDocument||!(w.ownerDocument.compareDocumentPosition(w)&w.DOCUMENT_POSITION_DISCONNECTED);function e(w,V){for(let j=w;j;j=csNodenextSibling.apply(j))V(w)}r.forEachChild=e;function i(w){return t(w)}r.isConnected=i;function n(w,V){let j=[];for(let G of l(w,V))csArray.prototype.push.call(j,G);return j}r.getAncestors=n;let o=(w,V)=>{var j;return(j=csNodeparentNode.apply(w))!==null&&j!==void 0?j:V&&ei(w)?w.host:null};function c(w,V,j=!1){let G=w;for(;G;){if(V(G))return G;let gt=o(G,j);if(gt&&gt!==G)G=gt;else break}return null}r.findAncestor=c;function*l(w,V=!1){let j=w;for(;j;){yield j;let G=o(j,V);if(G&&G!==j)j=G;else break}}r.walkUp=l;function h(w,V){if(w===V||V.contains(w))return!0;let j=r.getParentElement(w);return j&&j!==w?h(j,V):!1}r.isDescendantOf=h;function u(w){var V;return w.parentElement?w.parentElement:r.getRootNode(w)?(V=r.getRootNode(w))===null||V===void 0?void 0:V.host:null}r.getParentElement=u;function d(w,V=document){let j=Ri(window.csquerySelectorAll[V.nodeType].call(V,w)),G=Rs.getAllShadowHosts(V);for(let gt of G){let Tt=Rs.getShadowRoot(gt);if(!Tt)continue;let ce=Ri(window.csquerySelectorAll[Tt.nodeType].call(Tt,w));csArray.prototype.push.call(j,...ce)}return j}r.findAllElements=d,r.getRootNode=(()=>{if("getRootNode"in gn.prototype)return(j,G)=>j.getRootNode(G);function w(j){let G=V(j);return ei(G)?w(G.host):G}function V(j){return csNodeparentNode.apply(j)!=null?V(csNodeparentNode.apply(j)):j}return(j,G)=>typeof G=="object"&&!!G.composed?w(j):V(j)})();function g(w){return w==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(w)}function m(w){let V=w.getBoundingClientRect();return V.right+At.windowOffsetX()<0||V.bottom+At.windowOffsetY()<0}function v(w){var V,j;if(((V=w.checkVisibility)===null||V===void 0?void 0:V.call(w,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!w.offsetParent){if(!w.getBoundingClientRect)return ot.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${w instanceof gn} Ctor: ${(j=w==null?void 0:w.constructor)===null||j===void 0?void 0:j.name}`),!1;let Tt=w.getBoundingClientRect();if(Tt.width===0&&Tt.height===0)return!0}let G=window.getComputedStyle(w);return G?G.display==="none"||G.visibility==="hidden"||G.visibility==="collapse"||G.opacity==="0"||G.filter==="opacity(0)"||G.width==="0px"&&G.height==="0px"||g(G.color):!0}r.isHiddenByCSS=v;function b(w){if(v(w))return!0;let j=u(w);return j!=null&&b(j)}r.areAncestorsHiddenByCSS=b;function C(w){let V=null,j=w;do if(v(j))V=j;else break;while(j=u(j));return V}r.getTopAncestorHiddenByCSS=C;function A(w){let V=S(w);return V!==null&&!w.contains(V)&&!V.contains(w)}function S(w){let V=w.getBoundingClientRect(),j=V.left+.5*V.width,G=V.top+.5*V.height;return I(document,j,G)}r.getTopElement=S;function N(w){if(!w.getBoundingClientRect)return null;let V=w.getBoundingClientRect(),j=V.x+V.width/2,G=V.y+V.height/2;return r.getTopElementFromPoint(document,j,G)}r.getElementOnTop=N;function I(w,V,j){let G=w.elementFromPoint(V,j);if(!G)return null;let gt=Rs.getShadowRoot(G);return gt&&gt!==r.getRootNode(document.body)&&gt!==w?I(gt,V,j):G}r.getTopElementFromPoint=I;function _(w){return!m(w)&&!v(w)&&!A(w)}r.isVisibleInDocument=_;function B(w){return v(w)?!1:F(w)}r.isVisibleInViewportInForeground=B;function F(w){let V=S(w);return V===null?!1:w===V?!0:It(w)?w.textContent!==""&&V.contains(w):w.contains(V)}r.isInViewPort=F;function K(w,V,j){let G=w.getAttributeNS(V,j);return G===""?w.hasAttributeNS(V,j)?G:null:G}r.getAttributeNS=K;function vt(w){return!!(w.hasAttribute("tabIndex")||w.getAttribute("contentEditable")==="true"||pl(w)&&w.hasAttribute("href")||(Ho(w)||jo(w)||Br(w)||ip(w))&&!w.hasAttribute("disabled")||rp(w)||np(w))}r.isElementFocusable=vt;function It(w){return w.localName==="span"||w.localName==="a"||w.localName==="b"||w.localName==="i"||w.localName==="button"||w.localName==="input"||w.localName==="label"||w.localName==="cite"||w.localName==="small"||w.localName==="strong"||w.localName==="code"||w.localName==="abbr"||w.localName==="em"||w.localName==="dfn"||w.localName==="time"||w.localName==="output"||w.localName==="object"||w.localName==="sub"}r.isInlineElement=It;function Gt(w){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>w(),{once:!0}):csSetTimeout(w)}r.onDocumentLoaded=Gt}(s||(s={})),s})(),Mp=(()=>{class s{constructor(t){this.ov=t}run(t){let e=[...this.ov],i=mt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.av(e,o,c,n),this.cv(e),e.length===0)break;i.length===0&&o.host&&(i=mt.getAncestors(o.host,!1),n=i[i.length-1])}}av(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}cv(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),Dp=(()=>{class s extends vl{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.lv(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}lv(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.hv(t.id),t.classList&&(e+=this.uv(csArray.from(t.classList))),t.attributes&&(e+=this.fv(t)),e}hv(t){return t?`#${t};`:""}uv(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}pv(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Vs(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Br(t)&&e==="value"}gv(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}mv(t){let e={};for(let i of csArray.from(t.attributes))this.pv(t,i.name)||(e[i.name]=i.value);return e}fv(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.mv(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.gv(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),Ve=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let u=o(c);if(u===document)return{path:"",hierarchy:""};if(!t(u))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let d=new Op(h),g=new Dp(l);return new Mp([d,g]).run(u),{path:d.getPath(),hierarchy:g.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:u,selectionRoot:d}=ml(h);return Cr(u,d,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:u,ancestors:d,selectionRoot:g}=fp(h);return{path:Cr(d,g,l),firstAnchorParent:u}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||Ve;var _l=["t.contentsquare.net","clicktale"],kp=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(_l,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,L.critical(t)}};window.addEventListener("error",kp);var L=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(_l,t)}static setStrategy(t){s.mr=t}static computeIsActive(t){s.We=_e.boolean(t),s.We?s.nl=_e.boolean(10):s.nl=!1}static isLoggingActive(){return s.We}static getStrategy(){return s.mr}static debug(t,e=""){s.We&&this.mr.send(t,e,ct.debug)}static warn(t,e=!0,i=""){var n;H.counters.errors.count("warning"),s.We&&e&&this.mr.send(t,i,ct.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){H.counters.errors.count("implementation"),s.We&&this.mr.send(t,e,ct.implementation)}static error(t,e=""){var i;H.counters.errors.count("error"),s.We&&this.mr.send(t,e,ct.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){H.counters.errors.count("critical"),this.mr.send(t,e,ct.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return st(nt.Promise)&&n instanceof nt.Promise?n.then(o=>o,o=>s.error(je(o)?o:new Error(o),t)):n}catch(n){try{s.error(je(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.nl}}return s.We=!1,s.nl=!1,s})();var Qn=!1;function xp(){Qn=!0}function Mt(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&Qn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&Qn||e.call(this,i,n)}}}}function Lp(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}var Vp=(()=>{class s{constructor(t,e){this.ua=t,this.df=e}init(){this.ff=this.ua!==this.ua.top,this.pf=this.df.isWebView&&this.ua===this.ua.top,this.df.iframesTracking&&this.ff||this.pf?this.gf=!1:this.gf=!0}isInIframeContext(){return this.ff}isTopWindowTracker(){return this.gf}isInWebViewContext(){return this.pf}}return s})(),Nt=!Di&&document.createElement("a"),Up=/(:443|:80)$/;function xe(s){return Nt?(Nt.href=s,Nt.href):""}function wl(s,r){return new csURL(s,r).href}function Al(s){let r=Go(s);return r===null?"":decodeURIComponent(r.hostname)}function zo(s,r){return csArray.prototype.some.call(r,t=>ki(s,`.${t}`)||s===t||t==="")}function jp(s){return s[0]==="/"?s:`/${s}`}function Wa(s){return csString.prototype.replace.call(s,Up,"")}function Go(s){return!Nt||!jt(s,"http://")&&!jt(s,"https://")?null:(Nt.href=s,{hash:Nt.hash,host:Wa(Nt.host),hostname:Nt.hostname,href:Nt.href,origin:Nt.origin?Nt.origin:Wa(`${Nt.protocol}//${Nt.host}`),pathname:jp(Nt.pathname),port:Nt.port,protocol:Nt.protocol,search:Nt.search})}var Ya="CS_IFRAME_MESSAGE",si=(()=>{let s;return function(r){r.AfterPageView="afterPageView",r.GetSessionKey="getSessionKey"}(s||(s={})),s})(),Xt=(()=>{let s;return function(r){r.Parent="parent",r.Child="child"}(s||(s={})),s})(),O=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})(),at=(()=>{let s;return function(r){function t(l,h,u,d){let g={type:l,from:h,pid:u,signature:Ya};return d!==void 0&&d>=0&&(g.id=d),g}r.buildBaseMessage=t;function e(l,h,u,d){let g=Al(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===Ya&&l.data.from===h&&l.data.pid===u&&zo(g,d)}r.isMessageValid=e;function i(l,h,u,d){d?l.postMessage(u,h,d):l.postMessage(u,h)}r.sendPostMessage=i;function n(){return new MessageChannel}r.getNewChannelMessage=n;function o(l,h){l.postMessage(h)}r.sendChannelMessage=o;function c(l){l.close()}r.closeChannelPort=c}(s||(s={})),s})(),Hp=(()=>{class s{constructor(t){this.E=t}send(t,e="",i=ct.warn){let n={message:t,errorCode:e,level:i},o=at.buildBaseMessage(O.ChildLogMessage,Xt.Child,this.E.projectId);o.content=n,at.sendPostMessage(window.parent,"*",o)}}return s})(),Bp=(()=>{class s{setContext(t,e){this.N=t,this.C=e}getVisitorService(){return this.N}getSessionService(){return this.C}}return s})();function Ir(){}function Zn(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Tl(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var mn=csSymbol("cachedJson");function Fp(s){if(s[mn])return s[mn];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+Ms(s[0]);for(let t=1;t<s.length;t++)r+=","+Ms(s[t]);return r+="]"}return s[mn]=csJSON.stringify(s)}var Ms=typeof window.Symbol!="undefined"?Fp:csJSON.stringify;var Ci=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),bl=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Ii=(()=>{class s extends bl{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.ol(t);let e=Ci.toQuery(t);this.yv(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}yv(t){let e=new window.Image(1,1);e.onload=Ir,e.onerror=Ir,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}ol(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),$p=(()=>{class s{constructor(t,e){this.Ts=t,this.Ev=e}init(){this.bs=new Ii(this.Ts.getLoggerUri()),this.bs.setRequestParametersProviders(this,this.Ev)}send(t){this.da=t,this.bs.send()}getRequestParameters(){return{a:this.da.app,l:this.da.level,m:this.da.message,s:this.da.stacktrace}}}return s})(),zp=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Gp=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,qp="CS_ANONYMIZED_EMAIL",yn="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Wp=new csRegExp(`(ey${yn}\\.ey${yn}\\.${yn})`,"g"),Yp="CS_ANONYMIZED_JWT",Xp=/[0-9]{4}/,Jp=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Kp="CS_ANONYMIZED_PII",Qp="\u2022",Zp=/\d/g,tg=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,eg=/(?:\d{1,3}\.){3}\d{1,3}/,sg=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,ts=(()=>{let s;return function(r){function t(u){return csString.prototype.replace.call(u,zp,qp)}r.replaceEmail=t;function e(u){return csString.prototype.replace.call(u,Wp,Yp)}r.replaceJWT=e;function i(u,d){return csString.prototype.replace.call(u,Jp,d)}r.replaceCreditCardNumber=i;function n(u){return csString.prototype.replace.call(u,Zp,Qp)}r.replaceDigits=n;function o(u){return eg.test(u)||sg.test(u)}r.mayHaveIPAddress=o;function c(u){return tg.test(u)}r.mayHaveNumberSequence=c;function l(u){return Xp.test(u)}r.mayHaveCreditCardNumber=l;function h(u){return Gp.test(u)}r.mayHaveEmail=h}(s||(s={})),s})(),js=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.vv(this.al(t));return e===!0?i=this.Sv(i):e===!1&&(i=this._v(i)),i}anonymizePII(t){return this.al(t)}anonymizeJwt(t){return ts.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.al(t[i])}),t}al(t){if(ts.mayHaveEmail(t)){let e=ts.replaceEmail(t);return e!==t&&H.counters.redactedPII.count("email"),e}return t}Sv(t){return ts.replaceDigits(t)}_v(t){return ts.mayHaveNumberSequence(t)?ts.replaceDigits(t):t}vv(t){return ts.mayHaveCreditCardNumber(t)?ts.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.wv(h))return e;H.counters.redactedPII.count("cc")}else H.counters.redactedPII.count("cc-partial");return`${i}${Kp}${c}`}):t}wv(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),Rl="15.176.1";function qo(){return{v:Rl}}var ig=(()=>{class s{constructor(t,e){this.E=t,this.D=e}getRequestParameters(){return{d:`${k.now()}`,p:this.D.anonymizePII(window.location.href),...this.E.getRequestParameters(),...qo()}}}return s})(),rg="uxa",Xa=5,ng="No stacktrace",Cl="snippet-",Il="implementation-snippet-",Ja=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),og=(()=>{class s{constructor(t,e,i){this.yr=e,this.D=new js,this.mf=un[ct.warn],this.mf=un[t.minLogLevel||ct.warn],this.bs=i||new $p(t,new ig(t,this.D)),this.yf={[ct.debug]:[],[ct.warn]:[],[ct.implementation]:[],[ct.error]:[],[ct.critical]:[]},this.fa={implementation:{},dynamic:{}},this.bs.init()}send(t,e="",i=ct.warn){if(!this.Av(i,e))return;csArray.prototype.push.call(this.yf[i],e||"");let n={message:this.Tv(t,e),stacktrace:this.bv(t),app:rg,level:i};this.bs.send(n)}Tv(t,e){let i=je(t)?this.D.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}bv(t){return je(t)?`${t.stack||ng} ${this.Ef()}`:this.Ef()}Ef(){let t=this.yr.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.yr.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}Av(t,e){if(un[t]<this.mf)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Il,0))===0)return this.vf(e,Ja.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Cl,0))===0)return this.vf(e,Ja.DYNAMIC);let i=this.yf[t];return i.length>=Xa?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}vf(t,e){return t in this.fa[e]?this.fa[e][t]>=Xa?!1:(this.fa[e][t]+=1,!0):(this.fa[e][t]=1,!0)}}return s})(),ag=2,rt=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let F=window.CSJavascriptBridge.getVersion();if($t(F))return F}catch{L.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(F,K){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(F,csJSON.stringify(K))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(F){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(F))}r.addUserProperties=c;function l(F){window.CSJavascriptBridge.addEventProperties&&window.CSJavascriptBridge.addEventProperties(csJSON.stringify(F))}r.addEventProperties=l;function h(F){window.CSJavascriptBridge.removeEventProperty&&window.CSJavascriptBridge.removeEventProperty(F)}r.removeEventProperty=h;function u(){window.CSJavascriptBridge.clearEventProperties&&window.CSJavascriptBridge.clearEventProperties()}r.clearEventProperties=u;function d(F){window.CSJavascriptBridge.addPageviewProperties&&window.CSJavascriptBridge.addPageviewProperties(csJSON.stringify(F))}r.addPageviewProperties=d;function g(F){window.CSJavascriptBridge.removePageviewProperty&&window.CSJavascriptBridge.removePageviewProperty(F)}r.removePageviewProperty=g;function m(){window.CSJavascriptBridge.clearPageviewProperties&&window.CSJavascriptBridge.clearPageviewProperties()}r.clearPageviewProperties=m;function v(F){window.CSJavascriptBridge.sendEvent(csJSON.stringify(F))}r.sendAnalysisEvent=v;function b(F){if(window.CSJavascriptBridge.sendSREvent)for(let K of F.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(K))}r.sendSREvent=b;function C(F){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(F))}r.sendLog=C;function A(){window.CSJavascriptBridge.optIn()}r.sendOptIn=A;function S(){window.CSJavascriptBridge.optOut()}r.sendOptOut=S;function N(F,K){window.CSJavascriptBridge.sendDynamicVar(F,K)}r.sendDynamicVariable=N;function I(F,K,vt){window.CSJavascriptBridge.sendTransaction(F,K,vt)}r.sendTransaction=I;function _(F,K){if(window.CSJavascriptBridge.sendAssets){let vt=csJSON.stringify(F);window.CSJavascriptBridge.sendAssets(vt,K||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(F,vt=>vt.assetId))}r.sendAssets=_;function B(F){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(F))}r.sendNativeSREvent=B}(s||(s={})),s})(),cg=(()=>{class s{constructor(){}send(t,e,i=ct.warn){let n={message:t,errorCode:e,level:i};rt.sendLog(n)}}return s})();function fe(s){return jt(s,"data:")}function Pl(s){return jt(s,"#")}function Pr(s){return!!s&&(ki(s,".css")||jt(s,"https://fonts.googleapis.com/css"))}var Ka=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function lg(s){Ka.lastIndex=0;let r,t=0,e=[];for(;(r=Ka.exec(s))!==null;){let i=r.index,n=r.index+r[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let o=csString.prototype.slice.call(s,i,n);csArray.prototype.push.call(e,{content:o,isUrl:!0}),t=n}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}var hg=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],$r=s=>{let r=new Set(hg);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},ug=["svg","slot"],dg=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(ug,s)>-1,Ol={href:new Set(["a"]),src:new Set(["iframe"])},fg=s=>Ol.hasOwnProperty(s),pg=(s,r,t)=>{var e;return((e=Ol[r])===null||e===void 0?void 0:e.has(s))&&!fe(t)},gg=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function En(s){return s?mg(s):null}function mg(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var yg=/^\d+\.\d+(?:\.\d+)?$/,Eg=s=>{if(!yg.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},vg=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,Sg=(s,r)=>vg(s,r)>=0,_g=1,to=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),Or=(()=>{let s;return function(r){r[r.Automatic=1]="Automatic",r[r.Manual=2]="Manual"}(s||(s={})),s})(),wg=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,u,d,g,m,v,b;this.isChild=!1,this.useFastDOM=!!t.useFastDOM,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||xo,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.apiErrors={enabled:(c=t.apiErrorsEnabled)!==null&&c!==void 0?c:0,...t.apiErrors},this.customErrors={enabled:(l=t.customErrorsEnabled)!==null&&l!==void 0?l:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=En(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=En(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=En(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(h=t.recordingUrlRules)!==null&&h!==void 0?h:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((u=t.uxaDomain)===null||u===void 0?void 0:u.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(d=t.anonymizeDigits)!==null&&d!==void 0?d:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(g=t.recordTargetingRules)!==null&&g!==void 0?g:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!==!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(m=t.collectTargetText)!==null&&m!==void 0?m:to.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(v=t.quotas)!==null&&v!==void 0?v:null,this.startMode=(b=t.startMode)!==null&&b!==void 0?b:Or.Automatic,this.eventEnricher=t.eventEnricher||null}getTrackerUri(){return`${this.Zs()}://${this.trackerDomain}`}getRecordingUri(){return`${this.Zs()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.Zs()}://${this.loggerDomain}`}getMetricsUri(){return`${this.Zs()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.Zs()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.Zs()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.Zs()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.Zs()}://${this.paProxyDomainUri}`}Zs(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===_g}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.Rv(n,o)}})}Rv(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e),t==="startMode"&&Se(e)&&csArray.prototype.includes.call(Object.values(Or),e)&&(this.startMode=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.Sf()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.Sf())return!0;let t=Eg(this.getHeapVersion()||"");if(t&&t.major===4&&Sg(t,{major:4,minor:23,patch:5}))return!0}return!1}Sf(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==to.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})();function $(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Ag(){let s=new MutationObserver(r=>{r.forEach(t=>{J(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(H.counters.pureWindowState.count("iframe-deletion"),ot.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function Qa(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Tg(){(!Qa(MutationObserver)||!Qa(MutationObserver.prototype.observe))&&H.counters.patchedNativeFunctions.count("MutationObserver")}function bg(){try{window.CSPureWindow&&Ag(),Tg()}catch{}}var Et=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let u=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return u?decodeURIComponent(u[2]):null}r.get=t;function e(l,h,u,d,g,m){let v=encodeURIComponent(`${h}`),b=u===r.CURRENT_DOMAIN?void 0:u,C=i(d),A=C?`;expires=${C.toUTCString()}`:"",S=";path=/",N=Dt(b)?`;domain=${b}`:"",I=`${l}=${v}${A}${S}${N}`;return st(g)&&g!==pe.NotSet&&(I=`${I};SameSite=${g}`),st(m)&&m===de.Yes&&(I=`${I};Secure`),document.cookie=I,!0}r.set=e;function i(l){return $t(l)?new csDate(k.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),pe.None,de.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let u="_cs_root-domain",d=t(u);if(d!==null&&d!=="1")return d;let g=csString.prototype.split.call(window.location.hostname,"."),m=csArray.prototype.pop.call(g);for(;g.length&&(d===null||d==="1");)m=csArray.prototype.join.call([csArray.prototype.pop.call(g),m],"."),e(u,m,m,void 0,l,h),d=t(u);return n(u,m),m}r.getRootDomain=c}(s||(s={})),s})(),Rg=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),pe=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),de=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),zr=(()=>{class s{constructor(t,e,i){this.E=t,this.A=e,this.Ni=i,this.cl=!1,this._f=pe.NotSet,this.ll=de.No}getSameSiteFlag(){return this._f}getSecureFlag(){return this.ll}getDomain(){return this.ul}getRootDomain(){return this.wf}init(){if(this.E.cookielessTrackingEnabled)return;let t=this.Cv(),e=this.Iv();this.cl=this.Pv(t,e),this.cl?(this._f=t,this.ll=e):this.E.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.ll=de.Yes),this.wf=this.Ov(),this.ul=this.Nv(this.wf)}Pv(t,e){return Rg.browserIsSafariV12()?!1:(Et.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),Et.get(s.COOKIE_TEST_FOR_SAME_SITE)?(Et.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}Cv(){return this.A.getUrlProtocol()==="http:"?pe.Lax:this.Ni.isSameSiteNoneSecureNeeded()||this.E.crossDomainTracking?pe.None:pe.Lax}Iv(){return this.A.getUrlProtocol()==="http:"?de.No:this.E.secureCookiesEnabled||this.E.crossDomainTracking||this.Ni.isSameSiteNoneSecureNeeded()?de.Yes:de.No}isSameSiteSupported(){return this.cl}set(t,e,i,n){let o=Et.toExpireDate(i),c=n?de.Yes:this.getSecureFlag();Et.set(t,e,this.ul,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.ul;Et.remove(t,i)}Ov(){let t=this.Ni.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?pe.None:void 0,i=t?de.Yes:void 0;return Et.getRootDomain(e,i)}Nv(t){return this.E.allowSubdomains?t:Et.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Ws="_cs_t",Za="1",Cg=(()=>{class s{constructor(t,e){this.vt=t,this.E=e,this.pa=!1,this.ga=!1}init(){if(!this.E.cookielessTrackingEnabled&&this.vt.isTopWindowTracker()&&"cookie"in document){if(!this.vt.isInIframeContext()&&Et.isCookiePresent()){this.pa=!0,this.ga=!1;return}if(Et.set(Ws,Za,Et.CURRENT_DOMAIN),Et.get(Ws)!==null){this.pa=!0,this.ga=!1,Et.remove(Ws,Et.CURRENT_DOMAIN);return}Et.set(Ws,Za,Et.CURRENT_DOMAIN,void 0,pe.None,de.Yes),Et.get(Ws)!==null&&(this.pa=!0,this.ga=!0,Et.remove(Ws,Et.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.pa}isSameSiteNoneSecureNeeded(){return this.ga}}return s})();function Ig(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Pg=(()=>{class s{constructor(t,e){this.E=t,this.Ni=e}canTrack(){return this.E.isProjectActive()&&this.Mv()&&this.Af()&&this.Dv()}canTrackInChild(){return this.E.isProjectActive()&&this.kv()&&(this.Af()||this.xv()||this.Lv())}Dv(){return this.E.cookielessTrackingEnabled?Ig():this.Ni.areCookiesEnabled()}Af(){return zo(window.location.hostname,this.E.hostnames)}Mv(){return!this.Tf()&&this.Uv()}kv(){return!this.Tf()&&this.jv()}xv(){return window.location.protocol==="about:"&&window.location.hostname===""}Tf(){return"visibilityState"in document&&document.visibilityState==="prerender"}Uv(){return this.bf()&&this.Hv()}jv(){return this.bf()}Hv(){try{return!!window.localStorage}catch{return!1}}bf(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}Lv(){return this.E.isWebView&&window.location.protocol==="file:"&&window.location.hostname===""}}return s})(),Nl=":";function tc(s){let r=[],t=Og(s),e=csString.prototype.split.call(t,"/");for(let i of e)jt(i,Nl)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function Og(s){let r=s;return jt(s,"/")&&(r=csString.prototype.substring.call(r,1)),ki(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var Ng=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,Mg="$1CS_ANONYMIZED_NAME",Ml=(()=>{class s{constructor(t){this.D=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.D.anonymizePII(t);if(o=this.D.anonymizeJwt(o),e.maskNames){let h=o;o=this.An(o),o!==h&&(H.counters.redactedPII.count("name"),H.counters.redactedPII.count("name-in-url"))}let c=this.Bv(o,i);if(c!==o)return H.counters.redactedPII.count("url"),c;let l=this.Fv(o,n);return l!==o&&H.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.dl(t);return i!==""?`${e}?`:e}dl(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}Bv(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.dl(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.$v(o,c);if(l!==null)return`${l}${n}`}return t}$v(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.Rf(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}Fv(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.dl(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.zv(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}zv(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],u=e[n].key;if(this.Rf(u)&&l>=c){let d=e[n].value;csArray.prototype.push.call(i,h.length>0?d:""),n++,n===e.length&&(n=0);continue}if(h===u){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let d=0;d<n;d++){let g=l-n+d;i[g]=t[g]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}Rf(t){return jt(t,Nl)}An(t){return csString.prototype.replace.call(t,Ng,Mg)}}return s})(),Dg="spki",ec="RSA-OAEP",kg="SHA-256",sc="AES-CTR",xg="SHA-1",ic=190,Cs=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=nt.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function u(){var I,_;return((_=(I=nt.self.crypto)===null||I===void 0?void 0:I.subtle)===null||_===void 0?void 0:_.encrypt)!=null&&nt.self.CryptoKey!=null}r.isSupported=u;async function d(I){n=r.crypto.importKey(Dg,sl(I),{name:ec,hash:kg},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||ot.warn(`Fail to import public key '${I}'`)}r.importKey=d;async function g(I){if(!u()||e)return null;await n;let _=ko(I);_.byteLength>ic&&(_=_.slice(0,ic));try{let B=await r.crypto.encrypt({name:ec},i,_);return xa(B)}catch{return null}}r.asymmetricEncrypt=g;async function m(I,_){if(!u()||e)return null;let B={counter:_.initializationVector,name:sc,length:64},F=o.encode(I);try{let K=await r.crypto.encrypt(B,_.cryptoKey,F);return xa(K)}catch{return null}}r.symmetricEncrypt=m;async function v(I){let _=await b(I);if(!_)throw new Error("Export secret failed");let B=await g(_);if(!B)throw new Error("Encrypt secret failed");return B}r.encryptSecret=v;async function b(I){var _;if(!u())return null;try{return(_=(await r.crypto.exportKey("jwk",I)).k)!==null&&_!==void 0?_:null}catch{return null}}async function C(){if(!u()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:sc,length:128},!0,["encrypt","decrypt"]),initializationVector:nt.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=C;function A(I){c=I}r.setDigestSalt=A;async function S(I){I=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(I)),c&&(I=`${I}:${c}`);let _=o.encode(I);try{let B=await r.crypto.digest(xg,_);return qn(B)}catch{return null}}r.digest=S;function N(){return nt.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=N}(s||(s={})),s})(),Oe=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),es=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),vs=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),ji=(()=>{class s{constructor(){this.pl=[]}setRegexRules(t){this.pl=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.Gv(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.pl,e=>this.Cf(t,e))}getMatchingRules(t){return csArray.prototype.map.call(csArray.prototype.filter.call(this.pl,e=>this.Cf(t,e)),e=>e.ruleInput)}Cf(t,e){var i,n;let o=this.qv(t,e);return!this.Wv(e)||!this.Yv(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}Wv(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}Yv(t){let e=t.samplingRate!==100,i=e&&_e.boolean(t.samplingRate);return!e||i}ma(t){return!jt(t,"http://")&&!jt(t,"https://")?`https://${t}`:t}qv(t,e){let i=Go(this.ma(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}ya(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}Gv(t){let e=null,i=!1;switch(t.operator){case es.NOT_START:case Oe.NOT_START:i=!0;case es.START:case Oe.START:e=new csRegExp(`^${t.value}`,this.ya(t));break;case es.NOT_END:case Oe.NOT_END:i=!0;case es.END:case Oe.END:e=new csRegExp(`${t.value}$`,this.ya(t));break;case es.NOT_CONTAIN:case Oe.NOT_CONTAIN:i=!0;case es.CONTAIN:case Oe.CONTAIN:case Oe.REGEX:e=new csRegExp(`${t.value}`,this.ya(t));break;case es.NOT_EXACT:case Oe.NOT_EXACT:i=!0;case es.EXACT:case Oe.EXACT:e=new csRegExp(`^${t.value}$`,this.ya(t));break;default:ot.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.If(t.startDate):void 0,o=t.endDate?this.If(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o,ruleInput:t}}If(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),W=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),Me=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.SHOPIFY="shopify",r.WEB="web"}(s||(s={})),s})();function rc(s){return"text"in s}function vn(s){return"hrchy"in s}function ur(s){return"properties"in s}function Lg(s){return s.tgtHM!==void 0}function Dl(s){return s.tgt!==void 0}function Vg(s){return s.tgtLk!==void 0}function Ug(s){return s.x!==void 0&&s.y!==void 0}function jg(s){return s===Me.APPCUES||s===Me.CHAMELEON||s===Me.CONTENTSQUARE||s===Me.SEGMENT||s===Me.SHOPIFY||s===Me.WEB}var Hg=Math.pow(2,31);function Bg(s,r=0){let l=r>>>0,h=s.length;for(let m=0;m<h-3;m+=4){let v=(csString.prototype.charCodeAt.call(s,m)&255|(csString.prototype.charCodeAt.call(s,m+1)&255)<<8|(csString.prototype.charCodeAt.call(s,m+2)&255)<<16|(csString.prototype.charCodeAt.call(s,m+3)&255)<<24)>>>0;v=Math.imul(v,3432918353),v=v<<15|v>>>17,v=Math.imul(v,461845907),l^=v,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let u=0,d=h&3,g=h-d;switch(d){case 3:u^=(csString.prototype.charCodeAt.call(s,g+2)&255)<<16;case 2:u^=(csString.prototype.charCodeAt.call(s,g+1)&255)<<8;case 1:u^=csString.prototype.charCodeAt.call(s,g)&255,u=Math.imul(u,3432918353),u=u<<15|u>>>17,u=Math.imul(u,461845907),l^=u}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function kl(s){return Bg(s)+Hg>>>0}var Gr=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),Si="|iframe|",xl=(()=>{class s extends Gr{constructor(t,e,i,n){super(),this.Xv=t,this.Jv=e,this.Kv=i,this.Qv=n}emitIframeEvent(t,e,i){if(this.Zv(e)&&t===null){L.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case O.ChildLogMessage:this.tS(i);break;case O.AnalysisEvent:{let n=i,o=this.Xv.transformEvent(t,n);o.isUserEvent?this.eS(o.event):this.sS(o.event);break}case O.RecordingEvent:{let n=i,o=this.Qv.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.iS(o.events):this.rS(o.events);break}case O.JavascriptError:this.nS(i);break;case O.ApiError:this.oS(i);break;case O.DetailedApiError:this.aS(i);break;case O.CustomError:this.cS(i);break;case O.EmerchandisingMessage:{let n=this.Kv.transformEvent(t,i);this.lS(n);break}case O.Commands:{let n=this.Jv.transformEvent(t,i);this.hS(n);break}case O.IntegrationCallback:this.uS(i);break;case O.StaticResource:this.dS(i);break;case O.TrackingContextRequestMessage:this.fS(i);break;default:L.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}Zv(t){let e=[O.AnalysisEvent,O.RecordingEvent,O.EmerchandisingMessage,O.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}tS(t){let{message:e,errorCode:i,level:n}=t;switch(n){case ct.debug:L.debug(e,i);break;case ct.warn:L.warn(e,!0,i);break;case ct.implementation:L.implementation(e,i);break;case ct.error:L.error(e,i);break;case ct.critical:L.critical(e,i);break}}eS(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}sS(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}iS(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}rS(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}nS(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}oS(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}aS(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}lS(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}hS(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}uS(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}dS(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}fS(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}cS(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),Ll=(()=>{class s{constructor(t,e,i){this.et=t,this.Pf=e,this.Of=i}transformEvent(t,e){this.pS(t,e.event);let i=this.et.getElementPath(t);return this.gS(i,e.event),this.mS(e.event),e}pS(t,e){if(Ug(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+At.windowOffsetX()),e.y=Math.round(i.top+e.y+At.windowOffsetY())}}gS(t,e){Dl(e)&&(e.tgt=`${t}${Si}${e.tgt}`),Lg(e)&&(e.tgtHM=`${t}${Si}${e.tgtHM}`,this.Pf||(e.tgtHMH=kl(e.tgtHM))),Vg(e)&&(e.tgtLk=`${t}${Si}${e.tgtLk}`)}mS(t){!this.Pf&&this.Of&&this.Of.enhanceAnalysisEvent(null,t)}}return s})(),Vl=(()=>{class s{constructor(t){this.et=t}transformEvent(t,e){let i=this.et.getElementPath(t);return{iframePath:e.iframePath?`${i}${Si}${e.iframePath}`:i,commands:e.commands}}}return s})(),Ul=(()=>{class s{constructor(t){this.et=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.et.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${Si}${o.targetPath}`}));return{...e,products:n}}}return s})(),Fg=1,nc=csSymbol("nodeIdentifier");function Y(s){let r=s[nc];return r!=null?r:s[nc]=Fg++}var x=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DOM_INITIAL_STATE=102]="DOM_INITIAL_STATE",r[r.DOM_PATCH_STATE=103]="DOM_PATCH_STATE",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var pi=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),jl=(()=>{class s{constructor(){this.yS={clientX:2,clientY:3},this.ES={clientX:1,clientY:2},this.vS=[x.POINTER_DOWN,x.POINTER_MOVE,x.POINTER_UP],this.SS=[x.TOUCH_START,x.TOUCH_MOVE,x.TOUCH_END]}transformEvents(t,e){if(!mt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==x.VISIBILITY_CHANGE),e.events.length===0||(L.warn(`IframeRecordingEventsTransformer received event ${O.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=Y(t),n=null;csArray.prototype.some.call(e.events,c=>this.Nf(c)||this.Mf(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.Nf(c)?this._S(n,c):this.Mf(c)&&this.wS(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}wS(t,e){this.Df(this.ES,t,e)}_S(t,e){this.Df(this.yS,t,e)}Df(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}Nf(t){return csArray.prototype.indexOf.call(this.vS,t.type)!==-1}Mf(t){return csArray.prototype.indexOf.call(this.SS,t.type)!==-1}}return s})(),pt=(()=>{class s extends Error{constructor(t,e){let i=e?`Command misuse: ${t} - ${e}`:`Command misuse: ${t}`;super(i),this.name="MisusedCommandError"}}return s})(),Sn;function Qs(s){if(Sn||(Sn=document.createElement("div")),!(!!s&&q(s)))return ot.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return ae.call(Sn,s),!0}catch{return ot.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function eo(s,r){if(za)return za.call(s,r);let t=s;do{if(ae.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&csNodenodeType.apply(t)===1);return null}function cs(s){if(!s)return s;switch(typeof s){case"object":{if(csArray.isArray(s))return csArray.from(s);let r={};for(let t in s)r[t]=cs(s[t]);return r}default:return s}}function Hl(s){for(let r in s)if(s[r]!==void 0)return!0;return!1}function Bl(s,r){if(csArray.isArray(s)&&csArray.isArray(r))return s.length!==r.length||csArray.prototype.some.call(s,(i,n)=>i!==r[n])?cs(r):void 0;let t={},e=new Set([...Object.keys(s||{}),...Object.keys(r||{})]);for(let i of e){let n=s[i],o=r[i];if(n===o)continue;let c=typeof n;if(c!==typeof o)n===void 0&&o!==void 0?t[i]=o:n!==void 0&&o===void 0&&(t[i]=null);else if(c==="object"&&n&&o){let h=Bl(n,o);h!==void 0&&(t[i]=h)}else t[i]=cs(o)}return Hl(t)?t:void 0}function Fl(s,r){let t={...s};for(let[e,i]of Object.entries(r))if(i===null)delete t[e];else if(i!==void 0){let n=t[e],o=i;n&&typeof n=="object"&&o&&typeof o=="object"&&!csArray.isArray(n)&&!csArray.isArray(o)?t[e]=Fl(n,o):t[e]=o}return t}function $l(s){let r=null;return t=>t?r=t:r||(r=s())}var $g=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function zg(s){return csString.prototype.indexOf.call(s,"-")>0&&csString.prototype.indexOf.call(s,":")===-1&&csString.prototype.indexOf.call(s,'"')===-1&&csString.prototype.indexOf.call(s,",")===-1&&!$g.has(s)}var Ys=$l(()=>new WeakMap),_n=$l(()=>new Set),hs=(()=>{let s;return function(r){function t(u){return Ys().get(u)}r.getAll=t;function e(u,d){var g;return(g=Ys().get(u))===null||g===void 0?void 0:g[d]}r.get=e;function i(u,d,g){let m=Ys().get(u);m||Ys().set(u,m={}),m[d]=g,c(u)}r.set=i;function n(u,d){let g=Ys().get(u);g&&(delete g[d],c(u))}r.remove=n;function o(){Ys(new WeakMap)}r.reset=o;function c(u){for(let d of _n())d(u)}function l(u){_n().add(u)}r.subscribe=l;function h(u){_n().delete(u)}r.unsubscribe=h}(s||(s={})),s})(),et=(()=>{let s;return function(r){function t(l,h,u){var d;if(typeof Node!="undefined"&&l instanceof Node)hs.set(l,h,u);else{let g=l;(d=g.props)!==null&&d!==void 0||(g.props={}),g.props[h]=u}}r.setProperty=t;function e(l,h){var u;return typeof Node!="undefined"&&l instanceof Node?hs.get(l,h):(u=l.props)===null||u===void 0?void 0:u[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?hs.getAll(l):l.props}r.getProperties=i;function n(l,h){let u=null;return o(l,(d,g,m)=>h(d)&&(u=d)&&!!m()),u}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,u){let d=!1;if(u(l,h,()=>d=!0),d)return;let m=l.shadowRoot;m&&c(m,l,u);let v=l.children;if(v!=null&&v.length){for(let b of v)if(b&&(c(b,l,u),d))break}}}(s||(s={})),s})(),M=(()=>{let s;return function(r){let t;(function(A){A[A.NotMasked=0]="NotMasked",A[A.Parent=1]="Parent",A[A.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(A){return ne(A)&&"Attributes"in A&&"PIISelectors"in A?A.Attributes instanceof Array&&A.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(A){if(!ne(A)||A===null)throw new pt("setPIISelectors");return"Attributes"in A||(A.Attributes=[]),"PIISelectors"in A||(A.PIISelectors=[]),A}r.sanitizeSelectorUserInput=i;function n(A){var S,N,I;return"nodeType"in A?(S=et.getProperty(A,r.maskedProp))!==null&&S!==void 0?S:{state:t.NotMasked}:(I=(N=A.metadata)===null||N===void 0?void 0:N[r.maskedProp])!==null&&I!==void 0?I:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(A){var S,N,I;return"nodeType"in A?(S=et.getProperty(A,r.maskedAttributeProp))!==null&&S!==void 0?S:{attributes:[]}:(I=(N=A.metadata)===null||N===void 0?void 0:N[r.maskedAttributeProp])!==null&&I!==void 0?I:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(A){let S=et.getProperty(A,r.maskedProp);return(S==null?void 0:S.state)===t.Parent}r.isMaskedElement=c;function l(A){let S=et.getProperty(A,r.maskedProp);return(S==null?void 0:S.state)===t.Child}r.isMaskedElementChild=l;function h(A,S){let N=et.getProperty(A,r.maskedAttributeProp);return((N==null?void 0:N.attributes)==null?void 0:csArray.prototype.indexOf.call(N==null?void 0:N.attributes,S))>-1}r.isMaskedAttribute=h;function u(A,S){et.setProperty(A,r.maskedProp,S)}r.setMaskedElementProperty=u;function d(A){et.setProperty(A,r.maskedProp,void 0)}r.unsetMaskedElementProperty=d;function g(A,S){et.setProperty(A,r.maskedAttributeProp,S)}r.setMaskedAttributeProperty=g;function m(A,S){let N=csArray.prototype.filter.call(A.PIISelectors,B=>Qs(B));S.elementSelector.length>0&&csArray.prototype.push.call(N,...csString.prototype.split.call(S.elementSelector,","));let I=C([...N]),_={elementSelector:csArray.prototype.join.call(I,","),attrSelector:S.attrSelector,attrSelectors:S.attrSelectors};return csArray.prototype.forEach.call(A.Attributes,B=>{B!=null&&B.attrName&&(B!=null&&B.selector)&&Qs(B.selector)&&!v(_.attrSelectors,B)&&csArray.prototype.push.call(_.attrSelectors,B)}),_.attrSelector=b(_.attrSelectors),_}r.getComputedSelectorSettings=m;function v(A,S){return csArray.prototype.some.call(A,N=>N.selector===S.selector&&N.attrName===S.attrName)}function b(A){let S="";return csArray.prototype.forEach.call(A,N=>{let I=csString.prototype.split.call(N.selector,",");csArray.prototype.forEach.call(I,_=>{Qs(_)&&(S&&(S+=","),S+=_)})}),S}function C(A){if(A.length<=1)return A;let S=[];for(let N of A){let I=csString.prototype.split.call(N,",");for(let _ of I)csArray.prototype.indexOf.call(S,_)===-1&&csArray.prototype.push.call(S,_)}return S}}(s||(s={})),s})(),zl=(()=>{class s{constructor(){this.Ea={elementSelector:"",attrSelector:"",attrSelectors:[]},this.gl={elementSelector:"",attrSelector:"",attrSelectors:[]},this.AS=window.top===window?"pii-migration":"pii-migration-iframe",this.kf=!1}onAfterNaturalPageView(){this.xf()}onParentSensitiveStatusChange(t){t.started&&!this.kf&&(this.kf=!0,t.maskedElementSettings&&(this.Ea=t.maskedElementSettings),this.xf())}xf(){var t,e;let i=this.Lf(this.Ea),n=this.Lf(this.gl),o=csArray.prototype.filter.call(n.elementSelectors,l=>csArray.prototype.indexOf.call(i.elementSelectors,l)===-1&&l!=="[data-cs-mask]"),c={};for(let[l,h]of Object.entries(n.attrSelectors)){let u=i.attrSelectors[l]||[],d=csArray.prototype.filter.call(h,g=>csArray.prototype.indexOf.call(u,g)===-1);d.length>0&&(c[l]=d)}(o.length>0||Object.keys(c).length>0)&&(L.computeIsActive(100),L.warn(csJSON.stringify({selectors:o,attrs:c}),!0,this.AS),L.computeIsActive((e=(t=window.CS_CONF)===null||t===void 0?void 0:t.validationRate)!==null&&e!==void 0?e:10))}Lf(t){let e=csString.prototype.trim.call(t.elementSelector).length>0?csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(t.elementSelector,","),n=>csString.prototype.trim.call(n)),n=>n.length>0):[],i={};for(let n of t.attrSelectors)i[n.attrName]=csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(n.selector,","),o=>csString.prototype.trim.call(o)),o=>o.length>0);return{elementSelectors:e,attrSelectors:i}}markClicktalePIIInUse(t){this.gl=M.getComputedSelectorSettings(t,this.gl)}markPIIMaskingTemplateInUse(t){let e=M.sanitizeSelectorUserInput(t);this.Ea=M.getComputedSelectorSettings(e,this.Ea)}}return $([U()],s.prototype,"markPIIMaskingTemplateInUse",null),s})(),Gg=(()=>{class s{constructor(t,e){this.S=t,this.mt=e}init(){this.mt.addListener(this.S)}onOptout(){this.S.stop()}onBeforeSessionRenewal(){this.S.stop()}}return s})();var _t=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),so=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),Gl=(()=>{class s extends _t{constructor(t,e){super(),this.ml=t,this.yl=e,this.hs={}}register(t,e,i){for(let n of t){let o=(...c)=>{let l=(i==null?void 0:i.metricParameter)||n;try{let h=e(...c);return H.counters.commandApplied.count(l),h}catch(h){h instanceof pt?(H.counters.commandMisuse.count(l),L.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${je(h)?h.stack:h}`)):(H.counters.commandError.count(l),L.error(`Command Error - ${n}: ${je(h)?h.stack:h}`))}};this.hs[n]={callback:o,configuration:i},this.hs}}onStart(){this.TS(),this.bS()}onStop(){for(let t of this.ml)window[t]=[]}applyFromIntegration(t,e,i){this.Vf(t,e,`Commands.apply.from.integration: ${i}`),H.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){var n;this.Vf(t,e,`Commands.apply.from.implementation: ${i}`),H.counters.commandsFromCSTC.count(t),i==="PIIMaskingTemplate"&&((n=this.yl)===null||n===void 0||n.markPIIMaskingTemplateInUse(e[0]))}onIframeCommands(t){for(let e of t.commands)this.RS(e.name,e.params,t.iframePath),H.counters.commandsFromIframe.count(e.name)}Vf(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}L.tryToExecute(i,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}RS(t,e,i){L.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}TS(){for(let t of this.ml)window[t].forEach(([e,...i])=>this.Uf(e,i,!1))}bS(){for(let t of this.ml)window[t]={push:([e,...i])=>this.Uf(e,i,!0)}}Uf(t,e,i){var n,o;if(this.hs[t]){if(((n=this.hs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.hs[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.hs[t].callback(...e)}catch(l){L.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),qg=(()=>{class s extends Gr{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:W.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})();function Wg(s){return csNodenodeType.apply(s)===1}function bt(s){let r=csEventtarget.apply(s);return r&&Wg(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function Yg(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Xg(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(bt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var Jg=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],Kg=1024,Qg=1024,ql=(()=>{class s{constructor(t,e){this.yt=t,this.E=e}getEventTargetPathAndHierarchy(t,e){let i=bt(t),n={isNodeSensitive(o){return M.isMaskedElement(o)||M.isMaskedElementChild(o)},isAttributeSensitive(o,c){return M.isMaskedAttribute(o,c)},allWhitelistedAttributes:$r(this.E.whitelistedAttributes),attributeIgnoreTokens:Jg,useAnonymization:e,attrMaxLength:Qg,hierarchyMaxLength:Kg};return this.yt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPath(t){let e=bt(t);return this.yt.getElementPath(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=bt(t),{path:i,firstAnchorParent:n}=this.yt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules}),o=this.CS(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=bt(t);return this.yt.isValidElement(e)}getElementPath(t){return this.yt.getElementPath(t,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}CS(t){var e;return t!==null&&t.hasAttribute("href")&&!Zn((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})();function qr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=k.now(),o=null,l=s.apply(i,n),n=[],i=null},u=function(...d){if(i=this!==null&&this!==void 0?this:nt,n=[...d],e==="trailing")return o||(o=nt.csSetTimeout(h,t)),l;let g=k.now(),m=t-(g-c);return m<=0||m>t?(c=g,l=s.apply(i,n),o?(nt.csClearTimeout(o),o=null):n=[]):o||(o=nt.csSetTimeout(h,m)),l};return u.cancel=()=>{o&&(nt.csClearTimeout(o),c=0,o=null,n=[])},u.flushPending=()=>{o&&(nt.csClearTimeout(o),h())},u}var Hs=s=>(r,t,e)=>{e.value=qr(e.value,s)},Wl=(()=>{let s;return function(r){function t(e,i){let n=Zg(e,i),o=tm(e,i);return n||o}r.select=t}(s||(s={})),s})();function Zg(s,r){return csArray.prototype.filter.call(s,t=>t.exclusion===r)[0]}function tm(s,r){return csArray.prototype.sort.call(csArray.prototype.filter.call(s,t=>em(t,r)),sm)[0]}function em(s,r){return s.visitor&&s.visitor.appliedTrackingDraw===r}function sm(s,r){return r.visitor.visitsCount!==s.visitor.visitsCount?r.visitor.visitsCount-s.visitor.visitsCount:s.session?r.session?r.session.pageNumber-s.session.pageNumber:-1:1}var oc="contentsquare.net",ac=(()=>{let s;return function(r){r.Set="set",r.Remove="remove"}(s||(s={})),s})(),im=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.O=e,this.Ce=i,this.jf=n,this.Hf=o,this.Bf=c,this.Ff=pe.None,this.El=!1,this.ti=[],this.ei=[]}init(){this.Ff=this.O.isSameSiteSupported()?pe.None:pe.NotSet,this.IS()}setStates(t,e){this.Tn=t,this.$f=e}start(t){this.$f.init(this.zf(),(e,i)=>{let n=[this.Tn.get()];i&&csArray.prototype.push.call(n,e);let o=Wl.select(n,this.E.lastTrackingDraw);this.El=!0,this.Tn.apply(o),t()}),this.Gf=this.$f.openIframe()}setCookie(t,e,i){if(this.El){let n=this.Ff,o=de.Yes,c={name:t,value:e,samesite:n,secure:o};i&&(c.expires=Et.toExpireDate(i).getTime()),this.PS(c)}}removeCookie(t){this.El&&this.OS(t)}OS(t){this.ei=csArray.prototype.filter.call(this.ei,e=>e!==t),this.ti=csArray.prototype.filter.call(this.ti,e=>e.name!==t),csArray.prototype.push.call(this.ei,t),this.setBatchReadyCall()}PS(t){this.ei=csArray.prototype.filter.call(this.ei,e=>e!==t.name),this.ti=csArray.prototype.filter.call(this.ti,e=>e.name!==t.name),csArray.prototype.push.call(this.ti,t),this.setBatchReadyCall()}setBatchReadyCall(){this.NS()}NS(){if(this.ti.length>0){let t=this.qf(ac.Set,this.ti);this.va(t),this.ti=[]}if(this.ei.length>0){let t=this.qf(ac.Remove,this.ei);this.va(t),this.ei=[]}}qf(t,e){return{command:t,cookies:e,domain:null,pid:this.E.projectId}}va(t){var e;let i=`https://${this.zf()}`;!((e=this.Gf)===null||e===void 0)&&e.contentWindow&&this.Gf.contentWindow.postMessage(t,i)}zf(){return this.E.dualCollectionTagDomain&&this.E.dualCollectionTagDomain!==oc?`cdnssl.${this.E.dualCollectionTagDomain}`:`csxd.${oc}`}IS(){this.Ce.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.jf.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Hf.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Bf.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Ce.onCookieToRemove(t=>{this.removeCookie(t)}),this.jf.onCookieToRemove(t=>{this.removeCookie(t)}),this.Hf.onCookieToRemove(t=>{this.removeCookie(t)}),this.Bf.onCookieToRemove(t=>{this.removeCookie(t)})}}return $([Hs({wait:0,mode:"trailing"}),U("send xdframe-single-iframe batch")],s.prototype,"setBatchReadyCall",null),s})(),Nr=".",Wo="__DOT__",rm=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Yl="x";function Xl(s){let[r,t,e,i,n,o,c,l,h]=cm(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===Yl?null:h}}function nm(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Yl],csString),om),Nr)}function Jl(s){return rm.test(s)}function om(s){return csString.prototype.replace.call(s,/\./g,Wo)}function am(s){return csString.prototype.replace.call(s,new csRegExp(Wo,"g"),Nr)}function cm(s){return csString.prototype.indexOf.call(s,Wo)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Nr),am):csString.prototype.split.call(s,Nr)}var D=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING="P",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})();function Kl(s){return s===D.RECORDING_TEMPORARILY||s===D.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}function Yo(s){return s===D.RECORDING_GLOBAL_SAMPLING||s===D.RECORDING_RULES_TARGETING||s===D.RECORDING_URL_SAMPLING||s===D.RECORDING_ETR_SAMPLING}var lm={[D.RECORDING_RULES_TARGETING]:D.RECORDING_GLOBAL_SAMPLING},Kt=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),us=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Yt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),io=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})(),Ql=/^(\d+\.[01356789TBWXP](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,Zl=".";function hm(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],Zl)}function th(s){if(!Wr(s))return null;let r=ro(s);return r!==null?eh(r):null}function eh(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,Zl);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:io.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:Yt.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function Wr(s){return Ql.test(s)}function ro(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,Ql))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var sh=(()=>{let s;return function(r){function t(e){return{exclusion:Number(e._cs_ex)||0,visitor:e._cs_id?Xl(e._cs_id):null,session:e._cs_s?th(e._cs_s):null,cvars:e._cs_cvars?window.csJSON.parse(e._cs_cvars):null}}r.fromRaw=t}(s||(s={})),s})(),Ne="_cs_ex",cc=2592e6,um=/^[0-9]+$/,ih=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i}onCookieToSet(t){this.Mi=t}onCookieToRemove(t){this.Di=t}get(){return this.E.cookielessTrackingEnabled?Number(this.J.getItem(Ne)):Number(this.O.get(Ne))}set(t){var e;this.E.cookielessTrackingEnabled?this.J.setItem(Ne,t):(this.O.set(Ne,t,cc),(e=this.Mi)===null||e===void 0||e.call(this,Ne,t,cc))}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(Ne):(this.O.delete(Ne),(t=this.Di)===null||t===void 0||t.call(this,Ne))}static isValidExclusionString(t){return um.test(t)}}return s})(),ss="_cs_cvars",rh=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i}onCookieToSet(t){this.Mi=t}onCookieToRemove(t){this.Di=t}get(){return this.E.cookielessTrackingEnabled?this.J.getItem(ss):this.O.get(ss)}set(t){var e;this.E.cookielessTrackingEnabled?this.J.setItem(ss,t):(this.O.set(ss,t),(e=this.Mi)===null||e===void 0||e.call(this,ss,t))}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(ss):(this.O.delete(ss),(t=this.Di)===null||t===void 0||t.call(this,ss))}static isValidCustomVarString(t){return typeof t=="string"}}return s})(),no=(()=>{let s;return function(r){function t(i){let n=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(i),o=>csArray.prototype.indexOf.call(n,o)>=0)}r.isRawDomainState=t;function e(i){return t(i)?(!i._cs_id||Jl(i._cs_id))&&(!i._cs_s||Wr(i._cs_s))&&(!i._cs_ex||ih.isValidExclusionString(i._cs_ex))&&(!i._cs_cvars||rh.isValidCustomVarString(i._cs_cvars)):!1}r.isValid=e}(s||(s={})),s})(),dm="1.2.0",fm=(()=>{class s{constructor(t,e){this.E=t,this.Ie=e}init(t,e){this.vl=`https://${t}`,this.R=e}openIframe(){this.Ie.onMessage(e=>{this.Sl(e)}),this.Ie.onTimeout(()=>{this._l()}),this.Ie.start();let t=this.Wf(this.vl);return this.Ie.open(t)}Sl(t){if(this.wl(t)){let e=t.data,i=!0;if(this.MS(t)){L.warn(`Error xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}if(!no.isRawDomainState(e)){L.warn(`Unknown message format from xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}no.isValid(e)||(L.warn(`Invalid xdframe single domain state: ${csJSON.stringify(t.data)} from ${t.origin}`),i=!1),this.Ie.stop(),this.R(i?sh.fromRaw(e):{},i)}}_l(){L.warn(`xdframe single domain: timeout: ${this.Wf(this.vl)}`),this.Ie.stop(),this.R({},!1)}wl(t){return t.origin===this.vl&&ne(t.data)}MS(t){return!!t.data.error}Wf(t){let e=this.E.projectId;return`${t}/uxa/xdframe-single-domain-${dm}.html?pid=${e}`}}return s})(),pm=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.Al=i,this.Tl=n,this.us=o,this.DS=c,this.bn=l}start(){this.w.addListener(this.DS),this.w.addListener(this.bn),this.w.addListener(this.Al),this.bn.init(),this.Tl.init(),this.us.init(),!this.us.isActive()&&this.S.start()}}return s})(),gm=(()=>{class s{constructor(t){this.Rs=t}onOptout(){this.Rs.removeExclusion()}}return s})(),mm=(()=>{class s{constructor(t,e){this.Dt=t,this.pt=e}exclude(t){this.pt.set(csString(t.lastTrackingDraw))}removeExclusion(){this.pt.remove()}isExcluded(){return this.kS()||this.xS()}kS(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.pt.get()}xS(){return csString.prototype.indexOf.call(this.Dt.href,Ne)>0}}return s})(),nh=["excludeURLforReplay"],oh=(()=>{class s{constructor(t,e){this.Rs=t,this.S=e}init(){this.S.register(nh,t=>{if(q(t))this.Rs.setExcludeUrlForSessionReplay(t);else throw new pt("excludeURLforReplay")})}}return s})(),wn=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),ym=".^",Em=".*",ah=(()=>{class s{constructor(t){this.A=t,this.bl=new csRegExp(`${ym}`)}setExcludeUrlForSessionReplay(t){try{this.bl=new csRegExp(t)}catch{L.warn(`excludeURLforReplay - invalid regex '${t}'`),this.bl=new csRegExp(`${Em}`)}}Yf(){return this.bl.test(this.A.getAnonymizedUrl())?wn.SessionReplay:wn.None}isUrlExcludedForSessionReplay(){return this.Yf()===wn.SessionReplay}getRequestParameters(){return{ex:this.Yf()}}}return s})();var{toString:zw}=Object.prototype;function ch(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(ch.Cache||Map),t}ch.Cache=Map;var{hasOwnProperty:Gw}=Object.prototype;var vm=["api-errors:maskUrl"];var Pi=(()=>{class s{constructor(...t){this.Qf=t}addProvider(t){csArray.prototype.push.call(this.Qf,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Qf,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Sm=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function _m(){return{la:Sm}}var Hi=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),lh=(()=>{class s{}return s})();function wm(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}function Am(s,r){if(Object.keys(s).length<=r)return s;let t={},e=0;for(let[i,n]of Object.entries(s)){if(e>=r)break;t[i]=n,e++}return t}var Tm=(()=>{let s;return function(r){function e(i,n,o,c){let l={...i,...n,...o,...c};return Am(l,200)}r.mergeAndLimitProperties=e}(s||(s={})),s})(),As=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),bs=(()=>{let s;return function(r){r.Natural="Natural",r.Artificial="Artificial",r.Renewal="Renewal"}(s||(s={})),s})(),bm=(()=>{class s extends _t{constructor(t,e,i,n,o,c,l,h,u,d){super(),this.E=t,this.w=e,this.K=i,this.xi=n,this.A=o,this.fs=c,this.GS=l,this.Wt=h,this.Yt=u,this.Vl=d,this.Ps=null}init(){this.Ul()}onStart(t=bs.Natural){switch(t){case bs.Natural:this.jl();break;case bs.Artificial:this.Hl();break;case bs.Renewal:this.Bl();break}}onStop(){}triggerArtificialPageView(t,e){this.isStarted?(this.w.emitArtificialPageViewEnd(),this.Li(t,e)):(Dt(t)&&this.A.overridePath(t,e),this.K.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.E.hasTargetingRules()&&this.A.cleanupOverrideLifespan())}jl(){this.fs.setPageViewType(As.Natural);let t=this.A.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Fl(),this.A.cleanupOverrideLifespan(),this.w.emitAfterNaturalPageView(As.Natural),this.Ps=t}Bl(){this.fs.setPageViewType(As.Renewal);let t=this.A.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Fl(),this.w.emitAfterNaturalPageView(As.Renewal),this.Ps=t}Li(t,e,i=!1){Dt(t)&&this.A.overridePath(t,e);let n=this.A.getAnonymizedUrl();this.w.emitBeforeArtificialPageView(this.Ps,n),this.fs.setPageViewType(As.Artificial),this.Fl(),this.A.cleanupOverrideLifespan(),this.w.emitAfterArtificialPageView(i),this.Ps=n}Hl(){this.Li(null,void 0,!0)}Ul(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&(this.w.emitArtificialPageViewEnd(),this.Li())})}qS(){var t,e,i;let n=(t=this.Vl)===null||t===void 0?void 0:t.getProperties(document,"pageview",this.A.getPath()),o=Tm.mergeAndLimitProperties((e=this.Wt)===null||e===void 0?void 0:e.getProperties(),(i=this.Yt)===null||i===void 0?void 0:i.getProperties(),n!=null?n:void 0,void 0);if(Object.keys(o).length>0)return o}Fl(){let t=this.qS(),e=t?{properties:t}:void 0;this.xi.removeQueryParams(),this.xi.setQueryParams({...this.GS.getRequestParameters(),...e?{}:{ct:Hi.UNCOMPRESSED}}),this.xi.send(e)}}return s})(),Rm=99999,Cm=(()=>{class s{constructor(t){this.C=t,this.WS=this.YS()&&window.CSCurrentScript}XS(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.JS(e)?null:Math.round(e.responseEnd-e.fetchStart)}JS(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.WS||this.KS()!==1)return{};let t=this.XS();return t===null?{}:{dt:`${Math.min(t,Rm)}`}}KS(){var t;return((t=this.C.getSession())===null||t===void 0?void 0:t.pageNumber)||null}YS(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Xo=["trackPageview"],oo=["setPath"],ao=["setQuery"],co=["referrer:maskUrl"],hh=["referrer:removeQueryString"],uh=["referrer:keepQueryString"],Im="pageview",An=s=>ne(s)&&s!==null,Pm=(s,r,t,e)=>{s.register(Xo,(i,n)=>{if(!q(i)){r.triggerArtificialPageView();return}An(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(oo,(i,n)=>{if(!q(i))throw new pt(oo[0]);An(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(ao,(i,n)=>{if(!q(i))throw new pt(ao[0]);An(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(co,i=>{if(!q(i))throw new pt(co[0]);e.addUrlMaskingPattern(i)}),s.register(hh,()=>e.enableRemoveQueryString()),s.register(uh,()=>e.disableRemoveQueryString()))},Om=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d,g,m,v,b,C,A,S,N,I){this.E=t,this.S=e,this.w=i,this.Be=n,this.N=o,this.C=c,this.Os=l,this.It=h,this.bt=u,this.A=d,this.Xt=g,this.fs=m,this.K=v,this.Ht=b,this.Ye=C,this.Er=A,this.Wt=S,this.Yt=N,this.Vl=I}init(){let t=this.Ht.create(`${this.E.getTrackerUri()}/${Im}`,"base64"),e=new Pi(this.Be,this.N,At,this.Os,this.A,this.It,Do,this.bt,this.fs,new Cm(this.C),this.Xt);this.In=new bm(this.E,this.w,this.K,t,this.A,this.fs,e,this.Wt,this.Yt,this.Vl),this.In.init(),this.Ye&&e.addProvider(this.Ye),this.Er&&e.addProvider(this.Er);let i=this.E.isCsCrosswritingHeap();if(i||this.E.isCsSideloadingHeap()||this.E.isHeapSideloadsCs()){let n=this.E.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}Pm(this.S,this.In,this.A,this.Os)}start(t){this.In.start(t)}stop(){this.In.stop()}onBeforeSessionRenewal(){this.In.stop()}}return s})();var Nm=["trackError"];var Jo=["setCustomVariable"],Mm=(()=>{class s{constructor(t,e){this.S=t,this.bt=e}init(){this.S.register(Jo,(t,e,i,n)=>{this.bt.set(t,e,i,n)})}onAfterArtificialPageView(){this.bt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.bt.deleteNextPageOnlyCustomVariables()}onOptout(){this.bt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.bt.removeCustomVariablesSession(),this.bt.removeCustomVariablesPage()}}return s})();var dh=["setEncryptionSelectors"],Yr=["setPIISelectors"],Ko=["setCapturedElementsSelector"],Dm=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.ht=i,this.Jt=n,this.Kt=o,this.ut=c,this.vr=l}init(){var t,e;this.vr&&this.ut&&((t=this.vr)===null||t===void 0||t.addSelector((e=this.ut)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ft()}onBeforeNaturalPageView(t){this.Jt.start(),this.w.emitSensitiveStatusChange()}onStartTracking(t){this.Jt.start(),this.w.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.Jt.stop(),this.Jt.start(),this.w.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.Jt.stop(),this.w.emitSensitiveStatusChange()}onOptout(){this.Jt.stop(),this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.w.emitSensitiveStatusChange()}ft(){this.S.register(Yr,t=>{this.ht.setMaskedElementSettingsFromCommand(t),this.w.emitSensitiveStatusChange()}),this.S.register(Ko,t=>{this.Kt.setWhitelistedElementsSelector(t),this.w.emitSensitiveStatusChange()}),this.S.register(dh,t=>{var e,i;(e=this.ut)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.vr)===null||i===void 0||i.addSelector(t)})}}return s})();var km=512,xm=255,_i=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,km),this.value=q(e)?csString.prototype.slice.call(e,0,xm):e}static isKeyValid(t){return q(t)}static isValueValid(t){return q(t)||Se(t)}}return s})(),Lm=(()=>{class s extends _t{constructor(t,e){super(),this.Qt=t,this.D=e,this.zl=[]}onStart(){csArray.prototype.forEach.call(this.zl,t=>this.Zf(t.key,t.value)),this.zl=[]}onStop(){}Zf(t,e){let i=this.D.anonymizePII(t),n=Se(e)?e:this.D.anonymizePII(e);this.Qt.add(new _i(i,n))}trackDynamicVariable(t,e){if(_i.isKeyValid(t)&&_i.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.zl,{key:t,value:e});return}this.Zf(t,e)}else throw new pt(Xr[0])}}return s})(),Vm=(()=>{class s{constructor(t){this.pe=t,this.Qt=[]}add(t){csArray.prototype.push.call(this.Qt,t),this.setBatchReadyCall()}clear(){this.Qt=[]}onBatchReady(t){this.ZS=t}getRequestParameters(){let t={};for(let e of this.Qt)t[e.key]=e.value;return{dv:this.pe.compressSync(csJSON.stringify(t),"base64"),ct:this.pe.algorithm}}setBatchReadyCall(){this.ZS()}}return $([Hs({wait:0,mode:"trailing"}),U("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Um="dvar",Xr=["trackDynamicVariable"],jm=(()=>{class s{constructor(t,e,i,n,o,c){this.S=t,this.C=e,this.E=i,this.Be=n,this.pe=o,this.D=c,this.bs=new Ii(this.E.getTrackerUri(),Um),this.Qt=new Vm(this.pe),this.Rs=new Lm(this.Qt,this.D)}init(){this.bs.setRequestParametersProviders(this.Be,this.Qt),this.C.setDynamicVariablesService(this.Rs),this.Qt.onBatchReady(()=>this.bs.send()),this.bs.after(()=>this.Qt.clear()),this.S.register(Xr,({key:t,value:e}={})=>{this.Rs.trackDynamicVariable(t,e)})}onStartTracking(){this.Rs.start()}onArtificialPageViewEnd(t){t&&this.Rs.stop()}onAfterArtificialPageView(t){t&&this.Rs.start()}}return s})();var fh=100,Hm=100,Bm=(()=>{class s extends _t{constructor(t,e){super(),this.e_=t,this.V=e,this.Pe=null,this.Gl=[]}onStart(){csArray.prototype.forEach.call(this.Gl,t=>{this.Pe=t,this.tp()}),this.Gl=[]}onStop(){}addToCart(t){let e={};q(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Hm)),q(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,fh)),(e.sku||e.merchant)&&(this.Pe=e,this.tp())}getCartItem(){return this.Pe}tp(){if(!this.isStarted&&this.Pe!==null){csArray.prototype.push.call(this.Gl,this.Pe),this.clear();return}this.V.refreshSession(),this.V.isSessionValid()&&this.e_.send()}clear(){this.Pe=null}getRequestParameters(){if(!this.Pe)return{};let t={};return q(this.Pe.sku)&&this.Pe.sku.length>0&&(t.sku=this.Pe.sku),q(this.Pe.merchant)&&this.Pe.merchant.length>0&&(t.me=this.Pe.merchant),t}}return s})(),lo=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),q(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Dt(t)&&$t(t.revenue)&&q(t.currency)&&t.currency.length<=10&&(!Dt(t.id)||q(t.id))}}return s})(),Fm=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.ql(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return st(t.sku)&&(e.sku=t.sku),st(t.category)&&(e.category=t.category),st(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,fh)),e}static ql(t){return Dt(t)&&q(t.id)&&q(t.name)&&$t(parseFloat(t.price))&&Se(parseInt(t.quantity,10))&&(!st(t.sku)||q(t.sku))&&(!st(t.category)||q(t.category))&&(!st(t.merchant)||q(t.merchant))}}return s})(),ph=(()=>{class s extends _t{constructor(t,e,i){super(),this.D=t,this.ep=e,this.V=i,this.Wl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Wl,t=>{this.ge=t.transaction,this.On=t.transactionItems,this.sendTransaction()}),this.Wl=[]}onStop(){}addTransaction(t){let e=this.D.anonymizeFields(t,["id"]);this.ge=lo.from(e)}getTransaction(){return this.ge}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Wl,{transaction:this.ge,transactionItems:[...this.On]}),this.clear();return}if(!(this.ep===null||this.V===null)&&(this.V.refreshSession(),!!this.V.isSessionValid())){if(!this.ge.hasValidRevenue()){L.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.ep.send()}}addItem(t){if(oe(t))throw new pt(Jr[1]);let e=this.D.anonymizeFields(t,["id","name","sku","category"]),i=Fm.from(e);i!==null&&csArray.prototype.push.call(this.On,i)}getItems(){return this.On}clear(){this.ge=lo.from({revenue:NaN}),this.On=[]}getRequestParameters(){let t={id:this.ge.id?`${this.ge.id}`:"",revenue:`${this.ge.revenue}`};return st(this.ge.tax)&&(t.tax=`${this.ge.tax}`),st(this.ge.shipping)&&(t.shipping=`${this.ge.shipping}`),st(this.ge.currency)&&(t.cu=`${this.ge.currency}`),t.items=window.csJSON.stringify(this.On),t}}return s})(),gh=["ecommerce:addToCart","ec:cart:add"],Qo=["ecommerce:addTransaction","ec:transaction:create"],Jr=["ecommerce:addItem","ec:transaction:items:add"],Zo=["ecommerce:send","ec:transaction:send"],$m=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this._t=e,this.N=i,this.S=n,this.D=o,this.V=c,this.A=l}init(){let t=new Ii(this.E.getTrackerUri(),"transaction"),e=new Ii(this.E.getTrackerUri(),"addtocart");this.Fe=new ph(this.D,t,this.V),this.Sr=new Bm(e,this.V);let i=new Pi(this._t,this.N,this.A,this.Fe);t.setRequestParametersProviders(i),t.after(()=>{this.Fe.clear()});let n=new Pi(this._t,this.N,this.A,this.Sr);e.setRequestParametersProviders(n),e.after(()=>{this.Sr.clear()}),this.S.register(Qo,o=>{this.Fe.addTransaction(o)}),this.S.register(Jr,o=>this.Fe.addItem(o)),this.S.register(Zo,()=>this.Fe.sendTransaction()),this.S.register(gh,o=>{this.Sr.addToCart(o)})}onStartTracking(){this.Fe.start(),this.Sr.start()}onArtificialPageViewEnd(t){t&&(this.Fe.stop(),this.Sr.stop())}onAfterArtificialPageView(t){t&&(this.Fe.start(),this.Sr.start())}}return s})();var Ds;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(Ds||(Ds={}));var lc=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();function ho(s){return s.tagDeploymentMode===Ds.DualCollectionReview||s.tagDeploymentMode===Ds.DualCollection}function zm(s){return ho(s)||s.tagDeploymentMode===Ds.LoadClicktalePtc}var Gm="@ETP@",hc="@user-identifier@",qm=(()=>{class s extends _t{constructor(t,e,i,n){super(),this.E=t,this.r_=e,this.pe=i,this.K=n,this.Yl=[],this.Vi=[]}onStart(){csArray.prototype.forEach.call(this.Yl,t=>this.sp(t)),this.Yl=[],csArray.prototype.forEach.call(this.Vi,t=>this.ip(t)),this.Vi=[]}onStop(){}sp(t){this.n_(t)?Cs.isSupported()&&this.o_(t):this.a_(t)}trackPageEvent(t){if(!s.rp(t))throw new pt(ta[0]);this.isStarted?this.sp(t):csArray.prototype.push.call(this.Yl,t)}n_(t){return Zn(t,hc)}async o_(t){if(!this.E.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,hc.length);if(e.length>Cs.MAX_DIGEST_INPUT_SIZE){L.warn("UserIdentifier event: invalid user identifier");return}let i=await Cs.digest(e);i?(this._r={eventName:i,isETR:!1,isCustomHashId:!0},this.Aa()):L.warn("Page event: unable to compute customHashId"),this.E.encryptionEnabled&&this.K.emitUserIdentifierEvent(e)}a_(t){this.K.emitPageEvent(t),this._r={eventName:t,isETR:!1,isCustomHashId:!1},this.Aa(),this.E.tagDeploymentMode===Ds.LoadClicktalePtc&&lc.sendPageEvent(t)}ip(t){this.E.malkaEtrEnabled?this.c_(t):this.l_(t)}trackEventTriggerRecording(t){if(!s.rp(t))throw new pt(ea[0]);this.isStarted?this.ip(t):csArray.prototype.push.call(this.Vi,t)}c_(t){Zn(t,Gm)?this.K.emitEventTriggerRecording(t,us.ETR_PAGE):this.K.emitEventTriggerRecording(t,us.ETR_SESSION),this._r={eventName:t,isETR:!0,isCustomHashId:!1},this.Aa()}l_(t){zm(this.E)&&(this.K.emitEventTriggerRecording(t,us.ETR_LEGACY),this._r={eventName:t,isETR:!0,isCustomHashId:!1},this.Aa(),this.E.tagDeploymentMode===Ds.LoadClicktalePtc&&lc.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.pe.compressSync(this._r.eventName,"base64"),ct:this.pe.algorithm,isETR:`${this._r.isETR}`,isCustomHashId:`${this._r.isCustomHashId}`}}Aa(){this.r_.send()}static rp(t){return q(t)&&!!csString.prototype.trim.call(t)}}return s})(),ta=["trackPageEvent"],ea=["trackEventTriggerRecording"],Wm=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.pe=i,this.Be=n,this.K=o}init(){let t=new Ii(this.E.getTrackerUri(),"pageEvent");this.wr=new qm(this.E,t,this.pe,this.K),t.setRequestParametersProviders(this.wr,this.Be),this.S.register(ta,e=>{this.wr.trackPageEvent(e)}),this.S.register(ea,e=>{this.wr.trackEventTriggerRecording(e)})}onStartTracking(){this.wr.start()}onArtificialPageViewEnd(t){t&&this.wr.stop()}onAfterArtificialPageView(t){t&&this.wr.start()}}return s})();var mh=["networkRequest:maskUrls"],yh=["networkRequest:maskUrls:reset"];function He(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var yi=s=>s instanceof HTMLFormElement?"form":s.localName,uc=new Map,Tn=!Di&&document.implementation.createHTMLDocument("");function Eh(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Ym(s){if(!Hr(s))return null;let r=vh(s);if(r===null||r.length===0)return null;let t="";if(jr(s.textContent))J(r,e=>t+=e.cssText);else{let e=Xm(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];J(i,n=>t+=n.cssText)}return t}function Xm(s){if(!Tn)return 0;let r=uc.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,Tn.head.appendChild(t);let e=vh(t);return r=e?e.length:0,uc.set(s.textContent,r),Tn.head.removeChild(t),r}function vh(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var Ue={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};var Bs=(()=>{class s{constructor(t){this.csId=Y(t),this.props=hs.getAll(t)}}return s})(),Sh=(()=>{class s extends Bs{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Le=(()=>{class s extends Bs{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=Ue.ELEMENT_NODE,this.localName=yi(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=Ym(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new Sh(c);csArray.prototype.push.call(this.children,l)}(Hr(t)||Uo(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===Ue.ELEMENT_NODE}static getAttribute(t,e){return Li(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})();function Jm(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}function Km(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=Zm(r);return t===""||(r=ty(r,t),r.length===0)?"":_h(r[0])}function Qm(s){return csString.prototype.indexOf.call(s,"@")!==-1}function Zm(s){return s.length>0?_h(s[0]):""}function ty(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function _h(s){let r="",t;Qm(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var ey=s=>s;function sy(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let u=c[l],d=Reflect.set(c,l,h);return e.forEach(g=>g(this,h,u,"subproperty")),d}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){ot.error(h)}return l}})}function iy(s,r,t){let e=ry(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function ry(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,sy(s,r,i,e),e):(ot.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(ot.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function ny(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return ot.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(Ns(i),u=>u(c))}catch(u){ot.critical(u)}let h=n.apply(this,c);return Ls(()=>{let u={result:h,context:this,args:c};csArray.prototype.forEach.call(l,d=>d(u))},[we.MonkeyPatch,`${csString(r)}`]),h};cy(o,n),s[r]=o}return i}function ws({target:s,methodName:r,hook:t,hookPrepareArgs:e=ey,options:i}){let n=ny(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:Km()}:{};return u=>t({...u,...h,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function oy(s,r){return wh(s,r,!1)}function wh(s,r,t=!0){let e=csSymbol.for(r);if(t?s[e]:s.hasOwnProperty(e))return s[e];let i=new Set,n=Object.getOwnPropertyDescriptor(s,r);if(!n)return ot.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null;if(!n.configurable)return ot.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null;s[e]=i;let o=`${csString(r)}-setter`;return Object.defineProperty(s,r,{set(){var c;let l=this[r],h=arguments;return Ls(()=>{i.forEach(u=>u(this,h[0],l,"property"))},[we.MonkeyPatch,o]),(c=n.set)===null||c===void 0?void 0:c.apply(this,h)}}),i}function ay(s,r,t){return Oi(s,r,t,!0)}function Oi(s,r,t,e=!1){let i=e?oy(s,r):wh(s,r);if(!i)return null;let n=(o,c,l)=>t(o,c,l,"property");return{activate:()=>{i.add(n)},deactivate:()=>{i.delete(n)}}}function cy(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Kr=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return Ns(this.set)}get count(){return this.set.size}}return s})(),ly=(()=>{class s extends Kr{constructor(t="high"){super(),this.h_=t}add(t){this.set.add(t),this.set.size===1&&Qt(()=>{this.set.clear()},this.h_)}}return s})();function Qr(s,r=!1){let t=new Kr;return{push(e){t.count===0&&(r?Qt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var De=csSymbol(),sa=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,u,d,g,m,v,b;this.R=t,this.Xl=null,this.Jl=null,this.Kl=null,this.Ql=null,this.Zl=null,this.u_=Qr(C=>this.processUpdateRulesInATick(C)),this.th=null,this.eh=null,this.ih=null,this.R=C=>Qt(()=>t(C)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Xl=ws({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:C,args:A})=>{this.processInsertRule(C,A)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Jl=ws({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:C,args:A})=>{this.processDeleteRule(C,A)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Kl=ws({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:C})=>this.processUpdateRule(C)})),typeof((u=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||u===void 0?void 0:u.deleteRule)=="function"&&(this.Ql=ws({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:C})=>this.processUpdateRule(C)})),!((d=window.StyleSheet)===null||d===void 0)&&d.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Zl=Oi(window.StyleSheet.prototype,"disabled",(C,A,S)=>{A!==S&&this.d_(C,A)})),typeof((m=(g=window.CSSStyleDeclaration)===null||g===void 0?void 0:g.prototype)===null||m===void 0?void 0:m.setProperty)=="function"&&(this.th=ws({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:C})=>{let A=C.parentRule;A instanceof CSSStyleRule&&this.processUpdateRule(A)}})),typeof((b=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||b===void 0?void 0:b.removeProperty)=="function"&&(this.eh=ws({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:C})=>{let A=C.parentRule;A instanceof CSSStyleRule&&this.processUpdateRule(A)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.ih=iy(window.CSSStyleRule.prototype,"style",C=>{this.processUpdateRule(C)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.Xl)===null||t===void 0||t.activate(),(e=this.Jl)===null||e===void 0||e.activate(),(i=this.Kl)===null||i===void 0||i.activate(),(n=this.Ql)===null||n===void 0||n.activate(),(o=this.Zl)===null||o===void 0||o.activate(),(c=this.th)===null||c===void 0||c.activate(),(l=this.eh)===null||l===void 0||l.activate(),(h=this.ih)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.Xl)===null||t===void 0||t.deactivate(),(e=this.Jl)===null||e===void 0||e.deactivate(),(i=this.Kl)===null||i===void 0||i.deactivate(),(n=this.Ql)===null||n===void 0||n.deactivate(),(o=this.Zl)===null||o===void 0||o.deactivate(),(c=this.th)===null||c===void 0||c.deactivate(),(l=this.eh)===null||l===void 0||l.deactivate(),(h=this.ih)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[De]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.R(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.u_.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(Ri(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.R(o)}}processDeleteRule(t,[e]){if(t[De]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.R(i)}d_(t,e){if(t[De]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.R(i)}}return ft([U()],s.prototype,"observe",null),ft([U()],s.prototype,"disconnect",null),ft([U()],s.prototype,"processInsertRule",null),ft([U()],s.prototype,"processUpdateRule",null),ft([U()],s.prototype,"processUpdateRulesInATick",null),ft([U()],s.prototype,"processDeleteRule",null),s})(),Fs=(()=>{var s;class r{static f_(e){this.Ns.forEach(i=>{e(i,"initial")})}static Nn(e){if(this.U||(this.U=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&J(n.addedNodes,this.p_),J(n.removedNodes,this.g_)})),csArray.prototype.push.call(this.Oe,e),!this.Y){this.Y=!0,this.U.observe(document,this.Mn);for(let i of Rs.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.Ns.add(n),this.U.observe(n,this.Mn)}this.rh||(this.rh=ws({target:Element.prototype,methodName:"attachShadow",hook:i=>this.Ar(i.result)&&this.op(i.result)})),this.rh.activate()}this.f_(e)}static Ar(e){return e.isConnected&&e.ownerDocument===document}static Dn(e){var i,n;this.Oe=csArray.prototype.filter.call(this.Oe,o=>o!==e),this.Oe.length===0&&(this.Oe=[],this.Y=!1,(i=this.U)===null||i===void 0||i.disconnect(),(n=this.rh)===null||n===void 0||n.deactivate(),this.Ns.clear())}constructor(e){this.R=e,this.R=Os("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return Ns(s.Ns)}static get shadowRootsCount(){if(s.Y)return Ns(s.Ns).length}takeRecords(){var e,i;return(i=(e=s.U)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){Rs.isSupported()&&s.Nn(this.R)}disconnect(){Rs.isSupported()&&s.Dn(this.R)}}return s=r,r.Oe=[],r.Ns=new Set,r.Y=!1,r.Mn={childList:!0,subtree:!0},r.op=t=>{s.Ns.has(t)||(s.U.observe(t,s.Mn),s.Ns.add(t),J(s.Oe,e=>e(t,"added")))},r.p_=t=>{Zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.op)},r.g_=t=>{t.isConnected||Zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Ns.has(e)&&(s.Ns.delete(e),J(s.Oe,i=>i(e,"removed")))})},ft([U()],r.prototype,"observe",null),ft([U()],r.prototype,"disconnect",null),r})(),hy=(()=>{class s{constructor(t){this.m_=1,this.Ta=new Set,this.nh=null,this.oh=null,this.ah=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.y_=e=>{let i=e.sheet;if(this.Ta.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[De],rule:e.rule,index:e.index};this.R(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[De],index:e.index};this.R(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[De],rule:e.rule,index:e.index};this.R(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[De],disabled:e.disabled};this.R(n)}}},this.R=e=>Qt(async()=>{await ol(2),t(e)}),this.ye=new Fs(this.ah),"adoptedStyleSheets"in Document.prototype&&(this.nh=Oi(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.oh=Oi(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.ap=new sa(this.y_)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ye.observe(),(t=this.nh)===null||t===void 0||t.activate(),(e=this.oh)===null||e===void 0||e.activate(),this.ap.observe()}disconnect(){var t,e;this.Ta.clear(),this.ye.disconnect(),(t=this.nh)===null||t===void 0||t.deactivate(),(e=this.oh)===null||e===void 0||e.deactivate(),this.ap.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.E_(e);let i=ve(e,o=>o[De]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.R(n)}E_(t){J(t,e=>{if(this.Ta.has(e))return;let i=this.m_++;e[De]=i,this.Ta.add(e);let n=this.v_(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.R(o)})}v_(t){let e=[];try{e=ve(t.cssRules,i=>i.cssText)}catch{}return e}}return ft([U()],s.prototype,"observe",null),ft([U()],s.prototype,"disconnect",null),ft([U()],s.prototype,"setStyleSheets",null),s})(),uy=Us(gy,"optimizeMutations"),dy=csSymbol.for("ignoreNextSerialization");function fy(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,u=new Set;return{isMovedNode(d){return s.has(d)},markAsMovedNode(d){u.delete(d),s.add(d)},isDetachedMove(d){return!!mt.findAncestor(d,g=>u.has(g),!0)},isAddedNode(d){let g=mt.findAncestor(d,m=>r.has(m)||l.has(m)||s.has(m),!0);return!!g&&!s.has(g)},isMovedNodeIntoAddedNode(d){return s.has(d)&&!!mt.findAncestor(d,g=>r.has(g)||l.has(g),!0)},markAsAddedNode(d){u.delete(d),l.delete(d),r.add(d)},markAsPendingInsert(d){l.add(d)},isPendingInsert(d){return l.has(d)},isRemovedNode(d){return!!mt.findAncestor(d,g=>t.has(g),!0)},markAsRemovedNode(d){t.add(d)},isUselessNode(d){return e.has(d)},markAsUselessNode(d){e.add(d)},getPlaceholder(d,g){let m=g==="previous"?n:i;return d&&m.has(d)?m.get(d)||null:d},getSiblings(d){let g=d.addedNodes.length,m=this.getPlaceholder(d.previousSibling,"previous"),v=this.getPlaceholder(d.nextSibling,"next");if(g){let b=m,C=v,A=d.previousSibling!==m,S=d.nextSibling!==v;for(let N=0;N<g;N++){let I=d.addedNodes[N],_=d.addedNodes[g-N-1];this.isLatestNodeMutation(I,d)?(n.delete(I),d.previousSibling&&A&&(i.set(d.previousSibling,I),A=!1),b=I):n.set(I,b),this.isLatestNodeMutation(_,d)?(i.delete(_),d.nextSibling&&S&&(n.set(d.nextSibling,_),S=!1),C=_):i.set(_,C)}}else d.previousSibling&&d.previousSibling!==m&&i.set(d.previousSibling,v),d.nextSibling&&d.nextSibling!==v&&n.set(d.nextSibling,m);return{previousSibling:m,nextSibling:v}},setAttributeMutation(d,g){let m=o.get(d)||new Set;m.add(g),o.set(d,m)},isAttributeMutated(d,g){var m;return!!(!((m=o.get(d))===null||m===void 0)&&m.has(g))},setLatestNodeMutation(d,g){h.set(d,g)},isLatestNodeMutation(d,g){return h.get(d)===g},markAsFutureAddedNode(d){h.has(d)||u.add(d)},isTextMutated(d){return c.has(d)},setTextMutated(d){return c.add(d)}}}function py(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function gy(s){let r=fy(),t=[];for(let e of s)e.type==="childList"&&py(e,r);for(let e of s)switch(e.type){case"attributes":yy(e,r,t);break;case"characterData":my(e,r,t);break;case"childList":Sy(e,r,t);break}return t}function my(s,r,t=[]){let e=s.target;return mt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!vy(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function yy(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return mt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Ey=30;function vy(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=k.now(),n=s[e];return n&&i<n?!0:(s[e]=i+Ey,!1)}function Sy(s,r,t=[]){let e=mt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,u=()=>{if(h){let{childListType:m,movedNodes:v,...b}=h;csArray.prototype.push.call(t,m==="added"?b:{...b,movedNodes:v}),h=null}},d=m=>m===(h==null?void 0:h.childListType)?h:(u(),{childListType:m,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let m=0;m<s.addedNodes.length;m++){let v=s.addedNodes[m];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(h=d("moved"),csArray.prototype.push.call(h.movedNodes,v)):(r.markAsAddedNode(v),n||(h=d("added"),csArray.prototype.push.call(h.addedNodes,v))),l=v):mt.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}u()}let g=ll(s.removedNodes,m=>{if(mt.isConnected(m)){if(!i&&!r.isPendingInsert(m)){if(r.isDetachedMove(m))return!0;r.markAsMovedNode(m),r.isMovedNodeIntoAddedNode(m)&&(m[dy]=!0)}return!1}return r.isUselessNode(m)?!1:(r.markAsRemovedNode(m),!0)});return g.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:g,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var dc={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Be=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static ch(e){if(s.shadowRootFilters.length>0&&ei(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,dc)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Qt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,dc)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(Rs.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.ch(document),this.shadowRootObserver=new Fs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,J(this.shadowRootObserver.shadowRoots,n=>{this.ch(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.R=e,this.cp=i;let n=Qr(o=>e(o,this),!0);this.R=Os("DocumentMutationObserver:callback",o=>{J(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?Bf(i,n):i!=null?i:n}observe(){s.observe(this.R,this.cp)}disconnect(){s.disconnect(this.R,this.cp)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{zt.mutations.count.increase(t.length),H.counters.mutations.push(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{J(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.ch(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,ft([U()],r.prototype,"observe",null),ft([U()],r.prototype,"disconnect",null),r})(),_y=(()=>{class s{constructor(t){this.R=t,this.lh=!1,this.S_=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.R({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.R({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.R({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.R({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.R=e=>Qt(()=>t(e)),this.lp=new sa(e=>Qt(async()=>{await ol(),this.S_(e)})),"adoptedStyleSheets"in Document.prototype&&(this.hp=new hy(t))}observe(){var t;this.lh=!1,this.U=new Be(e=>this.__(e),(e,i)=>{i==="added"&&this.w_(e)}),this.U.observe(),this.lp.observe(),(t=this.hp)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.U)===null||t===void 0||t.disconnect(),this.lp.disconnect(),(e=this.hp)===null||e===void 0||e.disconnect(),this.lh=!0}__(t){if(this.lh)return;let e=uy(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){ot.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:ot.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:mt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.R(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.R(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.R(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Ri(t.addedNodes)};this.R(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:ve(t.removedNodes,c=>c)};this.R(o)}}w_(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.R(e)}}return ft([U()],s.prototype,"processAttributeChanged",null),ft([U()],s.prototype,"processCharacterDataChanged",null),ft([U()],s.prototype,"processChildListChanged",null),s})(),wy=(()=>{class s extends Bs{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),Ay=(()=>{class s extends Bs{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Ty=(()=>{class s extends Bs{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),by=(()=>{class s extends Bs{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),Ry=(()=>{class s extends Bs{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Cy=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&Uo(t)&&(i[n].value=Eh(t))}return i}}return s})(),fc={workTime:40,async:!0,initialDOM:!0};var wi=csSymbol("InitialDom"),pc=csSymbol.for("ignoreNextSerialization");function Ah(s){return s[pc]?(delete s[pc],!0):!1}function Th(s=fc){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=fc.workTime);let n=Os("serialize:callback",g=>e(g)),o=new xi,c=(g,m)=>{g.hasChildNodes()&&o.push({node:g,serializedNode:m});let v=g instanceof Element&&csElementshadowRoot.apply(g);if(v){let b=m.shadowRoot=Ai(v);s.async&&s.initialDOM&&et.setProperty(v,wi,!0),c(v,b)}},l,h=!0,u=8,d=Os("work",()=>{var g;if(h)l=Ai(t),s.async&&s.initialDOM&&et.setProperty(t,wi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let m=Oy(100);for(;!o.isEmpty;){if(s.async&&m.elapsed()>=s.workTime){--u<=0&&csSetTimeout(d);return}let{node:v,serializedNode:b}=o.pop(),C=(g=b.children)!==null&&g!==void 0?g:[];if(Fr(v))continue;let A=0;for(let S=csNodefirstChild.apply(v);S;S=csNodenextSibling.apply(S)){if(Ah(S))continue;let N=Ai(S);s.async&&s.initialDOM&&et.setProperty(S,wi,!0),C[A++]=N,c(S,N)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,d();else for(let g=0;g<u;g++)csSetTimeout(d,1)}}function Iy(s){let r=Ai(s),t=r;if(Fr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))Ah(n)||(t.children[e++]=uo(n));let i=s.shadowRoot;return i&&(t.shadowRoot=uo(i)),r}var uo=Us(Iy,"serializeSync");function Ai(s){let r,t;switch(csNodenodeType.apply(s)){case 1:t=r=new Le(s),r.attributes=Ny(s);break;case 3:t=new Sh(s);break;case 4:t=new wy(s);break;case 8:t=new Ay(s);break;case 10:t=new Ty(s);break;case 9:t=new by(s);break;case 11:t=new Ry(s);break;default:throw new Error("Node type not supported: "+csNodenodeType.apply(s))}return t}function Py(){wi=csSymbol("InitialDom")}function Oy(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=k.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=k.elapsed()),t-this.started}}}function Ny(s){return Fr(s)?[]:Cy.create(s)}var ia=(()=>{class s{constructor(t){this.type="asyncEvent",this.hh=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.hh)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.ni=t,this.hh=!0,this.R&&this.R(this.ni)}complete(t){this.hh&&t(this.ni),this.R=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),be=(()=>{class s{constructor(){this.Pt=[],this.isStarted=!1}async produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:k.now(),t.timestamp==null&&(t.timestamp=k.now()),csArray.prototype.forEach.call(this.Pt,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.Pt=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.Pt,t),()=>{let e=csArray.prototype.indexOf.call(this.Pt,t);csArray.prototype.splice.call(this.Pt,e,1)}}}return s})(),My=Th(),bh=(()=>{class s extends be{constructor(){super(...arguments),this.ba=!1}onStart(){this.ba=!0,this.R=Jm(this.A_,this),this.G=new _y(this.R),this.G.observe();let t=zt.mutations.initialDOM.asyncMeasure(),e=()=>{this.ba=!1,Py(),t()};this.produceEvent(new ia(i=>My(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.ba=!1,(t=this.R)===null||t===void 0||t.cancel(),(e=this.G)===null||e===void 0||e.disconnect()}Zt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=Y(e.target),i.targetProps=et.getProperties(e.target)),[e,i]}A_(t){if(!this.T_(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Zt(t.type,t);i.attribute=e.attribute,i.isSvg=Vs(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=yi(e.target),i.linkRel=fl(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?yi(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Zt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=csNodenodeType.apply(e.target),i.parentLocalName=e.target.parentElement?yi(e.target.parentElement):null,i.parentProps=e.target.parentElement?et.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Zt(t.type,t);i.targetLocalName=dt(e.target)?yi(e.target):null,i.nextSibling=e.nextSibling?Y(e.nextSibling):null,i.previousSibling=e.previousSibling?Y(e.previousSibling):null,zt.mutations.serializedMutations.measure(()=>{i.nodes=ve(e.nodes,uo)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Zt(t.type,t);i.previousSibling=e.previousSibling?Y(e.previousSibling):null,i.nextSibling=e.nextSibling?Y(e.nextSibling):null,i.nodesIds=ve(e.nodes,Y),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Zt(t.type,t);i.nodesIds=ve(e.nodes,Y),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Zt(t.type,t);i.shadowRoot=Ai(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Zt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Zt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Zt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Zt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Zt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}Ra(t){return this.ba&&!et.getProperty(t,wi)}T_(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.Ra(t.target)||M.isMaskedElement(t.target)||M.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.Ra(e)||M.isMaskedElement(e)||M.isMaskedElementChild(e))}case"attributeChanged":return this.Ra(t.target)||M.isMaskedElementChild(t.target)||M.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.Ra(t.target)||M.isMaskedElementChild(t.target);default:return!1}}}return s})(),ks=(()=>{let s;return function(r){function t(i){return i.type==="DomEvent"}r.isDOMEvent=t;function e(i){return i.domEvent==="attributeChanged"}r.isAttributeChangedEvent=e}(s||(s={})),s})(),Bi=(()=>{class s{constructor(){this.Pt=[]}start(){}stop(){this.Pt.length=0,this.Pt=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.Pt;csSetTimeout(()=>{let n=Os("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.Pt,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.Pt,t),()=>{this.Pt=csArray.prototype.filter.call(this.Pt,e=>e!==t)}}emitEvent(t){Qt(()=>csArray.prototype.forEach.call(this.Pt,e=>e(t)))}}return s.pendingEvents=0,s})(),Rh=(()=>{class s extends Bi{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||ks.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.processFastDOM(t),t;let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof Le){let c=M.getMaskedAttributeDetails(n);n.attributes=this.Ca(n,c)}if(M.getMaskedElementDetails(n).state===M.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}et.traverse(n,c=>{if(c instanceof Le){let l=M.getMaskedAttributeDetails(c);c.attributes=this.Ca(c,l);let h=M.getMaskedElementDetails(c);h.state===M.MaskedElementState.Parent&&(this.Ia(c,h),e++)}})}return e>0&&H.counters.sensitiveElements.count("masked-elements",e),t}processFastDOM(t){var e;let{MaskedElementState:i}=M,n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=n[c],h=o[c],u=M.getMaskedElementDetails(h);if(u.state===i.Child){delete n[c];continue}else if(h.type!==1)continue;let d=M.getMaskedAttributeDetails(h);for(let g of(e=d.attributes)!==null&&e!==void 0?e:[])l.attributes&&delete l.attributes[g];u.state===i.Parent&&this.Ia(l,u)}}Ca(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Ia(t,e){var i;let n=`width: ${e.width}px !important; height: ${e.height}px !important;`;"nodeType"in t?(t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:n,namespaceURI:""}),Le.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})):((i=t.attributes)!==null&&i!==void 0||(t.attributes={}),delete t.firstChild,delete t.shadowRoot,t.attributes.style=n,t.attributes["data-cs-mask"]||(t.attributes["data-cs-mask"]=""))}}return He([Ht("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),se=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return et.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){et.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){et.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Dy=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,ky="\uFF41",xy=/[^\s]/g,Ly="a";function bn(s){let r=csString.prototype.replace.call(s,Dy,ky);return csString.prototype.replace.call(r,xy,Ly)}function Vy(s,r){let t=r==="number"?"0":"\u2022";return csString.prototype.replace.call(s,/\S/g,t)}var Uy=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.ps=t,this.kn=e,this.D=i,this.Pa=n,this.b_=o,this.xn=$r(this.kn)}sanitize(t,e){return et.traverse(t,(i,n)=>{if(i.anonymized=this.ps,i.nodeType===Ue.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?et.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(Le.isElement(i))return this.R_(i);if(i.nodeType===Ue.CDATA_SECTION_NODE){let o=i;o.data=this.ps?bn(o.data):this.D.checkAndAnonymizePII(o.data,this.Pa);return}}),t}setAnonymization(t){this.ps=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[se.ANONYMIZED_TEXT_STATUS_PROP])===se.WHITELISTED_STATUS;return this.ps&&!n?{anonymizedValue:bn(t),withAnonymization:!0}:{anonymizedValue:this.D.checkAndAnonymizePII(t,this.Pa),withAnonymization:!1}}R_(t){let e=Li(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.ps,n.value=this.getAnonymizedAttributeValue(t.namespaceURI,t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n,o){if(t==="http://www.w3.org/2000/svg"||t==="svg"||this.C_(e,i,o))return n;if(fg(i))return pg(e,i,n)?this.D.anonymizePII(n):n;let c=this.b_&&i==="placeholder";return this.ps&&(gg(e,i,o)||c)?bn(n):this.ps?"":this.D.checkAndAnonymizePII(n,null)}C_(t,e,i){return dg(t,e,i)||this.xn.has(e)}}return s})();var jy=()=>(s,r,t)=>{t.value=Hy(t.value)};function Hy(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,Lo(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}jy.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var Ch=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="encrypted";function t(n){return et.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){et.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){et.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),ke=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){var o;return"nodeType"in n?et.getProperty(n,r.EDITABLE_NODE_PROP)===!0:((o=n.metadata)===null||o===void 0?void 0:o[r.EDITABLE_NODE_PROP])===!0}r.isEditableNode=t;function e(n){et.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){et.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})();var gc=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})();function mc(s){var r;let t=(r=s.attributes)===null||r===void 0?void 0:r.type;if(t!=null)return csString.prototype.trim.call(csString.prototype.toLowerCase.call(t))}var Ih=(()=>{class s extends Bi{constructor(t,e,i=new js,n=null,o=!1){super(),this.D=i,this.Pa=n,this.captureAnonymizedPlaceholders=o,this.Tr=new Uy(t,e,i,n,o)}setAnonymization(t){this.Tr.setAnonymization(t)}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||gc.isTextVisibilityEvent(t)||ks.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||ks.isAttributeChangedEvent(t)&&typeof t.newValue=="string"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.D_(t);if(gc.isTextVisibilityEvent(t))return t.text=this.D.checkAndAnonymizePII(t.text,this.Pa),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.yh(t);break;case"attributeChanged":this.k_(t);break;case"characterDataChanged":this.x_(t);break}return t}D_(t){var e,i;let n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=o[c],h=o[l.parent];switch(l.type){case Ue.TEXT_NODE:case Ue.COMMENT_NODE:{let u=n[c];if(st(u.data)){if(h.localName==="script"){u.data="";continue}}else continue;let{anonymizedValue:d,withAnonymization:g}=this.Tr.getAnonymizedValue((e=u.data)!==null&&e!==void 0?e:"",h.localName,h.metadata);u.anonymized=g,u.data=d;break}case Ue.ELEMENT_NODE:{let u=n[c];if(u.attributes)for(let d in u.attributes){let g=u.attributes[d],m=mc(l);u.attributes[d]=this.Tr.getAnonymizedAttributeValue(l.namespaceURI,l.localName,d,g,m)}!((i=u.state)===null||i===void 0)&&i.value&&(u.state.value=Vy(u.state.value,mc(l)));break}}}return t}yh(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Tr.sanitize(n,i)}k_(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Tr.getAnonymizedAttributeValue(t.namespace,t.localName,t.attribute,t.newValue,t.inputType)}}x_(t){t.newValue=this.Tr.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return He([Ht("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var tt=(()=>{let s;return function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE",r[r.DOCUMENT_NODE=9]="DOCUMENT_NODE",r[r.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",r[r.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",r[r.CSS_STYLESHEET_NODE=50]="CSS_STYLESHEET_NODE"}(s||(s={})),s})();function ra(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=By(r);return e?(ki(t,",")||(e=Fy(e)),[yc(t),...ra(e)]):[yc(t)]}function By(s){return csString.prototype.split.call(s,/\s(.+)/)}function yc(s){return csString.prototype.split.call(s,/,$/)[0]}function Fy(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var $y=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function zy(s,r){return csString.prototype.replace.call(s,$y,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=qy((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${Gy(l)})`})}function Gy(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Ti(s){let r=new Set;return zy(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),Ns(r)}function qy(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var Ec=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.U_(t);if(!n)return null;let o=await s.Ep(n),c=fe(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.j_(t,n),c=xe(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(u=>{u&&csArray.prototype.push.call(h.nestedResources,{hash:u.hash,data:u.data})})),h}static async Ep(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.vp,e);return qn(i)}static async U_(t){let e;if(!fe(t))e=await(await window.fetch(t)).blob();else{let i=La(t);if(!i)return null;e=i}return e}static async j_(t,e){let i=new Map,n=xe(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!fe(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let m=await fetch(l.resourceAbsolutePath);l.data=await m.text()}l.nestedResources||(l.nestedResources=Ti(l.data));let d=!1,g=!1;for(let m of l.nestedResources){let v=fe(m)?m:l.resourceAbsolutePath?wl(m,l.resourceAbsolutePath):xe(m),b=i.get(v);if(b!==void 0){if(b!==null){let A=s.H_(b,m);l.data=Ct.stringReplaceAll(l.data,m,A)}continue}Li(c,A=>A.resourceAbsolutePath===v)!==void 0||(d=!0,g||(csArray.prototype.push.call(c,l),g=!0),csArray.prototype.push.call(c,{resourceRawPath:m,resourceAbsolutePath:v}))}if(!d){let m=await s.B_(l.data);i.set(l.resourceAbsolutePath,{hash:m.hash,data:m.data})}}else{let d;if(!fe(l.resourceAbsolutePath))d=await(await fetch(l.resourceAbsolutePath)).blob();else{let m=La(l.resourceAbsolutePath);if(!m){i.set(l.resourceAbsolutePath,null);continue}d=m}let g=await s.Ep(d);i.set(l.resourceAbsolutePath,{hash:g,data:d})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static H_(t,e){let i=`cs://resources/${t.hash}`;return fe(e)||(i+=`?${s.vh}=${e}`),i}static async B_(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.vp,i);return{data:e,hash:qn(n)}}}return s.vp="SHA-256",s.vh="original-resource-name",s})(),ii=(()=>{class s extends Bi{get busy(){return this.Sh>0}constructor(){super(),this.F_="cssrm://",this.$_=1,this.gs=!1,this.Sh=0}isListening(t){if(s.isSupported()){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return!0;if(!ks.isDOMEvent(t))return!1}else return!1;return t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){if(t.type!=="DomEvent")return this.z_(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.G_(t);break;case"attributeChanged":this.q_(t);break;case"characterDataChanged":this.W_(t);break}return t}disableOnlineAssets(){this.gs=!1}enableOnlineAssets(){this.gs=!0}isOnlineAssetsActivated(){return this.gs}z_(t){var e;let i=t.type==="DOM_PATCH"?t.diff:t.state;for(let n in i){let o=i[n],c=t.state[n],l=t.state[c.parent];switch(c.type){case tt.TEXT_NODE:this.Sp(o,l==null?void 0:l.localName);break;case tt.CSS_STYLESHEET_NODE:{if(o=o,o.cssRules)for(let h in o.cssRules){let u=o.cssRules[h],d=this.br(u);d!==null&&(o.cssRules[h]=d)}break}case tt.ELEMENT_NODE:{o=o;let h=o.attributes;if(!h)continue;if(h.style&&(h.style=this.br(h.style)),(this._p(c.localName)||this.wp(c.localName,l==null?void 0:l.localName))&&("src"in h&&(h.src=this._h(h.src)),"srcset"in h&&(h.srcset=this.Ah(h.srcset))),this.gs&&c.localName==="link"&&(!((e=h.href)===null||e===void 0)&&e.length)&&h.rel==="stylesheet"){let u=this.Ui(xe(h.href),!0);h["data-cs-original-href"]=h.href,h.href=u}}}}return t}G_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)et.traverse(i,(n,o)=>{if(n.nodeType===Ue.TEXT_NODE&&o){this.Sp(n,o.localName);return}if(!Le.isElement(n))return;let c=Le.getAttribute(n,"style");if(c!=null&&c.value&&(c.value=this.br(c.value)),this._p(n.localName)||this.wp(n.localName,o==null?void 0:o.localName)){let l=Le.getAttribute(n,"src");l!=null&&l.value&&(l.value=this._h(l.value));let h=Le.getAttribute(n,"srcset");if(h){h.value=this.Ah(h.value);return}}if(this.Y_(n)&&this.gs){let l=Li(n.attributes,u=>u.name==="href");if(!l||!l.value)return;let h=this.Ui(xe(l.value),!0);csArray.prototype.push.call(n.attributes,{name:"data-cs-original-href",namespaceURI:"",value:l.value}),l.value=h}})}Sp(t,e){if(!t||e!=="style")return;let i=this.br(t.data);i!==null&&(t.data=i)}W_(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.br(t.newValue);e!==null&&(t.newValue=e)}q_(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.br(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this._h(t.newValue)),i&&(t.newValue=this.Ah(t.newValue)))}_h(t){return fe(t)||this.gs?this.Ui(t,!1,k.now()):t}Ah(t){if(!this.gs)return t;let e=t,i=ra(t);for(let n of i){let o=this.Ui(xe(n),!1);e=csString.prototype.replace.call(e,n,o)}return e}br(t){let e=Ti(t),i=t,n=k.now();for(let o of e){let c=fe(o);if(!(c||this.gs)||this.X_(o))continue;let l=Pr(o),h=o;c?h=this.Ui(o,!1,n):this.gs&&(l?h=this.Ui(o,!0,n):h=this.Ui(xe(o),!1,n)),i=csString.prototype.replace.call(i,o,h)}return i}Ui(t,e,i=k.now()){let n=this.$_++;this.Sh++;let o=e?Ec.toCSSStaticResourceEvent:Ec.toStaticResourceEvent,c=new ia(async l=>{try{let h=await o(t,n,i,this.gs);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}finally{this.Sh--}});return this.emitEvent(c),this.F_+n}_p(t){return t==="img"}wp(t,e){return t==="source"&&e==="picture"}Y_(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return rl()&&Nf()&&!!csArray.from}X_(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return He([Ht("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),gi=console;var Is={debug:(...s)=>gi.debug(...s),log:(...s)=>gi.log(...s),info:(...s)=>gi.info(...s),warn:(...s)=>gi.warn(...s),error:(...s)=>gi.error(...s)},fo=(()=>{class s{push(t){let e={value:t};this.Rr?(this.Th.next=e,this.Th=e):(this.Rr=e,this.Th=e)}pushMany(t){for(let e of t)this.push(e)}shift(){if(!this.Rr)return;let t=this.Rr;return this.Rr=t.next,this.Rr||(this.Th=void 0),t.value}isEmpty(){return!this.Rr}}return s})(),Ni=(()=>{let s;return function(r){r[r.High=0]="High",r[r.Low=1]="Low"}(s||(s={})),s})(),na=(()=>{class s{constructor(){this.Ap=new fo,this.Tp=new fo,this.length=0}push(t,e=Ni.Low){return e===Ni.High?this.Ap.push(t):this.Tp.push(t),this.length+=1}shift(){if(this.length!==0)return this.length-=1,this.Ap.shift()||this.Tp.shift()}isEmpty(){return this.length===0}}return s})(),Wy=(()=>{class s{get length(){return this.wt.length}constructor(){this.Un=[],this.wt=new na,this.bh=new Set}J_(t){switch(t.type){case"attributes":return`-${t.attributeNamespace}-${t.attributeName}`;default:return""}}K_(t){switch(t.type){case"pointerOverElement":case"customElementRegistration":return}return`${Y(t.target)}-${t.type}${this.J_(t)}`}Q_(t){switch(t.type){case"state":return Ni.High;default:return Ni.Low}}Z_(t){let e=this.K_(t);if(e){if(this.bh.has(e))return;this.bh.add(e)}return this.wt.push({mutation:t,key:e},this.Q_(t))}tw(){this.Un.length!==0&&(csArray.prototype.forEach.call(csArray.prototype.flat.call(this.Un),t=>this.Z_(t)),this.Un=[])}push(t){csArray.prototype.push.call(this.Un,t)}shift(){this.tw();let t=this.wt.shift();if(t)return t.key&&this.bh.delete(t.key),t.mutation}isEmpty(){return this.wt.isEmpty()&&this.Un.length===0}}return s})(),Yy=(()=>{class s{constructor(t){this.Ee=t,this.Ma=!1,this.Ms=new WeakSet,this.Da=e=>{let i=e.getRootNode();i&&this.Ms.has(i)&&this.Ee(e)}}observe(t){this.Ms.has(t)||(this.Ms.add(t),this.Ma||(hs.subscribe(this.Da),this.Ma=!0))}disconnect(){this.Ma&&(hs.unsubscribe(this.Da),this.Ma=!1),this.Ms=new WeakSet}}return s})(),Rn=new WeakMap,Cn=new WeakMap;function vc(s,r){if(!s||typeof s!="object"&&typeof s!="function")return s;if(Rn.has(s))return Rn.get(s);let t=r();return Rn.set(s,t),t}function po(s,r){return s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()}),s}function Xy(s,r,t,e,i){Object.defineProperty(s,r,{set(n){var o;let c=(o=t.set)===null||o===void 0?void 0:o.apply(this,[n]);return e(this,[r],[n],c),c},get(){var n;let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return vc(o,()=>{let c=new Proxy(o,{get(l,h){let u=Reflect.get(l,h);return typeof u!="function"?u:vc(u,()=>i&2?po(function(...d){let g=Cn.get(this)||this,m=Reflect.apply(u,g,d);return e(g,[r,h],d,m),m},u):po(function(...d){let g=Cn.get(this)||this;return Reflect.apply(u,g,d)},u))},set:i&1?(l,h,u)=>{let d=Reflect.set(l,h,u);return e(l,[r,h],[u],d),d}:Reflect.set});return Cn.set(c,o),c})}})}function Jy(s,r,t,e){let i={};t.get&&(i.get=t.get),t.set&&(i.set=function(n){let o=t.set.call(this,n);return e(this,[r],[n],o),o}),t.value&&(i.value=po(function(...n){let o=Reflect.apply(t.value,this,n);return e(this,[r],n,o),o},t.value),i.writable=t.writable!==!1),t.configurable!==void 0&&(i.configurable=t.configurable),t.enumerable!==void 0&&(i.enumerable=t.enumerable),Object.defineProperty(s,r,i)}function yt(s,r,t,e={}){let i=s&&s.prototype?s.prototype:s;if(!i)return()=>{};let n=csSymbol.for(`fd_spy_${r}`);if(n in i){let h=i[n];return h.add(t),()=>h.delete(t)}let o=i[n]=new Set([t]),c=Object.getOwnPropertyDescriptor(i,r);if(!c)return Is.warn(`Could not find descriptor for ${r} on target`,i),()=>o.delete(t);let l=(...h)=>{for(let u of o)try{u(...h)}catch(d){Is.warn(`Error in spy hook for ${r} on target`,i,d)}};return e.mode?Xy(i,r,c,l,e.mode):Jy(i,r,c,l),()=>o.delete(t)}function Wt(s,r,t){let e=i=>t(i.target);return s.addEventListener(r,e,{capture:!0,passive:!0}),()=>{s.removeEventListener(r,e,{capture:!0})}}var Ky=(()=>{class s{constructor(t){this.Ee=t,this.Pt=new WeakMap,this.ve=e=>this.Ee({type:"state",target:e}),this.bp=e=>this.Ee({type:"setAdoptedStyleSheets",target:e}),this.Cr=e=>this.Ee({type:"styleSheetUpdated",target:e}),this.Hn=e=>{var i;let n=(i=this.ew(e))===null||i===void 0?void 0:i.parentStyleSheet;n&&this.Cr(n)},this.iw=e=>this.Ee({type:"styleSheetDisabledChanged",target:e}),this.Rp=e=>this.Ee({type:"activeElementChanged",target:e.ownerDocument}),this.Da=e=>this.Ee({type:"metadataChanged",target:e})}rw(t){return csNodenodeType.apply(t)===tt.DOCUMENT_NODE}nw(t){let e=[Wt(t,"input",this.ve),Wt(t,"change",this.ve),Wt(t,"checked",this.ve),Wt(t,"scroll",this.ve),Wt(t,"toggle",this.ve),Wt(t,"focusin",this.Rp),Wt(t,"focusout",this.Rp),Wt(t,"pointerover",i=>{this.Ee({type:"pointerOverElement",target:i.ownerDocument,element:i})}),Wt(t,"pointerout",i=>{this.Ee({type:"pointerOverElement",target:i.ownerDocument,element:null})}),Wt(t,"load",i=>{switch(i.localName){case"iframe":case"link":this.Ee({type:"loaded",target:i});break}})];this.ka(t,()=>{csArray.prototype.forEach.call(e,i=>i())})}ow(t){let e=t.defaultView;if(!e)return;let i=[Wt(e,"resize",()=>this.ve(t)),Wt(t,"visibilitychange",()=>this.ve(t)),Wt(t,"fullscreenchange",()=>this.ve(t)),yt(e.Document,"adoptedStyleSheets",this.bp,{mode:2}),yt(e.ShadowRoot,"adoptedStyleSheets",this.bp,{mode:2}),yt(e.Element,"attachShadow",(n,o,c,l)=>{this.Ee({type:"attachShadow",target:n,shadowRoot:l})}),yt(e.HTMLInputElement,"value",this.ve),yt(e.HTMLInputElement,"checked",this.ve),yt(e.HTMLSelectElement,"selectedIndex",this.ve),yt(e.CSSStyleSheet,"insertRule",this.Cr),yt(e.CSSStyleSheet,"deleteRule",this.Cr),yt(e.CSSStyleSheet,"replace",this.Cr),yt(e.CSSStyleSheet,"replaceSync",this.Cr),yt(e.CSSStyleSheet,"addRule",this.Cr),yt(e.CSSStyleRule,"style",this.Hn,{mode:1}),yt(e.CSSGroupingRule,"insertRule",this.Hn),yt(e.CSSGroupingRule,"deleteRule",this.Hn),yt(e.CSSStyleDeclaration,"setProperty",this.Hn),yt(e.CSSStyleDeclaration,"removeProperty",this.Hn),yt(e.StyleSheet,"disabled",this.iw),yt(e.HTMLDialogElement,"show",this.ve),yt(e.HTMLDialogElement,"showModal",this.ve),yt(e.HTMLDialogElement,"close",this.ve),yt(e.CustomElementRegistry,"define",(n,o,c)=>{this.Ee({type:"customElementRegistration",target:t,name:c[0]})})];this.ka(t,()=>{csArray.prototype.forEach.call(i,n=>n())})}ew(t){for(;t.parentRule!==null;)t=t.parentRule;return t}aw(t){let e=new csMutationObserver(i=>{this.Ee(i)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),this.ka(t,()=>{e.disconnect()})}lw(t){let e=new Yy(this.Da);e.observe(t),this.ka(t,()=>{e.disconnect()})}ka(t,e){this.Pt.get(t)==null||csArray.prototype.push.call(this.Pt.get(t),e)}observe(t){this.Pt.has(t)||(this.Pt.set(t,[]),this.nw(t),this.rw(t)&&this.ow(t),this.aw(t),this.lw(t))}disconnect(t){let e=this.Pt.get(t)||[];for(let i of e)try{i()}catch(n){Is.warn(n)}this.Pt.delete(t)}}return s})(),Ph=new na,ht,Qy=40,Zy=10;function tE(s){return csSetTimeout(()=>{let r=0,t=0,e=performance.now(),i=!0;s({get hasTimeLeft(){return r%Zy===0&&(t=performance.now(),i=t-e<Qy),r++,i}})},0)}function Sc(){var s;let r=(s=ht==null?void 0:ht.subTasks)===null||s===void 0?void 0:s.shift();return r?(r.subTasks=ht==null?void 0:ht.subTasks,r):Ph.shift()}function Oh(){tE(s=>{for(ht||(ht=Sc());s.hasTimeLeft&&ht;){ht.isRunning=!0;try{ht.isEnded=ht.run(s)!==!0}catch(r){Is.error("Error occurred while running task:",r),ht.isEnded=!0}ht.isRunning=!1,(ht.isEnded||ht.isAborted)&&(ht=Sc())}ht&&Oh()})}function mi(s,r=Ni.Low){let t={run:s,isAborted:!1,isEnded:!1,abort:()=>{t.isAborted=!0}};return ht!=null&&ht.isRunning?(ht.subTasks=ht.subTasks||new na,ht.subTasks.push(t,r)):Ph.push(t,r)===1&&!ht&&Oh(),t}var eE=40;function _c(s){return csString.prototype.replace.call(s,/[:\\]/g,"\\$&")}function In(s){return csString.prototype.replace.call(s,/\\([:\\\\])/g,"$1")}var Pn=["nextSibling","firstChild","contentDocument","shadowRoot","sheetId"];function On(s,r){return!!s&&r in s&&!!s[r]}var wc={"http://www.w3.org/1999/xhtml":void 0,"http://www.w3.org/2000/svg":"svg"},go=(()=>{class s{constructor(t){this.R=t,this.G=new Ky(e=>{this.Rh.push(e),this.hw()}),this.Xe={},this.Je=new Map,this.Rh=new Wy,this.Bn=new Map,this.processedMutationsCount=0,this.serializedNodeCount=0,this.Cp=0,this.Ip=eE}disconnect(){for(let t of this.Bn.values())this.G.disconnect(t);this.Bn.clear()}observe(t){return this.disconnect(),this.xa(t),this}getState(t=!0){let e=this.Xe;return this.Xe={...e},t&&this.Pp(),e}getChanges(){let t={};for(let[i,n]of this.Je){let o=this.Xe[i];if(!(n&&!o))if(o&&!n)t[i]=cs(o);else{let c=Bl(n,o);c!==void 0&&(t[i]=c)}}return this.Pp(),Hl(t)?t:void 0}setFrameRate(t){return this.Ip=t/1e3,this}onChange(t){return this.R=t,()=>{this.R===t&&(this.R=void 0,this.Fn&&(csClearTimeout(this.Fn),this.Fn=void 0))}}async getStateAsync(t=!0){return await this.Op(),this.getState(t)}async getChangesAsync(){return await this.Op(),this.getChanges()}async Op(){return new Promise(t=>{mi(()=>t())})}Pp(){this.Je.clear()}static*findNodes(t,e){for(let i of Object.values(t))e(i)&&(yield i)}static stringifyAttrKey(t,e){let i=_c(e);return t?`${_c(t)}:${i}`:i}static parseAttrKey(t){let e=!1,i=-1;for(let c=0;c<t.length;c++){let l=t[c];if(e)e=!1;else if(l==="\\")e=!0;else if(l===":"){i=c;break}}if(i===-1)return{namespaceURI:null,name:In(t)};let n=csString.prototype.slice.call(t,0,i),o=csString.prototype.slice.call(t,i+1);return{namespaceURI:In(n),name:In(o)}}static apply(t,e,i){let n={...t},o=new Set,c=new Set,l=g=>{c.has(g)?c.delete(g):o.add(g)},h=g=>{o.has(g)?o.delete(g):c.add(g)};function u(g,m){for(let v of Pn)v in m&&(On(g,v)&&l(g[v]),On(m,v)&&h(m[v]))}for(let[g,m]of Object.entries(e)){if(m===null)continue;let v=g,b=n[v],C=b===void 0?m:Fl(b,m);u(b,m),n[v]=C}let d=g=>{if(c.has(g))return;let m=n[g];if(m){delete n[g],i==null||i(g);for(let{nodeId:v}of s.nodeRelationsEntries(m))d(v)}};for(let g of o)d(g);return n}static nodeRelationsEntries(t,e=!1){let i=e?Pn.filter(o=>o!=="nextSibling"):Pn,n=[];for(let o of i)On(t,o)&&csArray.prototype.push.call(n,{key:o,nodeId:t[o]});return n}At(t){if(t in this.Xe&&!this.Je.has(t)){let e=this.Xe[t];this.Je.set(t,cs(e)),this.Xe[t]=cs(e)}return this.Xe[t]}uw(t){try{let e=t.cssRules.length,i={};for(let n=0;n<e;n++){let o=t.cssRules[n];i[n]=o.cssText}return{type:tt.CSS_STYLESHEET_NODE,cssRules:i,disabled:t.disabled}}catch{return{type:tt.CSS_STYLESHEET_NODE,cssRules:{}}}}fw(t){return csArray.prototype.pop.call(csArray.from(window.csquerySelectorAll[t.nodeType].call(t,":hover")))||void 0}pw(t){let e=hs.getAll(t);switch(csNodenodeType.apply(t)){case tt.DOCUMENT_NODE:{let i=t,n=i.activeElement||void 0,o=this.fw(i),c={type:tt.DOCUMENT_NODE,baseURI:i.baseURI,activeId:n&&Y(n),hoveredId:o&&Y(o),...this.Np(t),metadata:e};return i.compatMode==="BackCompat"&&(c.quirksMode=!0),c}case tt.DOCUMENT_FRAGMENT_NODE:return{type:tt.DOCUMENT_FRAGMENT_NODE,mode:t.mode,metadata:e};case tt.COMMENT_NODE:return{type:tt.COMMENT_NODE,data:void 0,metadata:e};case tt.ELEMENT_NODE:{let i=t,n=i.namespaceURI||"";return{type:tt.ELEMENT_NODE,namespaceURI:n in wc?wc[n]:n,localName:i.localName,attributes:this.gw(i),state:this.Mp(i),metadata:e}}case tt.TEXT_NODE:return{type:tt.TEXT_NODE,data:t.data||"",metadata:e};case tt.CDATA_SECTION_NODE:return{type:tt.CDATA_SECTION_NODE,data:t.data,metadata:e};case tt.DOCUMENT_TYPE_NODE:return{type:tt.DOCUMENT_TYPE_NODE,name:t.name,publicId:t.publicId,systemId:t.systemId,metadata:e};default:return null}}gw(t){return csArray.prototype.reduce.call(csArray.from(t.attributes),(e,i)=>{let n=e||{};return n[s.stringifyAttrKey(i.namespaceURI,i.name)]=i.value,n},void 0)}Np(t){let e=t.defaultView,i=e==null?void 0:e.visualViewport;return{state:{scrollX:e==null?void 0:e.scrollX,scrollY:e==null?void 0:e.scrollY,visibility:t.visibilityState},viewport:{width:i==null?void 0:i.width,height:i==null?void 0:i.height},screen:{width:e==null?void 0:e.screen.width,height:e==null?void 0:e.screen.height}}}Mp(t){let e={};return"value"in t&&t.value&&(e.value=t.value),"selectedIndex"in t&&t.selectedIndex!==void 0&&t.selectedIndex>=0&&(e.selectedIndex=t.selectedIndex),"checked"in t&&t.checked&&(e.checked=t.checked),t.popover&&t.matches(":popover-open")?e.popover=!0:t.localName==="dialog"&&(e.open=t.open),t.scrollLeft&&(e.scrollX=t.scrollLeft),t.scrollTop&&(e.scrollY=t.scrollTop),e}hw(){var t;((t=this.mw)===null||t===void 0?void 0:t.isEnded)!==!1&&(this.mw=mi(e=>(this.Ir(e),this.Dp(),!this.Rh.isEmpty())))}Dp(){if(!this.R||this.Fn)return;let t=performance.now()-this.Cp,e=Math.max(0,this.Ip-t);this.Fn=csSetTimeout(()=>{this.Fn=void 0;let i=this.getChanges();this.Cp=performance.now(),i&&this.R(i,this.getState())},e)}yw(t){for(let e=t==null?void 0:t.previousSibling;e;e=e.previousSibling)if(this.ms(e))return Y(e)}Ew(t){var e;let i=csNodeparentNode.apply(t)||t.host||((e=t.defaultView)===null||e===void 0?void 0:e.frameElement);if(this.ms(i))return Y(i)}xa(t){let e=new fo;e.pushMany(this.kp(t,!1)),!e.isEmpty()&&mi(i=>{let n;for(;i.hasTimeLeft&&(n=e.shift());){e.pushMany(this.kp(n));let o=csNodenextSibling.apply(n);o&&e.push(o)}return!!n})}vw(t){switch(t){case tt.DOCUMENT_NODE:return"contentDocument";case tt.DOCUMENT_FRAGMENT_NODE:return"shadowRoot";default:return"childList"}}Pr(t){mi(()=>{let e=t.ownerNode;if(e&&(!this.Ar(e)||!this.ms(e)))return!1;if(this.ms(t)||!e||e.localName==="style"?this.xp(t):this.Ch(Y(t),{type:tt.CSS_STYLESHEET_NODE,cssRules:{},disabled:t.disabled}),e&&this.ms(e)){let i=Y(e);this.At(i).sheetId=Y(t)}return!1})}Lp(t){let e=0,i=Y(t),n=t.adoptedStyleSheets||[],o=n.length,c={};mi(l=>{if(!this.ms(t)||!this.Ar(t)||n!==t.adoptedStyleSheets)return!1;for(;l.hasTimeLeft&&e<o;){let u=n[e];c[e]=this.ms(u)?Y(u):this.xp(u),e+=1}if(e<o)return!0;let h=this.At(i);return h&&(h.adoptedStyleSheets=c),!1})}xp(t){let e=Y(t);return this.Ch(e,this.uw(t)),e}Ch(t,e){this.serializedNodeCount++,this.Xe[t]=e,this.Dp(),this.Je.has(t)||this.Je.set(t,null)}ms(t){return Y(t)in this.Xe}Vp(t){var e;if(!s.trackIframeContent||t.localName!=="iframe")return!1;let i=t;try{return!!i.contentDocument&&!!(!((e=i.contentWindow)===null||e===void 0)&&e.document)}catch{return!1}}Up(t){let e=Y(t),i=this.Xe[e];if(!i){Is.warn(`No serialized node id ${e}`);return}let n=this.Ew(t);if(!n){Is.warn("No parent id for node",t);return}let o=this.vw(i.type);if(o==="childList"){let c=this.yw(t);this.Ih(e,c,n,!0)}else{let c=this.At(n);c[o]=e,i.parent=n}}*kp(t,e=!0){var i,n,o,c;if(!this.Ar(t))return;if(this.ms(t)){e&&this.Up(t);return}let l=Y(t),h=this.pw(t);if(!h){Is.warn("Node was not serialized",t);return}switch(this.Ch(l,h),e&&this.Up(t),h.type){case tt.DOCUMENT_NODE:case tt.DOCUMENT_FRAGMENT_NODE:{let d=t;this.Bn.set(l,d),this.G.observe(d),!((i=d.adoptedStyleSheets)===null||i===void 0)&&i.length&&this.Lp(d);break}case tt.TEXT_NODE:{((n=t.parentElement)===null||n===void 0?void 0:n.localName)==="style"&&(h.data="");break}case tt.ELEMENT_NODE:{let d=t;switch(h.localName){case"iframe":this.Vp(d)&&(yield d.contentDocument);break;case"link":d.rel==="stylesheet"&&d.sheet&&this.Pr(d.sheet);break;case"style":{let g=d.sheet;g&&this.Pr(g);break}default:zg(h.localName)&&(!((c=(o=t.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||c===void 0)&&c.customElements.get(h.localName))&&this.jp(Y(t.ownerDocument),h.localName),csElementshadowRoot.apply(d)&&(yield csElementshadowRoot.apply(d));break}break}}let u=csNodefirstChild.apply(t);u&&(yield u)}jp(t,e){let i=this.At(t),n=i.customElements||(i.customElements={});n[e]=1}Ph(t){let e=this.At(t);if(e){switch(e.type){case tt.DOCUMENT_NODE:case tt.DOCUMENT_FRAGMENT_NODE:this.G.disconnect(this.Bn.get(t)),this.Bn.delete(t)}delete this.Xe[t];for(let{nodeId:i}of s.nodeRelationsEntries(e))this.Ph(i)}}Ih(t,e,i,n){let o;if(e){let c=this.At(e);o=c.nextSibling,c.nextSibling=t}else{let c=this.At(i);o=c.firstChild,c.firstChild=t}if(n&&t&&o!==t){let c=this.At(t);if(c.nextSibling=o,o){let l=this.At(o);l.previousSibling=t}}if(t){let c=this.At(t);c.parent=i,c.previousSibling=e}}Sw(t){var e;let i=this.At(t),n=new Set;for(let o=i==null?void 0:i.firstChild;o;o=(e=this.At(o))===null||e===void 0?void 0:e.nextSibling)n.add(o);return n}Ar(t){return"isConnected"in t?t.isConnected:!t.ownerNode||t.ownerNode.isConnected}_w(t){let e=this.At(t);e&&(e.parent=void 0,e.nextSibling=void 0,e.previousSibling=void 0)}Ir(t){var e,i;let n;for(;t.hasTimeLeft&&(n=this.Rh.shift());){if(this.processedMutationsCount++,!this.ms(n.target)||!this.Ar(n.target))continue;let o=Y(n.target);switch(n.type){case"attachShadow":{this.xa(n.shadowRoot),this.At(o).shadowRoot=Y(n.shadowRoot);break}case"childList":{let c,l=this.Sw(o);for(let u=csNodefirstChild.apply(n.target);u;u=csNodenextSibling.apply(u)){this.ms(u)||this.xa(u);let d=Y(u);l.delete(d),this.Ih(d,c,o),c=d}this.Ih(void 0,c,o);for(let u of l)this._w(u),this.Ph(u);let h=this.At(o);if(h.type===tt.ELEMENT_NODE&&h.localName==="style"){let u=n.target.sheet;u&&this.Pr(u)}break}case"characterData":{let c=this.At(o);if(c.type===tt.TEXT_NODE&&(c.data=n.target.data,((e=n.target.parentElement)===null||e===void 0?void 0:e.localName)==="style")){c.data="";let l=(i=n.target.parentElement)===null||i===void 0?void 0:i.sheet;l&&this.Pr(l)}break}case"attributes":{let c=s.stringifyAttrKey(n.attributeNamespace,n.attributeName),l=n.target,h=this.At(o),u=l.getAttributeNS(n.attributeNamespace,n.attributeName);h.attributes=h.attributes||{},u===null?delete h.attributes[c]:h.attributes[c]=u;break}case"state":{let c=this.At(o);c.type===tt.DOCUMENT_NODE?Object.assign(c,this.Np(n.target)):c.state=this.Mp(n.target);break}case"setAdoptedStyleSheets":{this.Lp(n.target);break}case"styleSheetUpdated":{this.Pr(n.target);break}case"styleSheetDisabledChanged":{let c=this.At(o);c.disabled=n.target.disabled;break}case"loaded":{switch(n.target.localName){case"link":{let c=n.target;c.rel==="stylesheet"&&c.sheet&&this.Pr(c.sheet);break}case"iframe":{let c=n.target,l=this.At(o),h=c.contentDocument,u=h&&Y(h);l.contentDocument&&l.contentDocument!==u&&(this.Ph(l.contentDocument),delete l.contentDocument),this.Vp(c)&&this.xa(h);break}}break}case"activeElementChanged":{let c=this.At(o),l=n.target.activeElement||void 0;c.activeId=l&&Y(l);break}case"pointerOverElement":{let c=this.At(o),l=n.element||void 0;c.hoveredId=l&&Y(l);break}case"customElementRegistration":{this.jp(o,n.name);break}case"metadataChanged":{let c=this.At(o);c&&(c.metadata=cs(hs.getAll(n.target)));break}}}}}return s.trackIframeContent=!1,s.cloneDeep=cs,s})(),Nh=(()=>{class s extends Bi{constructor(t){super(),this.tt=t}isListening(t){return t.type==="DOM_INITIAL_STATE"||ks.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){if(ks.isDOMEvent(t))t.initialDOM.baseURI=this.tt.anonymizeUrl(t.initialDOM.baseURI);else for(let e of go.findNodes(t.state,i=>i.type===tt.DOCUMENT_NODE))e&&e.type===tt.DOCUMENT_NODE&&(e.baseURI=this.tt.anonymizeUrl(e.baseURI));return t}}return He([Ht("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),sE="textarea",Mh=(()=>{class s extends Bi{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||ks.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.Aw(t),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Tw(t);break;case"characterDataChanged":this.bw(t);break}return t}Aw(t){let e=t.type==="DOM_PATCH"?t.diff:t.state,i=t.state;for(let n in e){let o=e[n],c=i[n];if(!c.parent||!("data"in o)||c.type!==3)continue;let l=i[c.parent];this.Hp(o,c.metadata,l.localName)}}Tw(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)et.traverse(i,(n,o)=>{var c;let l=(c=o==null?void 0:o.localName)!==null&&c!==void 0?c:t.targetLocalName,h=n.props;n.nodeType===3&&this.Hp(n,h,l)})}Hp(t,e,i){this.Bp(i,e)&&(t.data=this.Fp(t.data))}bw(t){this.Bp(t.parentLocalName,t.targetProps)&&(t.newValue=this.Fp(t.newValue))}Fp(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}Bp(t,e){return t===sE||(e==null?void 0:e[ke.EDITABLE_NODE_PROP])===!0}}return He([Ht("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Dh=(()=>{class s extends be{async onStart(){this.Or&&this.Or.disconnect(),this.Or=new go().observe(document);let t=await this.Or.getStateAsync();this.produceEvent({type:"DOM_INITIAL_STATE",state:go.cloneDeep(t)}),this.$n=this.Or.onChange((e,i)=>{this.produceEvent({type:"DOM_PATCH",diff:e,state:i})})}onStop(){var t;(t=this.$n)===null||t===void 0||t.call(this)}destroy(){var t;(t=this.Or)===null||t===void 0||t.disconnect(),this.Or=void 0}}return s})(),kh=!0,Sr=csSymbol("safe"),Ac=csSymbol("task");function xt(s,r=kh){var t;(t=s[Sr])!==null&&t!==void 0||(s[Sr]=function(e){let i=arguments;Ls(()=>(e[Ac]=Ft,s.listener.apply(s.boundElement,i)),[we.EventListener,s.type],e[Ac])}),s.boundElement.addEventListener(s.type,s[Sr],r)}function Lt(s,r=kh){s.boundElement.removeEventListener(s.type,s[Sr],r)}var iE=(()=>{class s{constructor(t){this.R=t,this.te={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.R=t}observe(){xt(this.te),this.Oh()}Oh(){this.resizeListener()}disconnect(){Lt(this.te)}resizeListener(){let t={width:At.windowWidth(),height:At.windowHeight()};this.R(t)}}return ft([U("resize")],s.prototype,"resizeListener",null),s})(),os=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),dr=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),fr=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),rE=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=nt.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in nt;function e(){return os.LANDSCAPE}function i(){var c;switch((c=nt.screen.orientation)===null||c===void 0?void 0:c.type){case dr.PORTRAIT_PRIMARY:case dr.PORTRAIT_SECONDARY:return os.PORTRAIT;case dr.LANDSCAPE_PRIMARY:case dr.LANDSCAPE_SECONDARY:return os.LANDSCAPE;default:return os.PORTRAIT}}function n(){switch(window.orientation){case fr.PORTRAIT:case fr.PORTRAIT_REVERSE:return os.PORTRAIT;case fr.LANDSCAPE:case fr.LANDSCAPE_REVERSE:return os.LANDSCAPE;default:return os.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),nE=(()=>{class s extends be{constructor(){super(...arguments),this.Nh=null,this.Mh=null,this.ci=new iE(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=rE.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.Rw(t);if(e!==this.Nh||i!==this.Mh){this.Nh=e,this.Mh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}Rw(t){let e,i,n=At.screenWidth(),o=At.screenHeight();return t===os.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.ci.observe()}onStop(){this.Nh=null,this.Mh=null,this.ci.disconnect()}}return s})();function oE(s){let r=csEventtarget.apply(s);return r&&dt(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var ri=(()=>{class s{get selectors(){return this.Ke===""?null:this.Ke}constructor(t,e={closest:!1}){this.R=t,this.Ot=e,this.Ke="",this.zn=new Kr,this.Ir=Us(i=>{if(this.Ke==="")return;let n=[];for(let o of cl(i,c=>c.addedNodes)){if(!(hp(o)||this.Ot.closest&&Tr(o)))continue;let c=this.Ot.closest?this.Cw(o,this.Ke):this.findMatchingElements(o,this.Ke);Ba(c,n)}n.length&&this.R(n,"added")},"SelectorObserver.processMutations"),this.Iw=(i,n)=>{if(this.Ke===""||n!=="added")return;let o=this.findMatchingElements(i,this.Ke);o.length&&this.R(o,"added")},this.G=new Be(this.Ir,this.Iw)}observe(t){this.Ke===""?this.G.observe():this.Ke+=",",this.Ke+=t;let e=this.findMatchingElements(document,t);for(let i of this.G.shadowRoots){let n=this.findMatchingElements(i,t);Ba(n,e)}e.length&&(J(e,i=>{this.zn.add(i)}),this.R(e,"initial"))}processPendingMutations(){this.Ir(this.G.takeRecords())}disconnect(){this.G.disconnect(),this.zn.clear(),this.Ke=""}Cw(t,e){let i=[];if(Tr(t)){if(t.parentElement){let n=eo(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.zn.has(n)===!1)}else{if(Ur(t)){let n=eo(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.zn.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Ri(window.csquerySelectorAll[t.nodeType].call(t,e));return dt(t)&&ae.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.zn.has(n)===!1)}}return ft([U()],s.prototype,"observe",null),ft([U()],s.prototype,"disconnect",null),ft([Ht("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),aE=(()=>{class s extends be{constructor(){super(),this.$p=t=>{let e=oE(t);e&&this.Dh(e,t.type)},this.ye=new Fs((t,e)=>{switch(e){case"initial":case"added":this.zp(t);break;case"removed":this.Gp(t);break}}),this.W=new ri((t,e)=>{(e==="initial"||e==="added")&&this.Pw(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&mt.isConnected(t)&&!M.isMaskedElement(t)&&!M.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.zp(document),this.ye.observe(),this.W.observe("video")}onStop(){this.Gp(document),this.ye.disconnect(),this.W.disconnect()}Dh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=Y(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),Lo(()=>this.produceEvent(o))}}Pw(t){for(let e of t)this.Dh(e,"seeked"),s.isPlaying(e)&&this.Dh(e,"play")}zp(t){for(let e of["play","pause","seeked"])xt({type:e,listener:this.$p,boundElement:t})}Gp(t){for(let e of["play","pause","seeked"])Lt({type:e,listener:this.$p,boundElement:t})}}return s})();function cE(s){return s.nodeName==="SELECT"}function oa(s){return s.nodeName==="INPUT"}function lE(s){return s.nodeName==="TEXTAREA"||oa(s)&&!xh(s)&&!Lh(s)}function xh(s){return oa(s)&&s.type==="number"}function Lh(s){return oa(s)&&(s.type==="checkbox"||s.type==="radio")}var Vh=(()=>{class s extends be{constructor(t,e=[]){super(),this.ut=t,this.Ow=e,this.kh=new ly("low"),this.Nr=i=>this.inputHandler(i),this.li=[],this.xh=new Map,this.Nw(),this.Mw(),this.W=new ri(i=>{for(let n of i){if(n instanceof HTMLInputElement)for(let o of this.Ow)this.Dw(n,o);this.Lh(n)&&Qt(()=>{this.Vh(n,Y(n))},"low")}}),this.ye=new Fs((i,n)=>{switch(n){case"initial":case"added":xt({type:"change",listener:this.Nr,boundElement:i});break;case"removed":Lt({type:"change",boundElement:i,listener:this.Nr});break}})}Dw(t,e){let i=this.xh.get(e);if(!i)i=new WeakSet,this.xh.set(e,i);else if(i.has(t))return;i.add(t);let n=ay(t,e,(o,c,l)=>{l!==c&&mt.isConnected(o)&&this.qp(o)});n&&(this.isStarted&&n.activate(),csArray.prototype.push.call(this.li,n))}onStart(){xt({type:"keyup",boundElement:document,listener:this.Nr}),xt({type:"change",boundElement:document,listener:this.Nr}),J(this.li,t=>t.activate()),this.W.observe(csArray.prototype.join.call(s.kw,",")),this.ye.observe()}onStop(){Lt({type:"keyup",boundElement:document,listener:this.Nr}),Lt({type:"change",boundElement:document,listener:this.Nr}),J(this.li,t=>t.deactivate()),this.W.disconnect(),this.ye.disconnect(),this.kh.clear(),this.xh.clear()}Vh(t,e){var i,n,o;if(this.kh.has(t))return;if(this.kh.add(t),cE(t)){let h={type:"InputEvent",inputType:"select",target:Y(t),selectedIndex:t.selectedIndex,timestamp:k.now()};this.produceEvent(h);return}if(Lh(t)){let h={type:"InputEvent",inputType:"checkable",target:Y(t),checked:t.checked,timestamp:k.now()};this.produceEvent(h);return}let c=lE(t),l=xh(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ut)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ut)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:k.now()});return}let u=l?"0":"\u2022",d={type:"InputEvent",inputType:"text",target:Y(t),value:csString.prototype.replace.call(h,/\S/g,u),timestamp:k.now()};this.produceEvent(d)}}inputHandler(t){if(!this.isStarted)return;let e=bt(t),i=Y(e);!i||!this.Lh(e)||mt.isConnected(e)&&Qt(()=>{this.Vh(e,i)},"low")}Nw(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}Mw(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=Oi(t.prototype,e,(o,c,l)=>{if(l!==c&&mt.isConnected(o)){let h=i?o.parentElement:o;this.qp(h)}});n&&csArray.prototype.push.call(this.li,n)}Lh(t){return!M.isMaskedElement(t)&&!M.isMaskedElementChild(t)&&(Br(t)||Ho(t)||jo(t))}qp(t){if(this.isStarted&&mt.isConnected(t)){let e=Y(t);e&&this.Lh(t)&&Qt(()=>{this.Vh(t,e)},"low")}}}return s.kw=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],He([Mt()],s.prototype,"inputHandler",null),He([U()],s.prototype,"trackChanges",null),s})();var hE=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.hi=[],this.lt=[],this.xw=t}next(t){this.lt.length===this.xw&&csArray.prototype.shift.call(this.lt),csArray.prototype.push.call(this.lt,t),this.lt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.hi)e(t)}subscribe(t){if(Li(this.hi,i=>t===i))return()=>{this.hi=csArray.prototype.filter.call(this.hi,i=>i!==t)};csArray.prototype.push.call(this.hi,t);for(let i of this.lt)t(i);return()=>{this.hi=csArray.prototype.filter.call(this.hi,i=>i!==t)}}clear(){this.lt=[]}hasObservers(){return this.hi.length>0}}return s})(),Uh=(()=>{var s;class r{constructor(e){this.R=e}observe(){this.Lw=s.Gn.subscribe(e=>this.R(e)),s.La||(s.La=!0,s.Vn.observe(),Zt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Ds.add(i),s.Gn.next(i)}))}disconnect(){s.La&&(this.Lw(),s.Gn.hasObservers()||(s.La=!1,s.Vn.disconnect(),s.Gn.clear(),s.Ds.clear()))}}return s=r,r.Ds=new Kr,r.Gn=new hE,r.Vw=Us(t=>{Qt(()=>{for(let e of t)e.type==="childList"&&J(e.addedNodes,i=>{Zt(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Ds.has(o)||(s.Ds.add(o),s.Gn.next(o))})})})},"ElementObserver.findAllElements"),r.La=!1,r.Vn=new Be(s.Vw),ft([U()],r.prototype,"observe",null),ft([U()],r.prototype,"disconnect",null),r})(),jh=(()=>{class s extends be{constructor(){super(),this.ks=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.Uw=Os("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)M.isMaskedElement(i)||M.isMaskedElementChild(i)||dp(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=Qr(this.Uw);this.qn=new Uh(e=>t.push(e)),this.ai=new Set}onStart(){this.ks&&this.qn.observe()}onStop(){this.ai.clear(),this.qn.disconnect()}async register(t){this.ai.has(t)||(this.ai.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return He([U()],s.prototype,"register",null),s})(),Tc=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Wp(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.jw(t))}static jw(t){let i=t.getEntriesByType("navigation")[0];i&&(this.ji=i,s.Mr(i))}static Nn(t){this.Hw(t),this.ji&&t(this.ji),this.$e||this.Bw()}static Hw(t){this.Lt.add(t)}static Fw(t){this.Lt.delete(t)}static Bw(){if(this.Wn||(this.Wn=this.Wp()),!this.Wn){this.ji||(this.ji={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Mr(this.ji);return}this.Wn.observe({type:"navigation",buffered:!0}),this.$e=!0}static Mr(t){this.Lt.forEach(e=>e(t))}static Dn(t){this.Fw(t),this.Lt.size===0&&this.Yn()}static Yn(){var t;this.$e&&((t=this.Wn)===null||t===void 0||t.disconnect(),this.$e=!1,this.ji=null,this.Wn=this.Wp())}constructor(t){this.R=t}observe(){s.Nn(this.R)}disconnect(){s.Dn(this.R)}}return s.$e=!1,s.Lt=new Set,s.ji=null,s})(),Hh=(()=>{class s extends be{constructor(){super(...arguments),this.Va=null,this.Yp=new Tc(t=>{if(this.Va)return;let e=this.$w(t);e&&(this.Va=e,this.produceEvent(e))})}onStart(){if(this.Va){this.produceEvent(this.Va);return}this.Yp.observe()}onStop(){this.Yp.disconnect()}$w(t){let e=Tc.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:k.now()}}}return s})(),Rt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),pr=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),uE=(()=>{class s{compute(t,e){let i=this.fi(e.x)-this.fi(t.x),n=this.fi(e.y)-this.fi(t.y),o=e.time-t.time;return{duration:o,distance:this.Xp(i,n),direction:this.zw(i,n),velocity:this.Gw(i,n,o)}}computePinchMetrics(t,e){let i=this.fi(e.x)-this.fi(t.x),n=this.fi(e.y)-this.fi(t.y);return{duration:e.time-t.time,distance:this.Xp(i,n)}}getScale(t,e){return Math.abs(e/t-1)}fi(t){return t/window.devicePixelRatio}Xp(t,e){return Math.round(Math.sqrt(t*t+e*e))}Gw(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}zw(t,e){return Math.abs(t)>Math.abs(e)?t>0?pr.RIGHT:pr.LEFT:e>0?pr.DOWN:pr.UP}}return s})(),Bh=typeof performance!="undefined"&&!!performance.now,bc=Bh?()=>performance.now():()=>csDate.now(),dE=(()=>{var s;return Bh?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),gr={now(){return Math.round(bc()+dE)},elapsed(){return bc()}};function Rc(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var fE=1e3,pE=100,gE=.1,mo=(()=>{class s{constructor(){this.ee={},this.Uh=()=>{},this.Ua=new uE,this.Ne()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Uh=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.qw(t))return;this.Ww(t)&&this.Ne();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:gr.now()};if(t.touches.length===1)this.ee.startPinchTime=e.time,this.ee.firstTouch=e;else if(t.touches.length===2&&(this.ee.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:gr.now()},this.ee.firstTouch&&this.ee.secondTouch)){let i=this.Ua.computePinchMetrics(this.ee.firstTouch,this.ee.secondTouch);this.Dr=i.distance}csArray.prototype.push.call(this.Xn,e),this.ja=bt(t)}processActionMove(){this.jh=!0}processActionUp(t){if(this.Yw(t)){if(csArray.prototype.push.call(this.Xn,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:gr.now()}),this.Xw(t)&&this.ee.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.ee.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:gr.now()};this.ee.firstTouch&&(this.ee.firstTouch=e,this.ee.secondTouch=i),this.Jw(t)}this.Dr||this.Kw()&&this.Qw(t)}}Ne(){this.Xn=[],this.ja=null,this.jh=!1,this.Dr=null,this.Jn=!0}Qw(t){let e=this.Ua.compute(this.Xn[0],this.Xn[1]);this.Jn=t.isTrusted;let i=this.jh?this.Zw(e):this.tA(e);if(this.eA(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=Rc(n.pageX,1),i.pageY=Rc(n.pageY,1)}this.Uh(i,t)}Jw(t){if(!(this.ee.firstTouch&&this.ee.secondTouch))return;let e=this.Ua.computePinchMetrics(this.ee.firstTouch,this.ee.secondTouch);this.Jn=t.isTrusted;let i=this.sA(e);i&&this.Uh(i,t)}sA(t){return!this.Dr||this.Ua.getScale(this.Dr,t.distance)<gE?void 0:{type:this.Dr>t.distance?Rt.PINCH_IN:Rt.PINCH_OUT,target:this.ja,distance:t.distance,isTrusted:this.Jn}}Zw(t){return{type:t.velocity<pE?Rt.DRAG:Rt.FLICK,target:this.ja,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Jn}}tA(t){return{type:t.duration<fE?Rt.TAP:Rt.LONG_PRESS,target:this.ja,isTrusted:this.Jn}}eA(t,e){return t===Rt.TAP&&e&&e.length===1}Ww(t){return t.touches.length===1}Kw(){return this.Xn.length===2}qw(t){return t.touches.length>0}Yw(t){return t.changedTouches.length>0}Xw(t){return this.jh&&!!this.Dr&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),mE="touchstart",yE="touchmove",EE="touchend",vE=(()=>{class s{constructor(t){this.R=t}observe(){s.Jp&&s.Hh(this.R)}disconnect(){s.Jp&&s.$n(this.R)}static iA(t,e){csArray.prototype.forEach.call(Ns(s.Lt),i=>i(t,e))}static Hh(t){s.Lt.has(t)||(s.Lt.add(t),s.Lt.size===1&&(s.Kn.onGesture(s.iA),csArray.prototype.forEach.call(s.pi,e=>xt(e))))}static $n(t){s.Lt.delete(t),s.Lt.size===0&&csArray.prototype.forEach.call(s.pi,e=>Lt(e))}static Bh(t){if(s.Kn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Kn.processActionDown(t);break;case"touchmove":s.Kn.processActionMove();break;case"touchend":s.Kn.processActionUp(t);break}}}return s.pi=[{boundElement:nt.document,type:mE,listener:r=>s.Bh(r)},{boundElement:nt.document,type:yE,listener:r=>s.Bh(r)},{boundElement:nt.document,type:EE,listener:r=>s.Bh(r)}],s.Jp=mo.isGestureDetectionSupported(),s.Lt=new Set,s.Kn=new mo,s})(),Fh=(()=>{class s extends be{constructor(){super(),this.Qn=new vE(this.Fh.bind(this))}onStart(){this.Qn.observe()}onStop(){this.Qn.disconnect()}Fh(t){let e=this.rA(t);e&&this.produceEvent(e)}rA(t){return this.nA(t)?{type:"Gesture",targetId:Y(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}nA(t){return t.target!==null&&!(dt(t.target)&&M.isMaskedElementChild(t.target))}}return s})();var Js=[],yo=!1,$h=Us(_E,"executeTasks");function SE(s){if(csArray.prototype.push.call(Js,s),!yo){for(let r=0;r<3;r++)csSetTimeout($h);yo=!0}}function _E(){let s=csDate.now();for(let r=0;r<Js.length;r++)if(Js[r](),csDate.now()-s>=35){Js=csArray.prototype.slice.call(Js,r+1),csSetTimeout($h);return}Js=[],yo=!1}var is=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),zh=(()=>{class s{constructor(){this.wt=new xi,this.xt=is.Stopped,this.R=null,this.Zp=t=>{this.xt===is.Stopped||!t||(this.R(t),this.tg())}}get queueLength(){return this.wt.length}start(t){if(this.R)throw new Error("callback already set");this.xt=is.Started,this.R=t}push(t){this.wt.push(t),this.dA()}stop(){this.R=null,this.xt=is.Stopped,this.wt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),J(i,h=>h.subscribe(u=>l.push(u))),i=[c]}let o=new wE(n);return J(i,c=>c.subscribe(l=>o.push(l))),o}eg(){return this.xt===is.Stopped}ys(){return this.xt===is.Processing}tg(){if(!this.eg()){if(this.wt.isEmpty){this.xt=is.Completed;return}this.xt=is.Processing,SE(()=>{let t=this.wt.pop();t instanceof ia?t.complete(this.Zp):this.Zp(t)})}}dA(){this.eg()||this.ys()||this.tg()}}return s})(),wE=(()=>{class s extends zh{constructor(t){super(),this.sg=t}get queueLength(){return csArray.prototype.reduce.call(this.sg,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),J(this.sg,t=>t.stop())}}return s})(),Gh=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.Y=!1,this.Lt=[]}get pendingEvents(){var t,e;return(e=(t=this.wt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.Y)throw new Error("Recording is already started.");let t=this.Lt;this.wt=zh.pipe(this.producers,this.processors),this.wt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),J(this.producers,e=>e.start()),J(this.processors,e=>e.start()),this.Y=!0}stop(){this.wt.stop(),this.Lt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.Y=!1,this.Lt=[]}subscribe(t){if(this.Y)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Lt,t),()=>this.Lt=csArray.prototype.filter.call(this.Lt,e=>e!==t)}}return s})(),AE=2,aa=(()=>{class s{constructor(t){this.fA=t,this.Ha=0}addString(t){this.Ha+=t.length*AE}addArrayBuffer(t){this.Ha+=t.byteLength}isThresholdReached(){return this.Ha>this.fA}reset(){this.Ha=0}}return s})(),TE=(()=>{class s{constructor(t){this.Ba={},this.Me=new aa(t)}save({key:t,metadata:e,events:i}){this.Me.isThresholdReached()||(this.Me.addString(t),typeof i=="string"?this.Me.addString(i):this.Me.addArrayBuffer(i),!this.Me.isThresholdReached()&&(this.Ba[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.pA(),i=>{let n=this.Ba[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.gA(i))}),e.length!==0&&(t(e),this.Me.reset())}pA(){return Object.keys(this.Ba)}gA(t){delete this.Ba[t]}}return s})(),rs=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),bE=(()=>{class s{constructor(t,e,i){this.kr=t,this.mA=i,this.Hi=rs.NOT_STARTED,this.Fa=[],this.Yh=0,this.yA=self.origin,this.De=typeof window=="object"?"":"worker-",this.Me=new aa(e),this.uh()}async uh(){await this.ig(),this.Hi===rs.READY?this.EA():this.mA(this.Fa)}EA(){csArray.prototype.forEach.call(this.Fa,t=>{this.save(t)}),this.Fa=[]}async save(t){try{if(this.Hi===rs.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Fa,t);return}if(this.Hi!==rs.READY||this.Me.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Me.addString(e),typeof n=="string"?this.Me.addString(n):this.Me.addArrayBuffer(n),this.Me.isThresholdReached())return;await this.ae.put(`${this.yA}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ae&&(await this.ig(),this.Hi!==rs.READY)||this.vA(t)}async ig(){try{this.Hi=rs.OPEN_IN_PROGRESS,this.ae=await self.caches.open(`${this.De}${this.kr}`),this.Hi=rs.READY}catch{this.Hi=rs.OPEN_FAILED}}async vA(t){try{if(this.Yh++,this.Yh>1)return;let e=await this.ae.keys();if(e.length===0)return;let i=await this.ae.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((u,d)=>{l[d]=u}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(u=>({metadata:l,events:u})):c.arrayBuffer().then(u=>({metadata:l,events:u}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ae.delete(c))),t(o),this.Me.reset()}catch{}finally{this.Yh--}}}return s})(),RE=(()=>{class s{constructor(t){try{this.SA(t)}catch{this.Xh()}}SA(t){self.caches?this._A(t):this.Xh()}save(t){this.$a.save(t)}recover(t){this.$a.recover(t)}_A(t){this.$a=new bE(t,s.rg,e=>{this.Xh(e)})}Xh(t){this.$a=new TE(s.rg),t&&csArray.prototype.forEach.call(t,e=>{this.$a.save(e)})}}return s.rg=1024*1024*16,s})(),qh=(()=>{class s{constructor(t){this.ng=[],this.og=[],this.Qe={},this.Bi=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Qe[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Qe[e]}):this.Qe={}}onBeaconSuccess(t){csArray.prototype.push.call(this.ng,t)}onBeaconFailure(t){csArray.prototype.push.call(this.og,t)}send(t){let e=Ci.toQuery({...this.Qe,ct:Hi.UNCOMPRESSED}),i=this.wA(e,t);return i?csArray.prototype.forEach.call(this.ng,n=>n()):csArray.prototype.forEach.call(this.og,n=>n(this.Qe)),i}wA(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Bi}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Bi}?${t}`,e||"")}}return s})(),CE=(()=>{class s{constructor(t,e){this.w=t,this.C=e,this.Zn=Yt.ETR_DISABLED,this.za=Yt.ETR_PENDING,this.Jh=!0}getEtrStatus(t){t===void 0&&(t=this.C.getSession());let e=t==null?void 0:t.etrStatus;return this.ag()&&e===Yt.ETR_SAVED_SESSION?e:this.Zn}onEventTriggerRecording(t,e){switch(e){case us.ETR_PAGE:this.cg(Yt.ETR_SAVED_PAGE);break;case us.ETR_LEGACY:case us.ETR_SESSION:this.cg(Yt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===D.RECORDING_TEMPORARILY?this.Jh=!0:this.Jh=!1,t===D.ANALYTICS_ONLY&&e===Kt.ETR_ON?this.lg(this.za):this.lg(Yt.ETR_DISABLED)}lg(t){this.Zn=t,this.za=Yt.ETR_PENDING,this.hg(t),this.w.emitRecordingContextChange()}cg(t){this.Jh?Number(t)>Number(this.za)&&(this.za=t):this.ag()&&Number(t)>Number(this.Zn)&&(this.Zn=t,this.hg(t),this.w.emitRecordingContextChange())}hg(t){let e=this.C.getSession();e!==null&&e.etrStatus===Yt.ETR_NOT_SAVED_SESSION&&t===Yt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.C.setSession(e))}ag(){return this.Zn!==Yt.ETR_DISABLED}}return s})(),Wh=(()=>{class s{constructor(t=100){this.AA=t,this.Ga={},this.to=null,this.vh="original-resource-name"}onEvent(t){this.TA=t}processEvent(t){this.bA(t.resourceId,t.resource.hash,t.originalResourceName),this.RA(t)}flushEvents(){this.to&&csClearTimeout(this.to),this.ug()}onSendStaticResource(t){this.RA=t}ug(){if(!Object.keys(this.Ga).length)return;let t={type:x.RESOURCE_HASHES,date:k.now(),args:[this.Ga]};this.to=null,this.Ga={},this.TA(t)}bA(t,e,i){let n=e;i&&(n+=`?${this.vh}=${i}`),this.Ga[t]=n,!this.to&&(this.to=window.csSetTimeout(()=>this.ug(),this.AA))}}return s})();function IE(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:x.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:x.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:x.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:x.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:x.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:x.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=st(o)?[i,n,o]:[i,n];r({type:x.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:x.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:x.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:x.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:x.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:x.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:x.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=st(o)?[i,n,o]:[i,n];r({type:x.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:x.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:x.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:x.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:L.error("translateDOMEvent: DOMEvent not supported");break}}function PE(s){let r=OE(s.data);return{type:x.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function OE(s){let r={type:NE(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function NE(s){switch(s){case Rt.DRAG:case Rt.FLICK:return pi.SWIPE;case Rt.LONG_PRESS:return pi.LONG_PRESS;case Rt.TAP:return pi.TAP;case Rt.PINCH_IN:return pi.PINCH_IN;case Rt.PINCH_OUT:return pi.PINCH_OUT}}function ME(s){switch(s.inputType){case"text":return{type:x.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:x.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:x.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Nn=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function DE(s){return{type:x.PERFORMANCE_TIMINGS,args:[{performanceTiming:Nn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Nn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Nn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}var kE=500,Mn=0;function xE(){return{processEvent(s,r){if(s.originalEvent.type===x.PERFORMANCE_RESOURCE_TIMING)return Mn>=kE?null:(Mn+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){Mn=0}}}function Cc(s){let r=s.type==="DOM_INITIAL_STATE"?s.state:s.diff;for(let t in r){let e=r[t];e&&(delete e.parent,delete e.previousSibling,delete e.metadata)}return s}function LE(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var VE=20;function UE(s){return LE(r=>{let t={visibleInViewPort:r},e={type:x.TEXT_VISIBILITY,date:k.now(),args:[t]};s(e)},{batchSize:VE,autoFlushDelay:1e3})}function jE(s){switch(s.videoEventType){case"play":return{type:x.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:x.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:x.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var Yh=(()=>{class s{get pendingEvents(){return this.qa.pendingEvents}constructor(t,e,i,n,o){this.qa=t,this.w=e,this.ke=i,this.xs=n,this.Ls=o,this.se=()=>{},this.eo=()=>{},this.dg=UE(c=>this.se(c))}start(){var t,e;this.fg=xE(),this.qa.subscribe(i=>{var n,o,c,l,h,u,d;let g=i,{timestamp:m}=g;switch(g.type){case"Legacy":{let v=g.eventType==="user"?(n=this.eo)!==null&&n!==void 0?n:()=>{}:this.se;this.fg.processEvent(g,v)}break;case"CustomElementRegistration":{this.se({type:x.CUSTOM_ELEMENT_REGISTRATION,date:m,args:[g.tagName]});break}case"DomEvent":{IE(g,this.se,this.w);break}case"InputEvent":{let v=ME(g);(o=this.eo)===null||o===void 0||o.call(this,v);break}case"inputEncryptedText":{let{target:v,value:b,encryptedData:C,encryptionMetadata:A}=g;(c=this.eo)===null||c===void 0||c.call(this,{type:x.INPUT_ENCRYPTED_TEXT,date:m,args:[v,b,C,A]});break}case"encryptedCharacterDataChanged":{let{target:v,rawData:b,encryptedData:C,encryptionMetadata:A}=g;this.se({type:x.MUTATION_ENCRYPTED_CHARACTER_DATA,date:m,args:[v,b,C,A]});break}case"StaticResource":{let{url:v}=g;this.se({type:x.STATIC_RESOURCE_URL,date:m,args:[v]});break}case"ResizeMaskedElement":{let{target:v,width:b,height:C}=g;this.se({type:x.MUTATION_ATTRIBUTE,date:m,args:[v,"","style",`width:${b}px !important;height:${C}px !important;`]});break}case"Gesture":{let v=PE(i);(l=this.eo)===null||l===void 0||l.call(this,v);break}case"TextVisibility":{this.dg.push(g.text);break}case"StaticResourceManagerEvent":{(h=this.ke)===null||h===void 0||h.processEvent(g);break}case"screenResize":{let{width:v,height:b}=g,C={type:x.SCREEN_RESIZE,date:m,args:[v,b]};this.se(C);break}case"viewportResize":{let{width:v,height:b}=g,C={type:x.RESIZE,date:m,args:[v,b]};this.se(C);break}case"PerformanceTiming":{this.se(DE(g));break}case"CustomError":{let v=(u=this.Ls)===null||u===void 0?void 0:u.translate(g);v&&this.se(v);break}case"JSError":{let v=(d=this.xs)===null||d===void 0?void 0:d.translate(g);v&&this.se(v);break}case"VideoEvent":{let v=jE(g);v&&this.se(v);break}case"DOM_INITIAL_STATE":{let v=Cc(g),b={type:x.DOM_INITIAL_STATE,date:m,args:[v.state]};this.w.emitInitialDomDone(b);break}case"DOM_PATCH":{let v=Cc(g),b={type:x.DOM_PATCH_STATE,date:m,args:[v.diff]};this.se(b);break}case"warning":{L.warn(g.message);break}default:L.error(`WebRecorderEventTranslator: Event not supported (${g.type})`);break}}),this.w.emitInitialDomStart(),(t=this.xs)===null||t===void 0||t.start(),(e=this.Ls)===null||e===void 0||e.start(),this.qa.start()}stop(){var t,e,i;this.reset(),this.flush(),this.qa.stop(),(t=this.ke)===null||t===void 0||t.flushEvents(),(e=this.xs)===null||e===void 0||e.stop(),(i=this.Ls)===null||i===void 0||i.stop()}flush(){this.dg.flush()}onEvent(t,e){var i;this.se=t,this.eo=e,(i=this.ke)===null||i===void 0||i.onEvent(n=>this.se(n))}reset(){this.fg.reset()}}return s})();var Xh=(()=>{class s extends be{constructor(t){super(),this.ze=t}subscribe(t){return super.subscribe(t)}onStart(){J(this.ze,t=>{t.onEvent(e=>{var i;return this.xr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),J(this.ze,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){J(this.ze,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}xr(t,e){this.produceEvent({timestamp:k.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),ca=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.IA}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.PA();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static PA(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.IA="cs.tracking.",s})(),ie=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Jh=(()=>{class s{constructor(){this.B=!1,this.mi=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.ce(ie.Hidden):this.ce(ie.Visible);case"pagehide":return document.visibilityState==="hidden"?this.ce(ie.PagehideHidden):this.ce(ie.PagehideVisible);case"blur":return this.ce(ie.Blur);case"navigate":return this.OA(t)?this.ce(ie.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.B||(this.B=!0,this.Kh(),this.NA(),this.MA(),ja()&&this.DA())}stop(){this.B&&(this.B=!1,this.Qh(),this.kA(),this.xA(),ja()&&this.LA())}onEvent(t){this.ce=t}DA(){window.navigation.addEventListener("navigate",this.mi)}LA(){window.navigation.removeEventListener("navigate",this.mi)}Kh(){document.addEventListener("visibilitychange",this.mi)}Qh(){document.removeEventListener("visibilitychange",this.mi)}NA(){window.addEventListener("pagehide",this.mi)}kA(){window.removeEventListener("pagehide",this.mi)}MA(){window.addEventListener("blur",this.mi)}xA(){window.removeEventListener("blur",this.mi)}OA(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})(),kt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),HE=(()=>{class s{constructor(t,e,i=[]){this.xr=t,this.Zh=e,this.VA=i,this.Wa=null,this.xt=kt.Active,this.lt=[]}reset(){this.Wa=null,this.lt=[],this.xt=kt.Active}disconnect(){this.xt=kt.Stopped}UA(){this.Zh(kt.Paused),this.xt=kt.Paused,csSetTimeout(()=>{this.xt===kt.Paused&&this.tu()},s.STOP_TIMEOUT)}jA(){this.Zh(kt.Active),this.xt=kt.Active,J(this.lt,this.xr),this.lt=[]}tu(){this.lt=[],this.Zh(kt.Stopped),this.xt=kt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Wa=t.date,this.xt!==kt.Active)){this.jA(),this.xr(t);return}if(this.HA(t)){this.xr(t);return}switch(this.xt){case kt.Active:if(this.BA(t,e)){this.UA(),csArray.prototype.push.call(this.lt,t);return}this.xr(t);break;case kt.Paused:csArray.prototype.push.call(this.lt,t);break;case kt.Stopped:break}}BA(t,e){return!e.isUserEvent&&this.Wa!==null&&t.date-this.Wa>s.INACTIVITY_TIMEOUT}HA(t){return csArray.prototype.indexOf.call(this.VA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),BE=2e3,FE=(()=>{class s extends _t{constructor(t,e,i,n,o,c,l,h,u,d,g,m,v,b=[],C,A,S,N,I){super(),this.E=t,this.z=e,this.FA=i,this.V=n,this.C=o,this.Ze=c,this.St=l,this.He=h,this.ut=u,this.X=d,this.Vt=g,this.Nt=m,this.Ge=v,this.ze=b,this.pg=C,this.ie=A,this.so=S,this.xs=N,this.Ls=I,this.ii=0,this.yi=new ca,this.Lr={allowFromQuotaService:!0,allowFromSerialization:!0},this.gg=qr(()=>{this.z.eventsCount()>0&&this.mg()},BE),this.Vs=_=>this.processBrowserEvent(_),this.io=_=>this.Ut(_),this.Ya=0,this.ro=0,this.es=new Jh,this.eu=!1,this.yg=50*1024,this.zi=!1,this.no=!1,this.Vi=[],this.Xa=new HE(_=>this.Q(_),_=>{switch(_){case kt.Active:this.$A();break;case kt.Stopped:this.zA();break}},[x.RESOURCE_HASHES,x.TEXT_VISIBILITY,x.API_ERROR,x.JAVASCRIPT_ERROR]),this.Eg=_=>{this.Vt.removeBatchInProgress(`${_.params.sn}.${_.params.pn}.${_.params.ri}`)}}init(){this.su(),this.X.onLoad(this.Eg),this.X.onError(this.Eg)}$A(){csArray.prototype.forEach.call(this.pg,t=>t.start())}zA(){csArray.prototype.forEach.call(this.pg,t=>t.stopForInactivity())}su(){var t,e,i;this.Ge.onEvent(this.Vs,this.io),(t=this.ut)===null||t===void 0||t.onInputNodeToEncrypt(this.io),(e=this.ut)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.vg(n)}),(i=this.ut)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Vs),this.es.onEvent(n=>{if(csSetTimeout(()=>this.Gi("page-state",n)),n!==ie.Visible){if(n===ie.Blur)return this.Sg();if(!this.eu)return this.eu=!0,csSetTimeout(()=>{this.eu=!1}),n===ie.Hidden?this.Sg():this.GA()}})}isRecording(){return this.C.hasValidSession()&&this.isStarted}Sg(){if(!this.canSendEvents())return;this.Ge.flush(),this.Vt.saveBatchesInProgress(),J(this.ze,c=>{var l,h;return J((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],u=>this.z.addEvent(u))});let t=this.z.getEvents();if(t.length===0)return;this.Gi("pending-events",this.Ge.pendingEvents);let e=this.X.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.ro=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.z.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Nt.removeQueryParams(),this.Nt.setQueryParams(e);let o=this.z.stringifyEvents();if(o.length>this.yg){let c=this._g();if(c.length>0){let l=Ms(c);this.Nt.send(l)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.z.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.z.stringifyEvents();this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Nt.send(o)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Nt.removeQueryParams(),this.z.clearEvents()}GA(){if(!this.canSendEvents())return;this.Ge.flush();let t=this.X.getQueryParams();this.Vt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Nt.removeQueryParams(),J(this.ze,n=>{var o,c;return J((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.z.addEvent(l))});let e=this.z.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Nt.setQueryParams(t),this.Nt.send(),this.Nt.removeQueryParams();return}this.Gi("pending-events",this.Ge.pendingEvents),this.ro=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Nt.setQueryParams(t);let i=this.z.stringifyEvents();if(i.length>this.yg){let n=this._g();if(n.length>0){let o=Ms(n);this.Nt.send(o)||this.Vt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Nt.removeQueryParams(),this.Nt.setQueryParams(t),this.Nt.send(),this.Nt.removeQueryParams();if(this.z.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.z.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.z.stringifyEvents();this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Nt.send(i)||(this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.z.getCurrentRequestIndex().increment());this.Nt.removeQueryParams(),this.z.clearEvents()}blockSendingEventsFromQuotaService(){this.Lr.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Lr.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Lr.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Lr.allowFromSerialization=!0}canSendEvents(){return this.Lr.allowFromQuotaService&&this.Lr.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.Ze&&this.xs){(e=this.Ze)===null||e===void 0||e.anonymize(t);let i=this.xs.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:k.now(),type:"JSError"});i&&this.Vs(i)}}onIframeCustomError(t){if(this.Ls){let e=this.Ls.translate({...t,timestamp:k.now(),type:"CustomError"});e&&this.Vs(e)}}onIframeDetailedApiError(t){this.wg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Ut(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.V.isCurrentPageviewValid()&&this.Xa.pushEvent(t,{isUserEvent:!1})}Ut(t){this.V.refreshSession(),this.V.isSessionValid()&&this.Xa.pushEvent(t,{isUserEvent:!0})}Q(t){zt.general.nbEvents.increase(),this.z.addEvent(t),this.z.isThresholdReached()?this.pushEvents():this.z.isFull()&&this.gg(),this.Ag(t)}Ag(t){this.E.emitDebugEvents&&this.yi.emit("recordingEvent",{...t,typeName:x[t.type]})}onStart(){var t;this.Gi("tag-version","15.176.1"),this.Gi("page-state",document.visibilityState),this.Xa.reset(),this.es.start(),this.initStates(),this.Ge.start(),this.St&&this.He&&this.St.subscribe(s.jt,e=>this.wg(e),{detailedEvent:!0}),this.E.emitDebugEvents&&this.yi.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Vi,e=>this.Tg(e)),this.Vi=[],this.zi&&((t=this.ie)===null||t===void 0||t.enableOnlineAssets(),this.zi=!1)}onStop(){var t;this.es.stop(),this.St&&this.St.unsubscribe(s.jt),this.Ge.stop(),this.Xa.disconnect(),(t=this.ie)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Ge.flush(),this.gg.cancel(),this.pushEvents(),this.X.removeQueryParams()}initStates(){this.Ya=k.now(),this.z.getCurrentRequestIndex().reset(),this.ii=0,this.X.setQueryParams(this.FA.getRequestParameters())}pushEvents(){J(this.ze,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.z.eventsCount()>0&&(this.isStarted?this.mg():this.z.clearEvents())}mg(){if(!this.canSendEvents())return;let t=this.z.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.ro=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.Ya>this.ro?i[0].date:this.Ya;this.X.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.X.getQueryParams();this.Vt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.X.getQueryParams()},i),this.X.send(i),n.increment(),e.batch.clearEvents(),this.bg&&this.bg()}this.z.clearEmptyBatchSlots()}addInitialDom(t){this.z.addEventByTimestamp(t),this.Ag(t)}wg(t){if(this.so&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.so.truncate(t),this.ut){this.ut.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.vg(t)}vg(t){if(this.ii<s.qA){let e={type:x.API_ERROR,date:k.now(),args:[this.He.anonymize(t)]};this.Vs(e),this.ii=this.ii+1,H.counters.networkRequests.count("collected")}}WA(t){t===us.ETR_SESSION?this.X.setQueryParams({[s.YA]:s.Rg}):t===us.ETR_PAGE&&this.X.setQueryParams({[s.JA]:s.Rg})}clearEvents(){this.z.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.xs)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:k.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Vs(i)}onCustomErrorEvent(t){var e;let i=(e=this.Ls)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:k.now(),message:t.message,attributes:t.attributes});i&&this.Vs(i)}onPageEvent(t){this.Cg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:k.now(),keyId:this.E.encryptionPublicKeyId};(e=this.ut)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Tg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Vi,{eventName:t,eventType:e})}Tg(t){this.WA(t.eventType),this.Cg(t.eventName),this.pushEvents()}Cg(t){let e={type:x.PAGE_EVENT,date:k.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.KA)}]};this.z.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:k.now(),type:x.UNANONYMIZED_CONSENT_GRANTED};this.z.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:k.now(),type:x.UNANONYMIZED_CONSENT_WITHDRAWN};this.z.addEvent(t)}triggerRecordingForSessionGranted(){this.Gi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Gi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.no=!0}getStaticResourceManagerStatus(){return this.ie?{isStarted:this.E.useStaticResourceManager&&ii.isSupported(),onlineAssets:{activated:this.ie.isOnlineAssetsActivated(),enabledOnNextPageview:this.no}}:null}resetOnlineAssetsOnPageview(){this.zi=!1,this.no=!1}updateOnlineAssetsOnPageview(){this.ie&&this.no&&(this.zi=!0,this.no=!1)}onRecordingRequestSent(t){this.bg=t}getRecordingStartTimestamp(){return this.Ya.toString()}getRecordingLastEventTimestamp(){return this.ro.toString()}onOptOut(){J(this.ze,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Gi(t,e){if(!this.E.emitRecordInfoEvents)return;let i={date:k.now(),type:x.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.z.addEvent(i)}_g(){return this.z.extractEvents(x.API_ERROR,x.JAVASCRIPT_ERROR,x.CUSTOM_ERROR,x.TEXT_VISIBILITY,x.POINTER_DOWN)}}return s.jt="RecordingService",s.KA=255,s.qA=20,s.JA="etrp",s.YA="etrs",s.Rg="1",$([Ht("addInitialDom")],s.prototype,"addInitialDom",null),s})(),$E=(()=>{class s extends _t{constructor(t,e,i){super(),this.le=t,this.Nt=e,this.X=i,this.iu=!1,this.oo={},this.QA=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.ZA(c.rt)&&this.X.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.oo={}}onStop(){}recover(){this.le.recover(this.QA)}addBatchInProgress(t,e,i){this.oo[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.oo[t]}blockSendingLastMessage(){this.iu=!1}allowSendingLastMessage(){this.iu=!0}sendLastMessageBeacon(){if(this.iu){let{ri:t,rst:e,let:i,...n}=this.X.getQueryParams();n.hlm="true",this.Nt.setQueryParams(n),this.Nt.send()}}ZA(t){return!!t&&csString.prototype.indexOf.call(t,D.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.oo),t=>{let{metadata:e,events:i}=this.oo[t];this.le.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.le.save(t)}}return $([U("RecordingRecovery")],s.prototype,"recover",null),s})(),zE=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),GE=8*1024*1024,qE=(()=>{class s extends _t{constructor(t,e,i){super(),this.ke=t,this.Ig=e,this._t=i,this.ru={},this.Pg=new Set,this.ys=!1}initState(){rl()&&(this.Be=this._t.getRequestParameters(),this.tT=`${this.Ig}/exist?${Ci.toQuery(this.Be)}`,this.eT=`${this.Ig}/putTag?${Ci.toQuery(this.Be)}`,this.Og=_r(async()=>{if(this.ys){this.Og();return}this.ys=!0;try{await this.sT()}finally{this.ys=!1}},300),this.ke.onSendStaticResource(t=>{this.Ng(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Ng(t)}Ng(t){this.Mg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Mg(e.hash,e.data)})}Mg(t,e){this.Pg.has(t)||(this.Pg.add(t),this.ru[t]=e,this.Og())}async sT(){let t=this.ru;this.ru={};let e=await this.iT(t);if(!e.length)return;let i=this.rT(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.eT,{method:"POST",body:n})))}async nT(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Be.pid,filter:zE.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.tT,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async iT(t){let e=[],i=await this.nT(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):L.warn("SRM: received unknown hash: "+n)}),e}rT(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<GE)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),Kh=2*1e3*1024,WE=200,Ic=(()=>{class s{constructor(t=Kh){this.Bt=[],this.nu=new aa(t)}addEvent(t){this.nu.addString(Ms(t)),csArray.prototype.push.call(this.Bt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Bt.length&&!(this.Bt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Bt,e,0,t)}eventsCount(){return this.Bt.length}clearEvents(){this.nu.reset(),this.Bt=[]}isFull(){return this.eventsCount()>=WE}isThresholdReached(){return this.nu.isThresholdReached()}getEvents(){return this.Bt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Bt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Bt=i,e}stringifyEvents(){return Ms(this.Bt)}GO(t){t.type===x.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return $([Ht("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),Pc=(()=>{class s{constructor(){this.Ja=1}getCurrentIndex(){return this.Ja}increment(){this.Ja+=1}reset(){this.Ja=1}getRequestParameters(){return{ri:`${this.Ja}`}}}return s})(),YE=3,XE=8,JE=(()=>{class s{constructor(t,e=Kh,i=YE){this.oT=t,this.Dg=e,this.ou=i,this.Ka={}}addEvent(t){this.kg().addEvent(t)}addEventByTimestamp(t){this.kg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.qi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.qi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.qi();return t.length>=this.ou||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return Ms(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.qi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Ka[t[e].metadata.pageNumber]}qi(){return wm(this.Ka)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.qi(),KE)}xg(){let t=this.oT();if(t<=0)return{batch:new Ic(this.Dg),metadata:{pageNumber:0,requestIndex:new Pc}};let e=this.Ka[t];if(e)return e;let i={batch:new Ic(this.Dg),metadata:{pageNumber:t,requestIndex:new Pc}};return this.Ka[t]=i,this.qi().length>Math.max(this.ou,XE)&&L.warn(`RecordingBatchGroup: max number of slots overflowed(${this.qi().length}/${this.ou})`),i}kg(){return this.xg().batch}getCurrentRequestIndex(){return this.xg().metadata.requestIndex}}return s})();function KE(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}function Bt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Qh=(()=>{class s{constructor(t,e){this.Dt=t,this.D=e,this.pi=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.j=t}start(){this.Wi(),this.triggerInitialEvents()}stop(){this.Yi()}Wi(){csArray.prototype.forEach.call(this.pi,t=>xt(t))}Yi(){csArray.prototype.forEach.call(this.pi,t=>Lt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:x.HASH_CHANGE,args:[this.D.anonymizePII(this.Dt.href)],date:k.now()};this.j(t)}visibilityChangeListener(){let t={type:x.VISIBILITY_CHANGE,args:[document.visibilityState],date:k.now()};this.j(t)}}return $([U("hashChange")],s.prototype,"hashChangeListener",null),$([U("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Zs=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),X=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})();function QE(s){if(!q(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Oc="data-cs-scroll-container";function ZE(s){try{if(Dt(csEventtarget.apply(s)))return!0}catch{}return!1}var ti=(()=>{let s;return function(r){function t(i){return!!(Dt(i)&&ZE(i)&&Ur(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Oc)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Oc}]`)}r.getScrollContainer=e}(s||(s={})),s})(),tv=33,Zh=(()=>{class s{constructor(){this.eventType="user",this.lu=[],this.pT=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.gT=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Za=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.hu=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=QE(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.hu,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ye=new Fs((e,i)=>{switch(i){case"initial":case"added":this.Wi(e);break;case"removed":this.Yi(e);break}})}init(){this.mT(),this.yT(),this.du()}onEvent(t){csArray.prototype.push.call(this.lu,t)}he(t,e=!1){csArray.prototype.forEach.call(this.lu,i=>i(t,e))}start(){this.Oh(),this.Wi(document),this.ye.observe()}stop(){this.Yi(document),this.ye.disconnect(),this.lu=[]}yT(){this.ET()&&csArray.prototype.push.call(this.Za,...this.pT)}mT(){this.vT()&&csArray.prototype.push.call(this.Za,...this.gT)}Wi(t){br(t)?csArray.prototype.forEach.call(this.Za,e=>xt(e)):csArray.prototype.forEach.call(this.hu,e=>{let i={type:e.type,listener:e.listener,boundElement:t};xt(i)})}Yi(t){br(t)?csArray.prototype.forEach.call(this.Za,e=>Lt(e)):csArray.prototype.forEach.call(this.hu,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Lt(i)})}ET(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}vT(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}Oh(){this.ST()}ST(){let t=ti.getScrollContainer()||document,e=Y(t),i=this.Lg(t);if(i.top!==0||i.left!==0){let n={type:x.SCROLL,args:[e,i.left,i.top],date:k.now()};this.he(n,!0)}}Lg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(M.isMaskedElement(t)||M.isMaskedElementChild(t))return;let e=Y(t),i=this.Lg(t),n={type:x.SCROLL,args:[e,i.left,i.top],date:k.now()};this.he(n)}mouseOverListener(t){if(M.isMaskedElementChild(t.target))return;let e=Y(t.target),i={type:x.MOUSE_OVER,args:[e],date:k.now()};this.he(i)}clickListener(t){let e=bt(t);if(M.isMaskedElementChild(e))return;let i=Y(e),n={type:x.CLICK,args:[i],date:k.now()};this.he(n)}keyUpListener(t){let e=bt(t);if(M.isMaskedElementChild(e))return;let i=Y(e),n=this.F[t.key];if(n===void 0)return;let o={type:x.KEY_UP,args:[i,n],date:k.now()};this.he(o)}keyDownListener(t){let e=bt(t);if(M.isMaskedElementChild(e))return;let i=Y(e),n=this.F[t.key];if(n===void 0)return;let o={type:x.KEY_DOWN,args:[i,n],date:k.now()};this.he(o)}copyListener(t){let e=bt(t);if(M.isMaskedElementChild(e))return;let i=Y(e),n={type:x.CLIPBOARD_COMMAND,args:[i,Zs.COPY],date:k.now()};this.he(n)}cutListener(t){let e=bt(t);if(M.isMaskedElementChild(e))return;let i=Y(e),n={type:x.CLIPBOARD_COMMAND,args:[i,Zs.CUT],date:k.now()};this.he(n)}pasteListener(t){let e=bt(t);if(M.isMaskedElementChild(e))return;let i=Y(e),n={type:x.CLIPBOARD_COMMAND,args:[i,Zs.PASTE],date:k.now()};this.he(n)}pointerUpListener(t){let e=bt(t);if(M.isMaskedElementChild(e))return;let i=Y(e),n={type:x.POINTER_UP,args:[t.pointerId,t.pointerType,Bt(t.clientX,1),Bt(t.clientY,1),i,t.button],date:k.now()};this.he(n)}pointerMoveListener(t){let e={type:x.POINTER_MOVE,args:[t.pointerId,t.pointerType,Bt(t.clientX,1),Bt(t.clientY,1)],date:k.now()};this.he(e)}pointerDownListener(t){let e=bt(t);if(M.isMaskedElementChild(e))return;let i=Y(e),n={type:x.POINTER_DOWN,args:[t.pointerId,t.pointerType,Bt(t.clientX,1),Bt(t.clientY,1),i,t.button,{pageX:Bt(t.pageX,1),pageY:Bt(t.pageY,1)}],date:k.now()};this.he(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:x.TOUCH_START,args:[n.identifier,Bt(n.clientX,1),Bt(n.clientY,1)],date:k.now()};this.he(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:x.TOUCH_MOVE,args:[n.identifier,Bt(n.clientX,1),Bt(n.clientY,1)],date:k.now()};this.he(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?x.TOUCH_END:x.TOUCH_CANCEL,args:[n.identifier,Bt(n.clientX,1),Bt(n.clientY,1)],date:k.now()};this.he(o)}}du(){this.F={},this.F[" "]=X.SPACE,this.F.Spacebar=X.SPACE,this.F.Backspace=X.BACKSPACE,this.F.Enter=X.ENTER,this.F.Delete=X.DELETE,this.F.ArrowUp=X.ARROWUP,this.F.ArrowDown=X.ARROWDOWN,this.F.ArrowLeft=X.ARROWLEFT,this.F.ArrowRight=X.ARROWRIGHT,this.F.Up=X.ARROWUP,this.F.Down=X.ARROWDOWN,this.F.Left=X.ARROWLEFT,this.F.Right=X.ARROWRIGHT,this.F.CapsLock=X.CAPSLOCK,this.F.Shift=X.SHIFT,this.F.Tab=X.TAB,this.F.Escape=X.ESCAPE,this.F.Esc=X.ESCAPE,this.F.End=X.END,this.F.Alt=X.ALT,this.F.Control=X.CTRL,this.F.Meta=X.META}}return $([Ht("RecordingPageEvents.start")],s.prototype,"start",null),$([U("scroll")],s.prototype,"scrollListener",null),$([U("mouseOver"),Mt(),Xg()],s.prototype,"mouseOverListener",null),$([U("click"),Mt()],s.prototype,"clickListener",null),$([U("Event handler type: keyup")],s.prototype,"keyUpListener",null),$([U("Event handler type: keydown")],s.prototype,"keyDownListener",null),$([U("Event handler type: copy")],s.prototype,"copyListener",null),$([U("Event handler type: cut")],s.prototype,"cutListener",null),$([U("Event handler type: paste")],s.prototype,"pasteListener",null),$([U("Event handler type: pointerup"),Mt()],s.prototype,"pointerUpListener",null),$([U("Event handler type: pointermove"),Mt(),Hs({wait:tv})],s.prototype,"pointerMoveListener",null),$([U("Event handler type: pointerdown"),Mt()],s.prototype,"pointerDownListener",null),$([U("Event handler type: touchstart"),Mt()],s.prototype,"touchStartListener",null),$([U("Event handler type: touchmove"),Mt()],s.prototype,"touchMoveListener",null),$([U("Event handler type: touchend-cancel"),Mt()],s.prototype,"touchEndCancelListener",null),s})(),tu=(()=>{class s{constructor(t={maskingEnabled:!0}){this._T=t}onScannedAsset(t){this.tc=t}sc(){let t=window.location.href,e=csString.prototype.indexOf.call(t,"#");return e===-1?t:csString.prototype.substring.call(t,0,e)}scanCssString(t){this.fu(Ti(t))}scanElement(t,e){this._T.maskingEnabled&&(M.getMaskedElementDetails(t).state!==M.MaskedElementState.NotMasked||e&&M.isMaskedAttribute(t,e))||(Hr(t)?this.wT(t):Uo(t)?this.AT(t,e):(this.TT(t,e),this.bT(t,e),this.RT(t,e)))}AT(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:this.sc(),assetRawPath:Eh(t)};this.tc({type:"stylesheet",asset:o})}}wT(t){var e;let i=new Set;if(t.textContent)for(let o of Ti(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||L.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of Ti(c))i.add(l)}this.fu(Ns(i))}pu(t){return!this.CT(t)&&!fe(t)&&!Pl(t)}TT(t,e){if(sp(t)||ep(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.pu(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:this.sc()};this.tc({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.IT(t.srcset)}}bT(t,e){if(csNodenodeType.apply(t)!==1){ot.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${csNodenodeType.apply(t)}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}IT(t){this.fu(ra(t))}RT(t,e){if((op(t)||ap(t)||cp(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.pu(i)){let n={assetId:xe(i),assetRawPath:i,assetBasePath:this.sc()};this.tc({type:"asset",asset:n})}}}fu(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.pu(e)),e=>({rawUrl:e,absoluteUrl:xe(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:this.sc(),assetRawPath:e.rawUrl};this.tc({type:"asset",asset:i})})}CT(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),ev=30,sv=0,eu=(()=>{class s{constructor(t,e=ev,i=sv){this.PT=t,this.OT=e,this.NT=i,this.rs=new xi,this.We=!1,this.gu=0,this.Vg=()=>{for(this.gu=0;this.rs.length;){if(this.gu>=this.OT){csSetTimeout(this.Vg,this.NT);return}let n=k.elapsed(),o=this.rs.pop();if(!o)break;this.runTask(o);let c=k.elapsed()-n;this.gu+=c}this.We=!1}}schedule(t,e=!1){if(!this.PT||e){t();return}zt.general.pendingTasks.increase(),this.rs.push(t),this.MT()}MT(){this.We||(this.We=!0,csSetTimeout(()=>{this.Vg()}))}runTask(t){zt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.rs.forEach(t=>{this.runTask(t)}),this.rs.clear()}clearQueue(){zt.general.pendingTasks.clear(),zt.mutations.pendingMutations.clear(),this.rs.clear()}isEmpty(){return this.rs.length===0}}return $([U("TaskScheduler"),Ht("runTask")],s.prototype,"runTask",null),$([Ht("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),su=(()=>{class s{constructor(){this.Y=!1,this.Ug=new sa(t=>t.type==="cssRuleInserted"&&this.DT(t)),this.kT=Qr(t=>{this.Y&&t.length>0&&this.M.schedule(()=>J(t,e=>this.lo.scanElement(e)))}),this.xT=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.LT)===null||i===void 0||i.call(this,e)),(n=this.VT)===null||n===void 0||n.call(this,e);let c={date:k.now(),type:x.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.j)===null||o===void 0||o.call(this,c)},this.M=new eu(!0,30,0),this.qn=new Uh(t=>this.UT(t)),this.U=new Be(t=>this.Ir(t)),this.lo=new tu,this.lo.onScannedAsset(this.xT)}onEvent(t){this.j=t}onAsset(t){this.VT=t}onStyleSheetFound(t){this.LT=t}start(){this.Y||(this.Y=!0,this.Ug.observe(),this.qn.observe(),this.U.observe())}stop(){this.Y&&(this.Ug.disconnect(),this.qn.disconnect(),this.U.disconnect(),this.Y=!1)}DT(t){!t.rule||!this.Y||this.lo.scanCssString(t.rule)}UT(t){this.Y&&M.getMaskedElementDetails(t).state===M.MaskedElementState.NotMasked&&this.kT.push(t)}Ir(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.lo.scanElement(e.target,e.attributeName);break;case"characterData":this.jT(e.target);break;case"childList":}})}jT(t){Tr(t)&&csNodeparentNode.apply(t)&&Hr(csNodeparentNode.apply(t))&&this.lo.scanCssString(t.data)}}return s})(),iv="csPersisted",Nc="v2/recording",iu=["isRecording"],ru=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],nu=["replay:resourceManager:getStatus","cssrm:getStatus"],rv=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d,g,m,v,b,C,A,S,N,I,_,B,F){this.Ei=t,this.C=e,this.E=i,this.Be=n,this.S=o,this.D=c,this.V=l,this.Se=h,this.Ze=u,this.St=d,this.He=g,this.Rt=m,this.w=v,this.vi=b,this.jg=C,this.Xt=A,this.Ht=S,this.tt=N,this.so=I,this.it=_,this.qO=B,this.ut=F}init(){var t,e,i;let n=[],o=[];csArray.prototype.push.call(o,new Rh),this.ho=new Ih(this.it.shouldUseAnonymization(),this.E.whitelistedAttributes,this.D,this.E.anonymizeDigits),this.Xi();let c=new RE(iv);this.HT(c),this.z=new JE(()=>{var _;return((_=this.C.getSession())===null||_===void 0?void 0:_.pageNumber)||0});let l=new su;csArray.prototype.push.call(n,l),this.E.useStaticResourceManager&&ii.isSupported()&&(this.ie=new ii,this.ke=new Wh,this.Hg=new qE(this.ke,this.E.getStaticResourceManagerUri(),this.Be),this.jg.addListener(this.Hg),csArray.prototype.push.call(o,this.ie));let h=new Pi(this.Be,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.C.getRecordingTypes(),",")})}),u=new qh(`${this.E.getRecordingUri()}/${Nc}`);csArray.prototype.push.call(o,this.ho),csArray.prototype.push.call(o,new Nh(this.tt)),csArray.prototype.push.call(o,new Mh),this.Ji=new Zh,this.Ji.init(),csArray.prototype.push.call(n,this.Ji),this.Vt=new $E(c,u,this.X),csArray.prototype.push.call(n,new Qh(window.location,this.D));let d=!1,g=d?new Dh:new bh,m=d?null:new nE,v=d?null:new aE,b=d?null:new Vh(this.ut,(e=this.E.experimental)===null||e===void 0?void 0:e.trackedCustomInputProperties),C=d?null:new jh,A=csArray.prototype.filter.call([m,this.Se,g,new Xh(csArray.prototype.filter.call(n,_=>_)),C,new Hh,new Fh,b,v],Boolean),S=new Gh(A,o),N=new Yh(S,this.w,this.ke,this.xs,this.Ls),I=csArray.prototype.filter.call([g,m,v,b,C],Boolean);this.recordingService=new FE(this.E,this.z,h,this.V,this.C,this.Ze,this.St,this.He,this.ut,this.X,this.Vt,u,N,n,I,this.ie,this.so,this.xs,this.Ls),this.vi.addListener(this.recordingService),this.jg.addListener(this.recordingService),this.recordingService.init(),this.S.register(iu,()=>this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()),this.S.register(ru,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.w.emitRecordingContextChange()}),this.S.register(nu,()=>this.recordingService.getStaticResourceManagerStatus()),this.uo=new CE(this.w,this.C),this.vi.addListener(this.uo),this.Ei.enableRecordingContext(this.recordingService,this.C,this.uo),this.mu()}onAfterNaturalPageView(){var t;this.Xt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Hg)===null||t===void 0||t.initState()}onStartTracking(){this.Vt.recover(),this.Xi(),this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ic())}onArtificialPageViewEnd(){this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&!this.C.isTemporarilyRecorded()&&this.Vt.sendLastMessageBeacon(),this.recordingService.clearStates(),this.fo()}onAfterArtificialPageView(){this.Xi(),this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()?(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.ic()):this.recordingService.resetOnlineAssetsOnPageview()}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.fo()}onOptout(){this.fo(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Xi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.w.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Xi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.w.emitRecordingContextChange()}onCollectStateChange(t,e){t===D.QUOTA_REACHED||t===D.ANALYTICS_ONLY&&e===Kt.ETR_OFF?(this.recordingService.clearEvents(),this.fo()):(this.X.setQueryParams({rt:csArray.prototype.join.call(this.C.getRecordingTypes(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.uo.onCollectStateChange(t,e))}onTargetingRulesMatched(){this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&!this.recordingService.isRecording()&&this.ic()}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Vt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Vt.allowSendingLastMessage(),this.Ji.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ic(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.fo())}mu(){var t,e,i,n,o,c;if(!((i=(e=(t=this.E.experimental)===null||t===void 0?void 0:t.sessionReplay)===null||e===void 0?void 0:e.shadowRoot)===null||i===void 0)&&i.filterByHostSelector){let l=(c=(o=(n=this.E.experimental)===null||n===void 0?void 0:n.sessionReplay)===null||o===void 0?void 0:o.shadowRoot)===null||c===void 0?void 0:c.filterByHostSelector;J(l,h=>{Qs(h)&&Be.setShadowRootFilter(u=>{try{return ae.call(u.host,h)}catch{return!1}})})}}ic(){this.recordingService.start(),this.Vt.start(),this.w.emitRecordingContextChange()}fo(){this.recordingService.stop(),this.Vt.stop(),this.w.emitRecordingContextChange()}HT(t){let e="byteArray";this.X=this.Ht.create(`${this.E.getRecordingUri()}/${Nc}`,e,t)}Xi(){var t;let e=this.it.shouldUseAnonymization();this.ho.setAnonymization(e),(t=this.BT)===null||t===void 0||t.setAnonymization(e)}}return $([Ht("Recording.onStartTracking")],s.prototype,"onStartTracking",null),$([Ht("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})();var ls=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===D.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),Ei=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),nv=(()=>{class s{constructor(t,e,i,n){this.N=t,this.C=e,this.E=i,this.fs=n,this.Bg=!1}isNaturalPageViewSent(){return this.Bg}setNaturalPageViewSent(t){this.Bg=t}getTrackingContext(){let t=this.C.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.E.projectId,n=this.E.uxaDomain,o=t.pageNumber,c=this.fs.getPageViewType(),l=this.C.isReplayRecorded(),h=this.FT(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h,...this.E.smbConfig}}getSessionKey(){let t=this.N.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}FT(t){return ls.isReplayConsentNeeded(this.E)?t.collectState===D.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?Ei.NOT_EXPRESSED:t.collectState===D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?Ei.WITHDRAWN:Ei.GRANTED:Ei.NOT_NEEDED}}return s})(),ov=(()=>{class s{constructor(t){this.Mt=t,this.ue=[]}handleCommand(t){if(oe(t)&&(this.po(t),this.Mt.isNaturalPageViewSent())){let e=this.Mt.getTrackingContext();e!==null&&this.Ft(t,e)}}po(t){csArray.prototype.push.call(this.ue,t)}executeRegisteredCallbacks(){let t=this.Mt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ue,e=>this.Ft(e,t))}Ft(t,e){csSetTimeout(()=>{t(e)})}}return s})(),av=(()=>{class s{constructor(t){this.Mt=t,this.Ki=[]}handleCommand(t){if(this.Mt.isNaturalPageViewSent())return this.$T(t);this.go(t)}$T(t){let e=this.Mt.getSessionKey();return this.Fg(t)&&e!==null&&this.Ft(t.callback,e),e}go(t){this.Fg(t)&&csArray.prototype.push.call(this.Ki,t.callback)}flushPendingCallbacks(){let t=this.Mt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Ki,e=>{this.Ft(e,t)}),this.Ki=[]}Fg(t){return t&&typeof t.callback=="function"}Ft(t,e){csSetTimeout(()=>{t(e)})}}return s})(),cv=(()=>{class s{constructor(t,e){this.Z=t,this.Mt=e}onTrackingContextRequestCallback(t){let e=this.Mt.getTrackingContext();e!==null&&this.Z.sendToChildren(O.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.Mt.isNaturalPageViewSent())return;let e=this.Mt.getTrackingContext();e!==null&&(t.trackingContext=e,this.Z.sendToChildren(O.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.Mt.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:si.AfterPageView};this.Z.sendToChildren(O.IntegrationCallback,e)}}return s})();function ou(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,u,d]=l;n?h=`${c}/sites/${n}/player?uu=${u}&sn=${d}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${u}&sn=${d}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${k.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var lv=(()=>{class s{constructor(t){this.Mt=t}handleCommand(t,e){ne(t)&&oe(e)&&this.Ft(t,e)}Ft(t,e){csSetTimeout(()=>{let i=this.Mt.getTrackingContext();if(i){let n=ou(i,t);e(n)}})}}return s})(),au=(()=>{class s{constructor(){this.ue=new Set}handleCommand(t,e){return!oe(t)||this.ue.has(t)?null:(this.ue.add(t),e&&(this.De=e,this.$g(t,e)),()=>this.ue.delete(t))}executeCallbacks(t){this.zT(t)&&(this.De=t,this.ue.forEach(e=>this.$g(e,t)))}$g(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}zT(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.De&&(this.De.isRecording!==e||this.De.recordingStartTimestamp!==i||this.De.etrState!==n||this.De.etrStatus!==o||this.De.collectState!==c)}}return s})(),la=["afterPageView"],cu=["getSessionKey"],lu=["onRecordingContextChange","onRecordingStateChange"],hu=["replay:link:generate"],hv=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.N=t,this.C=e,this.S=i,this.mt=n,this.Z=o,this.E=c,this.fs=l,this.Ei=h,this.rc=null}init(){this.Mt=new nv(this.N,this.C,this.E,this.fs),this.yu=new ov(this.Mt),this.zg=new av(this.Mt),this.mo=new au,this.GT=new lv(this.Mt),this.rc=new cv(this.Z,this.Mt),this.mt.addListener(this.rc),this.S.register(cu,t=>this.zg.handleCommand(t)),this.S.register(la,t=>this.yu.handleCommand(t)),this.S.register(lu,t=>this.mo.handleCommand(t,this.Ei.getRecordingContext())),this.S.register(hu,(t,e)=>{this.Vr&&this.GT.handleCommand({...t,recordingStartTimestamp:this.Ei.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.Mt.setNaturalPageViewSent(!0),this.zg.flushPendingCallbacks(),this.yu.executeRegisteredCallbacks(),(t=this.rc)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.yu.executeRegisteredCallbacks(),(t=this.rc)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.mo.executeCallbacks(this.Ei.getRecordingContext())}setRecordingService(t){this.Vr=t}}return $([Hs({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})();var ha=["optout"],uu=["optin"],uv=(()=>{class s{constructor(t,e){this.S=t,this.us=e}init(){this.S.register(ha,()=>{this.us.activate()})}}return s})(),vi="_cs_optout",dv=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.Et=i}get(){return this.E.cookielessTrackingEnabled?this.Et.getItem(vi):this.O.get(vi)}set(t){this.E.cookielessTrackingEnabled?this.Et.setItem(vi,t):this.O.set(vi,t,xo)}}return s})(),Mc="1",fv=(()=>{class s{constructor(t,e,i){this.w=t,this.Dt=e,this.pt=i}init(){!this.isActive()&&this.lb()&&this.activate()}isActive(){return this.pt.get()===Mc}activate(){this.w.emitOptout(),this.pt.set(Mc)}lb(){return csString.prototype.indexOf.call(this.Dt.href,vi)>0}}return s})(),pv=(()=>{class s{constructor(){this.je=null,this.hb=1}startInterval(){this.je=window.csSetInterval(()=>{let t=this.hb++;if(this.flush(`interval.${t}`),t>=5){this.stopInterval();return}},5e3)}flush(t){H.counters.tasks.flush(t),H.counters.longTasks.flush(t)}clear(){H.counters.tasks.reset(),H.counters.longTasks.reset(),this.stopInterval()}stopInterval(){this.je&&(csClearInterval(this.je),this.je=null)}}return s})(),gv=(()=>{class s{constructor(){this.So=!1,this._o=null,this.js=new pv}onStartTracking(){this.db()}db(){let t=csArray.prototype.filter.call(performance.getEntriesByType("resource"),e=>{var i;if(e.initiatorType!=="script")return!1;let n=csString.prototype.split.call(e.name,"/")[2]||"",o=(i=window.CSCurrentScript)===null||i===void 0?void 0:i.src;return o?o===e.name:n==="t.contentsquare.net"});csArray.prototype.forEach.call(t,e=>{if(e.transferSize===0)return;let i=e.responseEnd-e.responseStart,n=e.transferSize;i>=0&&H.counters.downloadTime.push(i),n>=0&&H.counters.transferSize.push(n)}),H.counters.downloadTime.count>0&&H.counters.downloadTime.flush(),H.counters.transferSize.count>0&&H.counters.transferSize.flush()}im(){let t=Fs.shadowRootsCount;t!==void 0&&H.counters.dom.add("shadow-dom",t),H.counters.mutations.flush(),H.counters.dom.flush(),H.counters.blockingTime.flush(),H.counters.inpContribution.flush()}onBeforeArtificialPageView(){this.im(),this._o&&csClearTimeout(this._o),this.js.stopInterval(),this.So=!0}onBeforeNaturalPageView(){this.im()}onAfterNaturalPageView(t){t===As.Natural?(this.js.flush("boot"),this.js.startInterval()):(this._o&&csClearTimeout(this._o),this.js.stopInterval(),this.So=!0)}onInitialDomStart(){this.So||this.js.stopInterval()}onInitialDomDone(){this.So||(this.So=!0,this.js.flush("initial-dom"),this._o=window.csSetTimeout(()=>{this.js.flush("post-initial-dom"),this.js.startInterval()},5e3))}onOptout(){this.js.clear()}}return s})(),mv=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),yv=(()=>{class s{constructor(){}static init(t){(!this.bu||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.bu=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.bu.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.bu)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(mv.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;Ev(s.getString("debugLog"),t)&&(n.value=function(...u){return console.log(l,...u),h.bind(this)(...u)})}}}return s})();function Ev(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}var vv=(()=>{class s{constructor(t){this.fb=t,this.rm=[],this.Ru={},this.pb=0}static async create(t,e={}){let i=new s(t),n;return csArray.prototype.forEach.call(Object.entries(e),([o,c])=>{e[o]=c,i.register(c)}),await i.jr().catch(o=>{ot.warn("Failed to start worker: "+o.toString()),n=new t}),new Proxy(i,{get(o,c){return c==="__worker"?i._e:t.prototype[c]instanceof Function?(...l)=>n?Promise.resolve(n[c](...l)):i.nm(c,l):n?Promise.resolve(n[c]):i.nm(c,[])}})}nm(t,e){let i=++this.pb;return new Promise((n,o)=>{this.Ru[i]=(c,l)=>{delete this.Ru[i],c?o(c):n(l)},this._e.postMessage({id:i,command:t,params:e})})}register(t){csArray.prototype.push.call(this.rm,t.toString())}jr(){try{let t=Dc.toString()+`
`+csArray.prototype.join.call(this.rm,`
`)+`

const klass = (${this.fb.toString()});

${Dc.name}()`,e=new Blob([t],{type:"application/javascript"}),i=csURL.createObjectURL(e);this._e=new Worker(i),this._e.addEventListener("message",n=>{var o,c,l,h,u;if(n.data!=="ping"){if(!((o=n.data)===null||o===void 0)&&o.critical||!n.data.id){ot.error("Worker error:",(l=(c=n.data)===null||c===void 0?void 0:c.critical)!==null&&l!==void 0?l:"No ID");return}(u=(h=this.Ru)[n.data.id])===null||u===void 0||u.call(h,n.data.error,n.data.result)}})}catch(t){return Promise.reject(t)}return new Promise((t,e)=>{this._e.onerror=i=>e(new Error(i.message)),this._e.onmessage=()=>{this._e.onmessage=this._e.onerror=null,t()}})}}return s})();function Dc(){let s=new klass;self.postMessage("ping"),self.onmessage=r=>{var t,e,i;if(!(!((t=r.data)===null||t===void 0)&&t.command))return self.postMessage({critical:"Invalid command",id:(e=r.data)===null||e===void 0?void 0:e.id,command:(i=r.data)===null||i===void 0?void 0:i.command});Promise.resolve().then(()=>{let n=s[r.data.command];return typeof n=="function"?n.apply(s,r.data.params):n}).then(n=>{var o;self.postMessage({result:n,id:r.data.id,command:(o=r.data)===null||o===void 0?void 0:o.command})},n=>{var o,c;self.postMessage({error:n,id:(o=r.data)===null||o===void 0?void 0:o.id,command:(c=r.data)===null||c===void 0?void 0:c.command})})}}function Eo(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let n=0,o=1,c=2,l=3,h=258,u=29,d=256,g=d+1+u,m=30,v=19,b=2*g+1,C=15,A=16,S=7,N=256,I=16,_=17,B=18,F=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),K=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),vt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),It=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gt=512,w=new Array((g+2)*2);i(w);let V=new Array(m*2);i(V);let j=new Array(Gt);i(j);let G=new Array(h-l+1);i(G);let gt=new Array(u);i(gt);let Tt=new Array(m);i(Tt);function ce(a,p,y,E,f){this.static_tree=a,this.extra_bits=p,this.extra_base=y,this.elems=E,this.max_length=f,this.has_stree=a&&a.length}let Re,ds,fs;function Fe(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let $e=a=>a<256?j[a]:j[256+(a>>>7)],le=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},Pt=(a,p,y)=>{a.bi_valid>A-y?(a.bi_buf|=p<<a.bi_valid&65535,le(a,a.bi_buf),a.bi_buf=p>>A-a.bi_valid,a.bi_valid+=y-A):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=y)},te=(a,p,y)=>{Pt(a,y[p*2],y[p*2+1])},Gi=(a,p)=>{let y=0;do y|=a&1,a>>>=1,y<<=1;while(--p>0);return y>>>1},tn=a=>{a.bi_valid===16?(le(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},en=(a,p)=>{let y=p.dyn_tree,E=p.max_code,f=p.stat_desc.static_tree,R=p.stat_desc.has_stree,T=p.stat_desc.extra_bits,P=p.stat_desc.extra_base,Z=p.stat_desc.max_length,z,qt,Qe,lt,Es,Gs,ar=0;for(lt=0;lt<=C;lt++)a.bl_count[lt]=0;for(y[a.heap[a.heap_max]*2+1]=0,z=a.heap_max+1;z<b;z++)qt=a.heap[z],lt=y[y[qt*2+1]*2+1]+1,lt>Z&&(lt=Z,ar++),y[qt*2+1]=lt,!(qt>E)&&(a.bl_count[lt]++,Es=0,qt>=P&&(Es=T[qt-P]),Gs=y[qt*2],a.opt_len+=Gs*(lt+Es),R&&(a.static_len+=Gs*(f[qt*2+1]+Es)));if(ar!==0){do{for(lt=Z-1;a.bl_count[lt]===0;)lt--;a.bl_count[lt]--,a.bl_count[lt+1]+=2,a.bl_count[Z]--,ar-=2}while(ar>0);for(lt=Z;lt!==0;lt--)for(qt=a.bl_count[lt];qt!==0;)Qe=a.heap[--z],!(Qe>E)&&(y[Qe*2+1]!==lt&&(a.opt_len+=(lt-y[Qe*2+1])*y[Qe*2],y[Qe*2+1]=lt),qt--)}},qi=(a,p,y)=>{let E=new Array(C+1),f=0,R,T;for(R=1;R<=C;R++)E[R]=f=f+y[R-1]<<1;for(T=0;T<=p;T++){let P=a[T*2+1];P!==0&&(a[T*2]=Gi(E[P]++,P))}},sn=()=>{let a,p,y,E,f,R=new Array(C+1);for(y=0,E=0;E<u-1;E++)for(gt[E]=y,a=0;a<1<<F[E];a++)G[y++]=E;for(G[y-1]=E,f=0,E=0;E<16;E++)for(Tt[E]=f,a=0;a<1<<K[E];a++)j[f++]=E;for(f>>=7;E<m;E++)for(Tt[E]=f<<7,a=0;a<1<<K[E]-7;a++)j[256+f++]=E;for(p=0;p<=C;p++)R[p]=0;for(a=0;a<=143;)w[a*2+1]=8,a++,R[8]++;for(;a<=255;)w[a*2+1]=9,a++,R[9]++;for(;a<=279;)w[a*2+1]=7,a++,R[7]++;for(;a<=287;)w[a*2+1]=8,a++,R[8]++;for(qi(w,g+1,R),a=0;a<m;a++)V[a*2+1]=5,V[a*2]=Gi(a,5);Re=new ce(w,F,d+1,g,C),ds=new ce(V,K,0,m,C),fs=new ce(new Array(0),vt,0,v,S)},Wi=a=>{let p;for(p=0;p<g;p++)a.dyn_ltree[p*2]=0;for(p=0;p<m;p++)a.dyn_dtree[p*2]=0;for(p=0;p<v;p++)a.bl_tree[p*2]=0;a.dyn_ltree[N*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Yi=a=>{a.bi_valid>8?le(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Xi=(a,p,y,E)=>{Yi(a),E&&(le(a,y),le(a,~y)),a.pending_buf.set(a.window.subarray(p,p+y),a.pending),a.pending+=y},rn=(a,p,y,E)=>{let f=p*2,R=y*2;return a[f]<a[R]||a[f]===a[R]&&E[p]<=E[y]},Ji=(a,p,y)=>{let E=a.heap[y],f=y<<1;for(;f<=a.heap_len&&(f<a.heap_len&&rn(p,a.heap[f+1],a.heap[f],a.depth)&&f++,!rn(p,E,a.heap[f],a.depth));)a.heap[y]=a.heap[f],y=f,f<<=1;a.heap[y]=E},nn=(a,p,y)=>{let E,f,R=0,T,P;if(a.last_lit!==0)do E=a.pending_buf[a.d_buf+R*2]<<8|a.pending_buf[a.d_buf+R*2+1],f=a.pending_buf[a.l_buf+R],R++,E===0?te(a,f,p):(T=G[f],te(a,T+d+1,p),P=F[T],P!==0&&(f-=gt[T],Pt(a,f,P)),E--,T=$e(E),te(a,T,y),P=K[T],P!==0&&(E-=Tt[T],Pt(a,E,P)));while(R<a.last_lit);te(a,N,p)},Ki=(a,p)=>{let y=p.dyn_tree,E=p.stat_desc.static_tree,f=p.stat_desc.has_stree,R=p.stat_desc.elems,T,P,Z=-1,z;for(a.heap_len=0,a.heap_max=b,T=0;T<R;T++)y[T*2]!==0?(a.heap[++a.heap_len]=Z=T,a.depth[T]=0):y[T*2+1]=0;for(;a.heap_len<2;)z=a.heap[++a.heap_len]=Z<2?++Z:0,y[z*2]=1,a.depth[z]=0,a.opt_len--,f&&(a.static_len-=E[z*2+1]);for(p.max_code=Z,T=a.heap_len>>1;T>=1;T--)Ji(a,y,T);z=R;do T=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Ji(a,y,1),P=a.heap[1],a.heap[--a.heap_max]=T,a.heap[--a.heap_max]=P,y[z*2]=y[T*2]+y[P*2],a.depth[z]=(a.depth[T]>=a.depth[P]?a.depth[T]:a.depth[P])+1,y[T*2+1]=y[P*2+1]=z,a.heap[1]=z++,Ji(a,y,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],en(a,p),qi(y,Z,a.bl_count)},on=(a,p,y)=>{let E,f=-1,R,T=p[0*2+1],P=0,Z=7,z=4;for(T===0&&(Z=138,z=3),p[(y+1)*2+1]=65535,E=0;E<=y;E++)R=T,T=p[(E+1)*2+1],!(++P<Z&&R===T)&&(P<z?a.bl_tree[R*2]+=P:R!==0?(R!==f&&a.bl_tree[R*2]++,a.bl_tree[I*2]++):P<=10?a.bl_tree[_*2]++:a.bl_tree[B*2]++,P=0,f=R,T===0?(Z=138,z=3):R===T?(Z=6,z=3):(Z=7,z=4))},Ea=(a,p,y)=>{let E,f=-1,R,T=p[0*2+1],P=0,Z=7,z=4;for(T===0&&(Z=138,z=3),E=0;E<=y;E++)if(R=T,T=p[(E+1)*2+1],!(++P<Z&&R===T)){if(P<z)do te(a,R,a.bl_tree);while(--P!==0);else R!==0?(R!==f&&(te(a,R,a.bl_tree),P--),te(a,I,a.bl_tree),Pt(a,P-3,2)):P<=10?(te(a,_,a.bl_tree),Pt(a,P-3,3)):(te(a,B,a.bl_tree),Pt(a,P-11,7));P=0,f=R,T===0?(Z=138,z=3):R===T?(Z=6,z=3):(Z=7,z=4)}},id=a=>{let p;for(on(a,a.dyn_ltree,a.l_desc.max_code),on(a,a.dyn_dtree,a.d_desc.max_code),Ki(a,a.bl_desc),p=v-1;p>=3&&a.bl_tree[It[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},rd=(a,p,y,E)=>{let f;for(Pt(a,p-257,5),Pt(a,y-1,5),Pt(a,E-4,4),f=0;f<E;f++)Pt(a,a.bl_tree[It[f]*2+1],3);Ea(a,a.dyn_ltree,p-1),Ea(a,a.dyn_dtree,y-1)},nd=a=>{let p=4093624447,y;for(y=0;y<=31;y++,p>>>=1)if(p&1&&a.dyn_ltree[y*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(y=32;y<d;y++)if(a.dyn_ltree[y*2]!==0)return 1;return 0},va=!1,od=a=>{va||(sn(),va=!0),a.l_desc=new Fe(a.dyn_ltree,Re),a.d_desc=new Fe(a.dyn_dtree,ds),a.bl_desc=new Fe(a.bl_tree,fs),a.bi_buf=0,a.bi_valid=0,Wi(a)},Sa=(a,p,y,E)=>{Pt(a,(n<<1)+(E?1:0),3),Xi(a,p,y,!0)},ad=a=>{Pt(a,o<<1,3),te(a,N,w),tn(a)},cd=(a,p,y,E)=>{let f,R,T=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=nd(a)),Ki(a,a.l_desc),Ki(a,a.d_desc),T=id(a),f=a.opt_len+3+7>>>3,R=a.static_len+3+7>>>3,R<=f&&(f=R)):f=R=y+5,y+4<=f&&p!==-1?Sa(a,p,y,E):a.strategy===4||R===f?(Pt(a,(o<<1)+(E?1:0),3),nn(a,w,V)):(Pt(a,(c<<1)+(E?1:0),3),rd(a,a.l_desc.max_code+1,a.d_desc.max_code+1,T+1),nn(a,a.dyn_ltree,a.dyn_dtree)),Wi(a),E&&Yi(a)},ld=(a,p,y)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=y&255,a.last_lit++,p===0?a.dyn_ltree[y*2]++:(a.matches++,p--,a.dyn_ltree[(G[y]+d+1)*2]++,a.dyn_dtree[$e(p)*2]++),a.last_lit===a.lit_bufsize-1);var hd=od,ud=Sa,dd=cd,fd=ld,pd=ad,gd={_tr_init:hd,_tr_stored_block:ud,_tr_flush_block:dd,_tr_tally:fd,_tr_align:pd},_a=(a,p,y,E)=>{let f=a&65535|0,R=a>>>16&65535|0,T=0;for(;y!==0;){T=y>2e3?2e3:y,y-=T;do f=f+p[E++]|0,R=R+f|0;while(--T);f%=65521,R%=65521}return f|R<<16|0};let md=()=>{let a,p=[];for(var y=0;y<256;y++){a=y;for(var E=0;E<8;E++)a=a&1?3988292384^a>>>1:a>>>1;p[y]=a}return p},yd=new Uint32Array(md());var ze=(a,p,y,E)=>{let f=yd,R=E+y;a^=-1;for(let T=E;T<R;T++)a=a>>>8^f[(a^p[T])&255];return a^-1},Qi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},wa={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:Ed,_tr_stored_block:vd,_tr_flush_block:Sd,_tr_tally:Ge,_tr_align:_d}=gd,{Z_NO_FLUSH:ps,Z_PARTIAL_FLUSH:wd,Z_FULL_FLUSH:Ad,Z_FINISH:qe,Z_BLOCK:Aa,Z_OK:ge,Z_STREAM_END:Ta,Z_STREAM_ERROR:ee,Z_DATA_ERROR:Td,Z_BUF_ERROR:an,Z_DEFAULT_COMPRESSION:bd,Z_FILTERED:Rd,Z_HUFFMAN_ONLY:Zi,Z_RLE:Cd,Z_FIXED:Id,Z_DEFAULT_STRATEGY:Pd,Z_UNKNOWN:Od,Z_DEFLATED:tr}=wa,Nd=9,Md=15,Dd=8,cn=256+1+29,kd=30,xd=19,Ld=2*cn+1,Vd=15,Q=3,We=258,he=We+Q+1,Ud=32,er=42,ln=69,sr=73,ir=91,rr=103,gs=113,ci=666,wt=1,li=2,ms=3,$s=4,jd=3,Ye=(a,p)=>(a.msg=Qi[p],p),ba=a=>(a<<1)-(a>4?9:0),Xe=a=>{let p=a.length;for(;--p>=0;)a[p]=0},Je=(a,p,y)=>(p<<a.hash_shift^y)&a.hash_mask,Ke=a=>{let p=a.state,y=p.pending;y>a.avail_out&&(y=a.avail_out),y!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+y),a.next_out),a.next_out+=y,p.pending_out+=y,a.total_out+=y,a.avail_out-=y,p.pending-=y,p.pending===0&&(p.pending_out=0))},Ot=(a,p)=>{Sd(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,Ke(a.strm)},it=(a,p)=>{a.pending_buf[a.pending++]=p},hi=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},Hd=(a,p,y,E)=>{let f=a.avail_in;return f>E&&(f=E),f===0?0:(a.avail_in-=f,p.set(a.input.subarray(a.next_in,a.next_in+f),y),a.state.wrap===1?a.adler=_a(a.adler,p,f,y):a.state.wrap===2&&(a.adler=ze(a.adler,p,f,y)),a.next_in+=f,a.total_in+=f,f)},Ra=(a,p)=>{let y=a.max_chain_length,E=a.strstart,f,R,T=a.prev_length,P=a.nice_match,Z=a.strstart>a.w_size-he?a.strstart-(a.w_size-he):0,z=a.window,qt=a.w_mask,Qe=a.prev,lt=a.strstart+We,Es=z[E+T-1],Gs=z[E+T];a.prev_length>=a.good_match&&(y>>=2),P>a.lookahead&&(P=a.lookahead);do if(f=p,!(z[f+T]!==Gs||z[f+T-1]!==Es||z[f]!==z[E]||z[++f]!==z[E+1])){E+=2,f++;do;while(z[++E]===z[++f]&&z[++E]===z[++f]&&z[++E]===z[++f]&&z[++E]===z[++f]&&z[++E]===z[++f]&&z[++E]===z[++f]&&z[++E]===z[++f]&&z[++E]===z[++f]&&E<lt);if(R=We-(lt-E),E=lt-We,R>T){if(a.match_start=p,T=R,R>=P)break;Es=z[E+T-1],Gs=z[E+T]}}while((p=Qe[p&qt])>Z&&--y!==0);return T<=a.lookahead?T:a.lookahead},ys=a=>{let p=a.w_size,y,E,f,R,T;do{if(R=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-he)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,E=a.hash_size,y=E;do f=a.head[--y],a.head[y]=f>=p?f-p:0;while(--E);E=p,y=E;do f=a.prev[--y],a.prev[y]=f>=p?f-p:0;while(--E);R+=p}if(a.strm.avail_in===0)break;if(E=Hd(a.strm,a.window,a.strstart+a.lookahead,R),a.lookahead+=E,a.lookahead+a.insert>=Q)for(T=a.strstart-a.insert,a.ins_h=a.window[T],a.ins_h=Je(a,a.ins_h,a.window[T+1]);a.insert&&(a.ins_h=Je(a,a.ins_h,a.window[T+Q-1]),a.prev[T&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=T,T++,a.insert--,!(a.lookahead+a.insert<Q)););}while(a.lookahead<he&&a.strm.avail_in!==0)},Bd=(a,p)=>{let y=65535;for(y>a.pending_buf_size-5&&(y=a.pending_buf_size-5);;){if(a.lookahead<=1){if(ys(a),a.lookahead===0&&p===ps)return wt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let E=a.block_start+y;if((a.strstart===0||a.strstart>=E)&&(a.lookahead=a.strstart-E,a.strstart=E,Ot(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-he&&(Ot(a,!1),a.strm.avail_out===0))return wt}return a.insert=0,p===qe?(Ot(a,!0),a.strm.avail_out===0?ms:$s):(a.strstart>a.block_start&&(Ot(a,!1),a.strm.avail_out===0),wt)},hn=(a,p)=>{let y,E;for(;;){if(a.lookahead<he){if(ys(a),a.lookahead<he&&p===ps)return wt;if(a.lookahead===0)break}if(y=0,a.lookahead>=Q&&(a.ins_h=Je(a,a.ins_h,a.window[a.strstart+Q-1]),y=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),y!==0&&a.strstart-y<=a.w_size-he&&(a.match_length=Ra(a,y)),a.match_length>=Q)if(E=Ge(a,a.strstart-a.match_start,a.match_length-Q),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=Q){a.match_length--;do a.strstart++,a.ins_h=Je(a,a.ins_h,a.window[a.strstart+Q-1]),y=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Je(a,a.ins_h,a.window[a.strstart+1]);else E=Ge(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(E&&(Ot(a,!1),a.strm.avail_out===0))return wt}return a.insert=a.strstart<Q-1?a.strstart:Q-1,p===qe?(Ot(a,!0),a.strm.avail_out===0?ms:$s):a.last_lit&&(Ot(a,!1),a.strm.avail_out===0)?wt:li},zs=(a,p)=>{let y,E,f;for(;;){if(a.lookahead<he){if(ys(a),a.lookahead<he&&p===ps)return wt;if(a.lookahead===0)break}if(y=0,a.lookahead>=Q&&(a.ins_h=Je(a,a.ins_h,a.window[a.strstart+Q-1]),y=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=Q-1,y!==0&&a.prev_length<a.max_lazy_match&&a.strstart-y<=a.w_size-he&&(a.match_length=Ra(a,y),a.match_length<=5&&(a.strategy===Rd||a.match_length===Q&&a.strstart-a.match_start>4096)&&(a.match_length=Q-1)),a.prev_length>=Q&&a.match_length<=a.prev_length){f=a.strstart+a.lookahead-Q,E=Ge(a,a.strstart-1-a.prev_match,a.prev_length-Q),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=f&&(a.ins_h=Je(a,a.ins_h,a.window[a.strstart+Q-1]),y=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=Q-1,a.strstart++,E&&(Ot(a,!1),a.strm.avail_out===0))return wt}else if(a.match_available){if(E=Ge(a,0,a.window[a.strstart-1]),E&&Ot(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return wt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(E=Ge(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<Q-1?a.strstart:Q-1,p===qe?(Ot(a,!0),a.strm.avail_out===0?ms:$s):a.last_lit&&(Ot(a,!1),a.strm.avail_out===0)?wt:li},Fd=(a,p)=>{let y,E,f,R,T=a.window;for(;;){if(a.lookahead<=We){if(ys(a),a.lookahead<=We&&p===ps)return wt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=Q&&a.strstart>0&&(f=a.strstart-1,E=T[f],E===T[++f]&&E===T[++f]&&E===T[++f])){R=a.strstart+We;do;while(E===T[++f]&&E===T[++f]&&E===T[++f]&&E===T[++f]&&E===T[++f]&&E===T[++f]&&E===T[++f]&&E===T[++f]&&f<R);a.match_length=We-(R-f),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=Q?(y=Ge(a,1,a.match_length-Q),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(y=Ge(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),y&&(Ot(a,!1),a.strm.avail_out===0))return wt}return a.insert=0,p===qe?(Ot(a,!0),a.strm.avail_out===0?ms:$s):a.last_lit&&(Ot(a,!1),a.strm.avail_out===0)?wt:li},$d=(a,p)=>{let y;for(;;){if(a.lookahead===0&&(ys(a),a.lookahead===0)){if(p===ps)return wt;break}if(a.match_length=0,y=Ge(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,y&&(Ot(a,!1),a.strm.avail_out===0))return wt}return a.insert=0,p===qe?(Ot(a,!0),a.strm.avail_out===0?ms:$s):a.last_lit&&(Ot(a,!1),a.strm.avail_out===0)?wt:li};function me(a,p,y,E,f){this.good_length=a,this.max_lazy=p,this.nice_length=y,this.max_chain=E,this.func=f}let ui=[new me(0,0,0,0,Bd),new me(4,4,8,4,hn),new me(4,5,16,8,hn),new me(4,6,32,32,hn),new me(4,4,16,16,zs),new me(8,16,32,32,zs),new me(8,16,128,128,zs),new me(8,32,128,256,zs),new me(32,128,258,1024,zs),new me(32,258,258,4096,zs)],zd=a=>{a.window_size=2*a.w_size,Xe(a.head),a.max_lazy_match=ui[a.level].max_lazy,a.good_match=ui[a.level].good_length,a.nice_match=ui[a.level].nice_length,a.max_chain_length=ui[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=Q-1,a.match_available=0,a.ins_h=0};function Gd(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=tr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ld*2),this.dyn_dtree=new Uint16Array((2*kd+1)*2),this.bl_tree=new Uint16Array((2*xd+1)*2),Xe(this.dyn_ltree),Xe(this.dyn_dtree),Xe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Vd+1),this.heap=new Uint16Array(2*cn+1),Xe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*cn+1),Xe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Ca=a=>{if(!a||!a.state)return Ye(a,ee);a.total_in=a.total_out=0,a.data_type=Od;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?er:gs,a.adler=p.wrap===2?0:1,p.last_flush=ps,Ed(p),ge},Ia=a=>{let p=Ca(a);return p===ge&&zd(a.state),p},qd=(a,p)=>!a||!a.state||a.state.wrap!==2?ee:(a.state.gzhead=p,ge),Pa=(a,p,y,E,f,R)=>{if(!a)return ee;let T=1;if(p===bd&&(p=6),E<0?(T=0,E=-E):E>15&&(T=2,E-=16),f<1||f>Nd||y!==tr||E<8||E>15||p<0||p>9||R<0||R>Id)return Ye(a,ee);E===8&&(E=9);let P=new Gd;return a.state=P,P.strm=a,P.wrap=T,P.gzhead=null,P.w_bits=E,P.w_size=1<<P.w_bits,P.w_mask=P.w_size-1,P.hash_bits=f+7,P.hash_size=1<<P.hash_bits,P.hash_mask=P.hash_size-1,P.hash_shift=~~((P.hash_bits+Q-1)/Q),P.window=new Uint8Array(P.w_size*2),P.head=new Uint16Array(P.hash_size),P.prev=new Uint16Array(P.w_size),P.lit_bufsize=1<<f+6,P.pending_buf_size=P.lit_bufsize*4,P.pending_buf=new Uint8Array(P.pending_buf_size),P.d_buf=1*P.lit_bufsize,P.l_buf=3*P.lit_bufsize,P.level=p,P.strategy=R,P.method=y,Ia(a)},Wd=(a,p)=>Pa(a,p,tr,Md,Dd,Pd),Yd=(a,p)=>{let y,E;if(!a||!a.state||p>Aa||p<0)return a?Ye(a,ee):ee;let f=a.state;if(!a.output||!a.input&&a.avail_in!==0||f.status===ci&&p!==qe)return Ye(a,a.avail_out===0?an:ee);f.strm=a;let R=f.last_flush;if(f.last_flush=p,f.status===er)if(f.wrap===2)a.adler=0,it(f,31),it(f,139),it(f,8),f.gzhead?(it(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),it(f,f.gzhead.time&255),it(f,f.gzhead.time>>8&255),it(f,f.gzhead.time>>16&255),it(f,f.gzhead.time>>24&255),it(f,f.level===9?2:f.strategy>=Zi||f.level<2?4:0),it(f,f.gzhead.os&255),f.gzhead.extra&&f.gzhead.extra.length&&(it(f,f.gzhead.extra.length&255),it(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(a.adler=ze(a.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=ln):(it(f,0),it(f,0),it(f,0),it(f,0),it(f,0),it(f,f.level===9?2:f.strategy>=Zi||f.level<2?4:0),it(f,jd),f.status=gs);else{let T=tr+(f.w_bits-8<<4)<<8,P=-1;f.strategy>=Zi||f.level<2?P=0:f.level<6?P=1:f.level===6?P=2:P=3,T|=P<<6,f.strstart!==0&&(T|=Ud),T+=31-T%31,f.status=gs,hi(f,T),f.strstart!==0&&(hi(f,a.adler>>>16),hi(f,a.adler&65535)),a.adler=1}if(f.status===ln)if(f.gzhead.extra){for(y=f.pending;f.gzindex<(f.gzhead.extra.length&65535)&&!(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>y&&(a.adler=ze(a.adler,f.pending_buf,f.pending-y,y)),Ke(a),y=f.pending,f.pending===f.pending_buf_size));)it(f,f.gzhead.extra[f.gzindex]&255),f.gzindex++;f.gzhead.hcrc&&f.pending>y&&(a.adler=ze(a.adler,f.pending_buf,f.pending-y,y)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=sr)}else f.status=sr;if(f.status===sr)if(f.gzhead.name){y=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>y&&(a.adler=ze(a.adler,f.pending_buf,f.pending-y,y)),Ke(a),y=f.pending,f.pending===f.pending_buf_size)){E=1;break}f.gzindex<f.gzhead.name.length?E=f.gzhead.name.charCodeAt(f.gzindex++)&255:E=0,it(f,E)}while(E!==0);f.gzhead.hcrc&&f.pending>y&&(a.adler=ze(a.adler,f.pending_buf,f.pending-y,y)),E===0&&(f.gzindex=0,f.status=ir)}else f.status=ir;if(f.status===ir)if(f.gzhead.comment){y=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>y&&(a.adler=ze(a.adler,f.pending_buf,f.pending-y,y)),Ke(a),y=f.pending,f.pending===f.pending_buf_size)){E=1;break}f.gzindex<f.gzhead.comment.length?E=f.gzhead.comment.charCodeAt(f.gzindex++)&255:E=0,it(f,E)}while(E!==0);f.gzhead.hcrc&&f.pending>y&&(a.adler=ze(a.adler,f.pending_buf,f.pending-y,y)),E===0&&(f.status=rr)}else f.status=rr;if(f.status===rr&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&Ke(a),f.pending+2<=f.pending_buf_size&&(it(f,a.adler&255),it(f,a.adler>>8&255),a.adler=0,f.status=gs)):f.status=gs),f.pending!==0){if(Ke(a),a.avail_out===0)return f.last_flush=-1,ge}else if(a.avail_in===0&&ba(p)<=ba(R)&&p!==qe)return Ye(a,an);if(f.status===ci&&a.avail_in!==0)return Ye(a,an);if(a.avail_in!==0||f.lookahead!==0||p!==ps&&f.status!==ci){let T=f.strategy===Zi?$d(f,p):f.strategy===Cd?Fd(f,p):ui[f.level].func(f,p);if((T===ms||T===$s)&&(f.status=ci),T===wt||T===ms)return a.avail_out===0&&(f.last_flush=-1),ge;if(T===li&&(p===wd?_d(f):p!==Aa&&(vd(f,0,0,!1),p===Ad&&(Xe(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),Ke(a),a.avail_out===0))return f.last_flush=-1,ge}return p!==qe?ge:f.wrap<=0?Ta:(f.wrap===2?(it(f,a.adler&255),it(f,a.adler>>8&255),it(f,a.adler>>16&255),it(f,a.adler>>24&255),it(f,a.total_in&255),it(f,a.total_in>>8&255),it(f,a.total_in>>16&255),it(f,a.total_in>>24&255)):(hi(f,a.adler>>>16),hi(f,a.adler&65535)),Ke(a),f.wrap>0&&(f.wrap=-f.wrap),f.pending!==0?ge:Ta)},Xd=a=>{if(!a||!a.state)return ee;let p=a.state.status;return p!==er&&p!==ln&&p!==sr&&p!==ir&&p!==rr&&p!==gs&&p!==ci?Ye(a,ee):(a.state=null,p===gs?Ye(a,Td):ge)},Jd=(a,p)=>{let y=p.length;if(!a||!a.state)return ee;let E=a.state,f=E.wrap;if(f===2||f===1&&E.status!==er||E.lookahead)return ee;if(f===1&&(a.adler=_a(a.adler,p,y,0)),E.wrap=0,y>=E.w_size){f===0&&(Xe(E.head),E.strstart=0,E.block_start=0,E.insert=0);let Z=new Uint8Array(E.w_size);Z.set(p.subarray(y-E.w_size,y),0),p=Z,y=E.w_size}let R=a.avail_in,T=a.next_in,P=a.input;for(a.avail_in=y,a.next_in=0,a.input=p,ys(E);E.lookahead>=Q;){let Z=E.strstart,z=E.lookahead-(Q-1);do E.ins_h=Je(E,E.ins_h,E.window[Z+Q-1]),E.prev[Z&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=Z,Z++;while(--z);E.strstart=Z,E.lookahead=Q-1,ys(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=Q-1,E.match_available=0,a.next_in=T,a.input=P,a.avail_in=R,E.wrap=f,ge};var Kd=Wd,Qd=Pa,Zd=Ia,tf=Ca,ef=qd,sf=Yd,rf=Xd,nf=Jd,of="pako deflate (from Nodeca project)",di={deflateInit:Kd,deflateInit2:Qd,deflateReset:Zd,deflateResetKeep:tf,deflateSetHeader:ef,deflate:sf,deflateEnd:rf,deflateSetDictionary:nf,deflateInfo:of};let af=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var cf=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let y=p.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(let E in y)af(y,E)&&(a[E]=y[E])}}return a},lf=a=>{let p=0;for(let E=0,f=a.length;E<f;E++)p+=a[E].length;let y=new Uint8Array(p);for(let E=0,f=0,R=a.length;E<R;E++){let T=a[E];y.set(T,f),f+=T.length}return y},Oa={assign:cf,flattenChunks:lf};let Na=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Na=!1}let fi=new Uint8Array(256);for(let a=0;a<256;a++)fi[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;fi[254]=fi[254]=1;var hf=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,y,E,f,R,T=a.length,P=0;for(f=0;f<T;f++)y=a.charCodeAt(f),(y&64512)===55296&&f+1<T&&(E=a.charCodeAt(f+1),(E&64512)===56320&&(y=65536+(y-55296<<10)+(E-56320),f++)),P+=y<128?1:y<2048?2:y<65536?3:4;for(p=new Uint8Array(P),R=0,f=0;R<P;f++)y=a.charCodeAt(f),(y&64512)===55296&&f+1<T&&(E=a.charCodeAt(f+1),(E&64512)===56320&&(y=65536+(y-55296<<10)+(E-56320),f++)),y<128?p[R++]=y:y<2048?(p[R++]=192|y>>>6,p[R++]=128|y&63):y<65536?(p[R++]=224|y>>>12,p[R++]=128|y>>>6&63,p[R++]=128|y&63):(p[R++]=240|y>>>18,p[R++]=128|y>>>12&63,p[R++]=128|y>>>6&63,p[R++]=128|y&63);return p};let Ma=(a,p=a.length)=>{if(p<65534&&a.subarray&&Na)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let y="";for(let E=0;E<p;E++)y+=String.fromCharCode(a[E]);return y};var uf=(a,p)=>{let y=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let E,f,R=new Array(y*2);for(f=0,E=0;E<y;){let T=a[E++];if(T<128){R[f++]=T;continue}let P=fi[T];if(P>4){R[f++]=65533,E+=P-1;continue}for(T&=P===2?31:P===3?15:7;P>1&&E<y;)T=T<<6|a[E++]&63,P--;if(P>1){R[f++]=65533;continue}T<65536?R[f++]=T:(T-=65536,R[f++]=55296|T>>10&1023,R[f++]=56320|T&1023)}return Ma(R,f)},df=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let y=p-1;for(;y>=0&&(a[y]&192)===128;)y--;return y<0||y===0?p:y+fi[a[y]]>p?y:p},Da={string2buf:hf,buf2string:uf,utf8border:df};function ff(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var pf=ff;let ka=Object.prototype.toString,{Z_NO_FLUSH:gf,Z_SYNC_FLUSH:mf,Z_FULL_FLUSH:yf,Z_FINISH:Ef,Z_OK:nr,Z_STREAM_END:vf,Z_DEFAULT_COMPRESSION:Sf,Z_DEFAULT_STRATEGY:_f,Z_DEFLATED:wf}=wa;function or(a){this.options=Oa.assign({level:Sf,method:wf,chunkSize:16384,windowBits:15,memLevel:8,strategy:_f},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new pf,this.strm.avail_out=0;let y=di.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(y!==nr)throw new Error(Qi[y]);if(p.header&&di.deflateSetHeader(this.strm,p.header),p.dictionary){let E;if(typeof p.dictionary=="string"?E=Da.string2buf(p.dictionary):ka.call(p.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(p.dictionary):E=p.dictionary,y=di.deflateSetDictionary(this.strm,E),y!==nr)throw new Error(Qi[y]);this._dict_set=!0}}or.prototype.push=function(a,p){let y=this.strm,E=this.options.chunkSize,f,R;if(this.ended)return!1;for(p===~~p?R=p:R=p===!0?Ef:gf,typeof a=="string"?y.input=Da.string2buf(a):ka.call(a)==="[object ArrayBuffer]"?y.input=new Uint8Array(a):y.input=a,y.next_in=0,y.avail_in=y.input.length;;){if(y.avail_out===0&&(y.output=new Uint8Array(E),y.next_out=0,y.avail_out=E),(R===mf||R===yf)&&y.avail_out<=6){this.onData(y.output.subarray(0,y.next_out)),y.avail_out=0;continue}if(f=di.deflate(y,R),f===vf)return y.next_out>0&&this.onData(y.output.subarray(0,y.next_out)),f=di.deflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===nr;if(y.avail_out===0){this.onData(y.output);continue}if(R>0&&y.next_out>0){this.onData(y.output.subarray(0,y.next_out)),y.avail_out=0;continue}if(y.avail_in===0)break}return!0},or.prototype.onData=function(a){this.chunks.push(a)},or.prototype.onEnd=function(a){a===nr&&(this.result=Oa.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function Af(a,p){p=p||{};let y=new or(p);if(y.push(a,!0),y.err)throw y.msg||Qi[y.err];return y.result}function Tf(a,p){return p=p||{},p.gzip=!0,Af(a,p)}return(a,p,y)=>{let E=Tf(a);return p==="base64"?E=btoa(Ma(E)):E=E.buffer,y&&y(E),E}}var Sv=(()=>{class s extends lh{constructor(){super(),this.algorithm=Hi.GZIP,this.gb=Eo(),this.compress=(i,n,o)=>this.om.compress(i,n).then(o);let e=typeof CompressionStream!="undefined"&&!!self.CompressionStream?wv:_v;this.om=new e,vv.create(e,{getPakoCompressor:Eo}).then(i=>{this.om=i})}compressSync(t,e){try{return this.gb(t,e)}catch(i){throw ot.warn(i),i}}}return s})(),_v=(()=>{class s{constructor(){this.mb=Eo()}compress(t,e){return Promise.resolve(this.mb(t,e))}}return s})(),wv=(()=>{class s{yb(t){return new Promise(e=>{let i=new FileReader;i.onload=n=>e(n.target.result.split(",")[1]),i.readAsDataURL(new Blob([t]))})}compress(t,e){let i=new Response(t).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();return e==="base64"?n.then(o=>this.yb(o)):n}}return s})(),Av=(()=>{class s extends lh{constructor(){super(...arguments),this.algorithm=Hi.UNCOMPRESSED,this.compress=(t,e,i)=>{i(this.compressSync(t,e))},this.compressSync=(t,e)=>t}}return s})(),du=(()=>{class s{static create(t=!0){return this.instance?this.instance:t&&!yv.isCompressionEnabled()?new Av:this.instance=new Sv}}return s})(),Tv=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},bv=5e3,Rv=(()=>{class s extends bl{constructor(t,e,i){super(t,e),this.Hr=null,this.Eb=(i==null?void 0:i.type)||"json",this.am=i==null?void 0:i.cacheMinutes,this.cc=i==null?void 0:i.timeout}onLoad(t){this.Br=t}onError(t){this.wo=t}onTimeout(t,e){this.Qi=t,this.cc=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.ol(t);let e=Ci.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.vb(i,this.Eb)}abort(){this.Hr&&(this.Hr.abort(),this.Hr=null)}isInProgress(){return this.Hr!==null}vb(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.wo)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.Qi)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.Br)===null||o===void 0||o.call(this,this.Sb(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.wo)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Hr=null},n.timeout=(i=this.cc)!==null&&i!==void 0?i:bv,this.Hr=n,n.send()}Sb(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}ol(t){let e;this.am?e=`${Tv(this.am)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),Cv=2e4,Iv=(()=>{class s{constructor(t){var e,i;this.Qe={},this.Cu={},this.cm=n=>{for(let o of n){let{metadata:c,events:l}=o;this.send(l,c)}},this.Bi=t.endpoint,this.Ao=t.compressionOpts,this.le=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.Iu=t.contentType,this.worker=!!t.worker,this.Pu=(i=t.disableRequestCounting)!==null&&i!==void 0?i:!1,this.le&&this.le.recover(this.cm)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Qe[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Qe[e]}):this.Qe={}}send(t,e){t=t!=null?t:"";let i=e||{...this.Qe},n=!("ct"in i),o=this.Iu==="application/json"||typeof t!="string"&&!this._b(t);"ct"in i||(!this.Ao||!n?i.ct=Hi.UNCOMPRESSED:i.ct=this.Ao.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(u=>`${encodeURIComponent(u)}=${encodeURIComponent(i[u])}`).join("&"),h=`${this.Bi}?${l}`;if(Hf(this.mandatoryParameters,u=>i[u]==null)){ot.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Ao&&n&&typeof c=="string"?this.Ao.compressor(c,this.Ao.compressionOutputType,u=>this.lm(h,i,u)):this.lm(h,i,c)}onLoad(t){this.Br=t}onError(t){this.wo=t}onTimeout(t,e){this.Qi=t,this.cc=e}abort(){this.hm&&this.hm()}setRequestHeader(t,e){this.Cu[t]=e}getQueryParams(){return this.Qe}_b(t){return t&&t.byteLength!==void 0}lm(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t,!0),this.Iu&&n.setRequestHeader("Content-Type",this.Iu),n.onload=()=>{if(this.le&&this.le.recover(this.cm),this.Br){let c={params:e,responseText:n.responseText,status:n.status};this.Br(c)}this.Pu||H.counters.requestCounts.count(this.Bi)},n.onerror=()=>{this.le&&this.le.save({key:o,metadata:e,events:i}),this.Pu||H.counters.requestErrors.count(this.Bi),this.wo&&this.wo({params:e})},n.timeout=this.cc||Cv,n.ontimeout=()=>{this.Pu||H.counters.requestTimeouts.count(this.Bi),this.Qi&&this.Qi()},this.hm=()=>n.abort(),Object.keys(this.Cu).forEach(c=>{n.setRequestHeader(c,this.Cu[c])}),n.send(i)}}return s})(),fu=(()=>{class s{constructor(t){this.um=t}create(t,e,i,n){let o=e?{compressor:this.um.compress,compressionOutputType:e,compressionType:this.um.algorithm}:void 0;return new Iv({endpoint:t,compressionOpts:o,recoveryStorage:i,disableRequestCounting:n})}}return s})(),Pv=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),Fi=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})();var Ov=(()=>{class s{constructor(t){this.Ou=t}start(){this.Ou.onEvent(t=>this.Q(t)),this.Ou.start()}stop(){this.Ou.stop()}Q(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;L.warn(e)}}return s})(),Nv=(()=>{class s{constructor(){this.te={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){xt(this.te)}stop(){Lt(this.te)}onEvent(t){this.j=t}bb(t){if(!t)return!1;let e=t.disposition;return q(t.sourceFile)&&csArray.prototype.some.call(s.Rb,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.bb(t)&&this.j({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.Rb=["contentsquare","cdnssl.clicktale.net"],$([U("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),Mv=(()=>{class s{init(){this.lc=new Ov(new Nv),this.lc.start()}onOptout(){this.lc.stop()}onArtificialPageViewEnd(t){t&&this.lc.stop()}onAfterArtificialPageView(t){t&&this.lc.start()}}return s})(),Dv=(()=>{class s{constructor(t,e,i){this.E=t,this.C=e,this.w=i}grantReplayConsent(){if(!ls.isReplayConsentNeeded(this.E))return;let t=this.C.getSession();if(!t){this.C.grantReplayRecordingBeforeSessionStart();return}ls.isRecordingBlockedByConsent(t)&&(this.C.grantReplayRecording(t),this.w.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!ls.isReplayConsentNeeded(this.E))return;let t=this.C.getSession();if(!t){this.C.withdrawnReplayRecordingBeforeSessionStart();return}ls.isRecordingWithDrawn(t)||(this.C.withdrawnReplayRecording(t),this.w.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),pu=["replay:consent:unanonymized:granted","trackConsentGranted"],gu=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],mu=["replay:consent:startForSession:granted"],yu=["replay:consent:startForSession:withdrawn"],kv=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.It=i,this.C=n,this.w=o}init(){this.dm=new Dv(this.E,this.C,this.w),this.It.setInitialConsent(),this.ft()}ft(){this.S.register(pu,()=>{this.It.grantReplayAnonymizationConsent()}),this.S.register(gu,()=>{this.It.withdrawReplayAnonymizationConsent()}),this.S.register(mu,()=>{this.dm.grantReplayConsent()}),this.S.register(yu,()=>{this.dm.withdrawReplayConsent()})}onOptout(){this.It.removeAllConsents()}onBeforeVisitorRenewal(){this.It.removeAllConsents()}onAfterVisitorRenewal(){this.It.setInitialConsent()}onAfterVisitorCleared(){this.It.setInitialConsent()}}return s})(),ns="_cs_c",Ss=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),xv=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.Et=i}get(){let t;return this.E.cookielessTrackingEnabled?t=this.Et.getItem(ns):t=this.O.get(ns),t===null?t:Number(t)}set(t){this.E.cookielessTrackingEnabled?this.Et.setItem(ns,csString(t)):this.O.set(ns,csString(t),xo)}remove(){this.E.cookielessTrackingEnabled?this.Et.removeItem(ns):this.O.delete(ns)}handleSubdomainChange(){this.E.cookielessTrackingEnabled||(this.E.allowSubdomains?this.O.delete(ns,zr.CURRENT_DOMAIN):this.O.delete(ns,this.O.getRootDomain()))}}return s})(),Lv=(()=>{class s{constructor(t,e,i){this.E=t,this.pt=e,this.w=i}setInitialConsent(){let t=this.pt.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.E.consentRequired;return e&&t===Ss.NOT_REQUIRED||!e&&t!==Ss.NOT_REQUIRED}handleSubdomainChange(){this.pt.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.E.consentRequired?Ss.NOT_EXPRESSED:Ss.NOT_REQUIRED;this.pt.set(t)}grantReplayAnonymizationConsent(){this.E.consentRequired&&(this.pt.set(Ss.GRANTED),this.w.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.E.consentRequired&&(this.pt.set(Ss.WITHDRAWN),this.w.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.pt.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.E.consentRequired||this.pt.get()===Ss.GRANTED}getRequestParameters(){return{uc:`${this.pt.get()}`}}}return s})(),kc=512,xc=255,Dn={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},Vv=(()=>{class s{constructor(t,e){this.D=t,this.pt=e,this.re={},this.qe={}}set(t,e,i,n){let o,c;if(($t(t)||q(t))&&Number(t)>0&&Dt(e)&&Dt(i)&&!oe(e)&&!oe(i)&&this.Cb(n)){let l=this.D.anonymizePII(csString(e)),h=this.D.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,kc),csString.prototype.slice.call(h,0,xc)],c=i!=="",!st(n)||csArray.prototype.indexOf.call(Dn.SESSION,n)>=0){let u=this.getCustomVariablesSession();c?u[t]=o:delete u[t],this.setCustomVariableSession(u)}(!st(n)||csArray.prototype.indexOf.call(Dn.PAGE,n)>=0)&&(c?this.re[t]=o:delete this.re[t]),st(n)&&csArray.prototype.indexOf.call(Dn.NEXT_PAGE_ONLY,n)>=0&&(c?this.qe[t]=o:delete this.qe[t])}else throw new pt(Jo[0])}getCustomVariablesSession(){let t=this.pt.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&ne(e)?e:{}}setCustomVariableSession(t){this.pt.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.pt.remove()}removeCustomVariablesPage(){this.re={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.qe)this.qe.hasOwnProperty(i)&&(this.re[i]=this.qe[i]);for(let i in this.re)this.re.hasOwnProperty(i)&&(t[i]=this.re[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.fm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.qe).length>0)for(let t in this.qe)this.qe[t]===this.re[t]&&(delete this.re[t],delete this.qe[t])}hasCustomVariablesPage(){return this.re&&!Gn(this.re)}getCustomVariablesPage(){return this.fm(this.re)}pm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!Cf(i,1,20)||o.length>kc||c.length>xc)&&delete t[e]}}fm(t){this.pm(t);let e=Gn(t)?[]:t;return window.csJSON.stringify(e)}Cb(t){return!st(t)||q(t)||$t(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.qe)this.qe.hasOwnProperty(e)&&(this.re[e]=this.qe[e]);for(let e in this.re)this.re.hasOwnProperty(e)&&(t[e]=this.re[e]);return this.pm(t),t}}return s})(),ua=(()=>{class s{constructor(t,e,i,n){this.we=t,this.To=e,this.bo=i,this.It=n}init(){this.Ib()}shouldMaskNonTextElements(){if(this.we.anonymisationMethod!==vs.replayRecordingMaskedUrlRegexRules)return!1;if(this.we.isSMB)return this.shouldUseAnonymization();let t=this.bo.getMatchingRules(this.To.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.It&&!this.It.isReplayUnanonymizedAllowedByConsent()){switch(this.we.anonymisationMethod){case null:case vs.replayRecordingUnmaskedUrlRegex:return!(this.we.replayRecordingUnmaskedUrlRegex&&this.we.replayRecordingUnmaskedUrlRegex.test(this.To.getAnonymizedUrl()));case vs.replayRecordingUnmaskedUrlRegexRules:return!this.bo.evaluateUrl(this.To.getAnonymizedUrl())}return!0}else{switch(this.we.anonymisationMethod){case null:case vs.replayRecordingMaskedUrlRegex:return!!(this.we.replayRecordingMaskedUrlRegex&&this.we.replayRecordingMaskedUrlRegex.test(this.To.getAnonymizedUrl()));case vs.replayRecordingMaskedUrlRegexRules:return this.bo.evaluateUrl(this.To.getAnonymizedUrl())}return!1}}Ib(){this.we.anonymisationMethod===vs.replayRecordingMaskedUrlRegexRules&&this.we.replayRecordingMaskedUrlRegexRules?this.bo.setRegexRules(this.we.replayRecordingMaskedUrlRegexRules):this.we.anonymisationMethod===vs.replayRecordingUnmaskedUrlRegexRules&&this.we.replayRecordingUnmaskedUrlRegexRules&&this.bo.setRegexRules(this.we.replayRecordingUnmaskedUrlRegexRules)}}return s})();function Uv(s){return et.traverse(s,r=>{if(r.nodeType===Ue.DOCUMENT_FRAGMENT_NODE){let t=et.getProperty(r,"styles");t&&(r.adoptedStyleSheets=t)}}),s}function jv(s){if(s!=null&&s.length)return ve(s,r=>Bv(r))}function Hv(){Zt(document).visitAll(s=>{var r;if(ei(s)&&((r=s.adoptedStyleSheets)===null||r===void 0?void 0:r.length)>0){let t=jv(s.adoptedStyleSheets);et.setProperty(s,"styles",t)}})}function Bv(s){let r=[];try{r=ve(s.cssRules,t=>t.cssText)}catch{}return{cssRules:r,disabled:s.disabled}}var Eu=(()=>{class s extends be{constructor(t){super(),this.W=null,this.hc=null,this.U=null,this.ci=null,this.gm=["value","checked","src","data","alt"],this.fc={state:M.MaskedElementState.Child},this.Ob=e=>{for(let i of e){if(M.isMaskedElement(i.target)||M.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];M.isMaskedElement(o)||M.isMaskedElementChild(o)||dt(o)&&this.mm(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];mt.isConnected(o)||this.ym(o)}}},this.Nb=t}setMaskedElementSettings(t){this.Hs=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.Hs||(ot.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.Hs={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.Hs;(t=this.ci)!==null&&t!==void 0||(this.ci=this.Mb()),o.length!==0&&((e=this.W)!==null&&e!==void 0||(this.W=this.Db()),this.W.observe(o)),c.length!==0&&((i=this.hc)!==null&&i!==void 0||(this.hc=this.kb(l)),this.hc.observe(c)),(n=this.U)!==null&&n!==void 0||(this.U=new Be(this.Ob,(h,u)=>u==="added"&&this.xb(h))),this.U.observe(),csSetTimeout(this.Nb)}onStop(){var t,e,i;this.W&&(this.ym(document),this.W.disconnect()),(t=this.hc)===null||t===void 0||t.disconnect(),(e=this.U)===null||e===void 0||e.disconnect(),(i=this.ci)===null||i===void 0||i.disconnect()}Mb(){return window.ResizeObserver?new ResizeObserver(t=>{window.requestAnimationFrame(()=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})})}):null}Db(){return new ri(t=>{csArray.prototype.forEach.call(t,e=>{this.Lb(e)?this.mm(e):(this.Vb(e),this.Ub(e))})})}kb(t){return new ri(e=>{csArray.prototype.forEach.call(e,i=>this.jb(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=M.getMaskedElementDetails(t.target);if(i.state!==M.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:M.MaskedElementState.Parent,width:e.width,height:e.height};M.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:Y(t.target),width:e.width,height:e.height})}Ub(t){!this.ci||!dt(t)||Fr(t)||this.ci.observe(t)}Lb(t){let e=csNodeparentNode.apply(t);return e?M.isMaskedElement(e)||M.isMaskedElementChild(e):ei(t)?M.isMaskedElement(t.host)||M.isMaskedElementChild(t.host):!1}xb(t){(M.isMaskedElement(t.host)||M.isMaskedElementChild(t.host))&&M.setMaskedElementProperty(t,this.fc)}ym(t){Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{M.unsetMaskedElementProperty(i),t===document&&H.counters.dom.add("size",1)})}Vb(t){let e=t.getBoundingClientRect(),i={state:M.MaskedElementState.Parent,width:e.width,height:e.height};M.setMaskedElementProperty(t,i),this.Hb(t),Zt(t).visitAll(n=>n!==t&&M.setMaskedElementProperty(n,this.fc))}mm(t){M.setMaskedElementProperty(t,this.fc),Zt(t).visitAll(e=>e!==t&&M.setMaskedElementProperty(e,this.fc))}Hb(t){var e;let i=(e=et.getProperty(t,M.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.gm.length;n+=1){let o=this.gm[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&M.setMaskedAttributeProperty(t,i)}jb(t,e){var i;let n=(i=et.getProperty(t,M.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&ae.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&M.setMaskedAttributeProperty(t,n)}}return He([U()],s.prototype,"resizeObserverCallback",null),s})(),vu=(()=>{class s{constructor(){this.Mu=0,this.B=!1,this.Em="data-cs-capture",this._i=t=>{for(let e of t){if(se.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];se.isWhitelistedElement(n)||dt(n)&&this.vm(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];mt.isConnected(n)||this.Sm(n)}}}}start(){this.Mu++,!this.B&&(this.B=!0,this.Bb())}Bb(){this.W||(this.W=new ri(e=>J(e,i=>this.vm(i))));let t=this.Du?`[${this.Em}], ${this.Du}`:`[${this.Em}]`;this.W.observe(t),this.U||(this.U=new Be(this._i,(e,i)=>i==="added"&&this.Fb(e))),this.U.observe()}stop(){this.B&&(this.Mu--,this.Mu===0&&(this.B=!1,this.$b()))}$b(){this.W&&(this.Sm(document),this.W.disconnect()),this.U&&this.U.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Qs(t))this.Du=t;else if(e)throw new pt("setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Du}vm(t){Zt(t).visitAll(e=>{se.whitelistElement(e)})}Fb(t){se.isWhitelistedElement(t.host)&&se.whitelistElement(t)}Sm(t){Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{se.removeWhitelistElement(i)})}}return s})();var Su=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var Fv=(()=>{class s{constructor(){}onLoad(t){this.Br=t}onLoadCallbackExecute(){this.Br()}start(){let t=this.onLoadCallbackExecute.bind(this);this.Jb(t)}Jb(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return $([U("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),$v="csq:start-hotjar",Mr=(()=>{let s;return function(r){r.HJ_DUAL_COLLECT="one_app_tag_dc"}(s||(s={})),s})(),Lc=(()=>{class s{static set(t,e){s.wm[t]=e}static isEnabled(t){return s.wm[t]===!0}}return s.wm={[Mr.HJ_DUAL_COLLECT]:!1},s})();function _u(){return window.hjSiteSettings?(window.hjSiteSettings.features==null?void 0:csArray.prototype.indexOf.call(window.hjSiteSettings.features,Mr.HJ_DUAL_COLLECT))>-1:!1}function Vc(s){return _u()?s?!Yo(s)&&!Kl(s):!0:!1}function zv(s){return!_u()||!s?!1:Yo(s)||Kl(s)}var Gv=(()=>{class s{constructor(t,e){this.tt=t,this.Rt=e,this.xu=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.Rt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.xu=!0}disableRemoveQueryString(){this.xu=!1}get(){let t=this.xu?this.tt.removeQueryString(this.Rm()):this.Rm();return this.tt.anonymizeUrl(t,{maskingPatterns:this.Rt.getUrlMaskingPatterns()})}set(t){this.Cm=t}Rm(){if(this.Cm)return this.Cm;let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})();function Uc(s,r,t){if(!st(r)&&!st(t))return s.href;let e=st(r)?vo(r):s.pathname,i=st(t)?wu(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function vo(s){return jt(s,"/")?s:`/${s}`}function wu(s){return jt(s,"?")||s===""?s:`?${s}`}var kn=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),Au=(()=>{class s{constructor(t,e){this.Dt=t,this.tt=e,this.i0=10}overridePath(t,e){if(t===""){this.wi=void 0;return}let i=this.Im(e);i&&(this.Lu=i),this.wi=e?this.Pm(t,e):t}overrideQuery(t,e){let i=this.Im(e);i&&(this.Vu=i),this.Ro=e?this.Pm(t,e):t}computeOverriddenUrl(t){return this.r0(t)?this.getAnonymizedUrl():t}n0(t){return(typeof t=="string"||typeof t=="number")&&t in kn}r0(t){let e=this.ma(this.Dt.href);return this.ma(t)===e}ma(t){return Tl(t,"/")?csString.prototype.slice.call(t,0,-1):t}Im(t){return st(t==null?void 0:t.lifespan)&&this.n0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}o0(){return this.Lu&&this.Lu in kn}a0(){return this.Vu&&this.Vu in kn}cleanupOverrideLifespan(){this.o0()&&(this.wi=void 0,this.Lu=void 0),this.a0()&&(this.Ro=void 0,this.Vu=void 0)}getAnonymizedUrl(){let t=Uc(this.Dt,this.wi,this.Ro);return this.tt.anonymizeUrl(t)}getUrl(){return Uc(this.Dt,this.wi,this.Ro)}getAnonymizedPathAndQuery(){let t=st(this.wi)?vo(this.wi):this.Dt.pathname,e=st(this.Ro)?wu(this.Ro):this.Dt.search;return this.tt.anonymizeUrl(t+e)}getPath(){return st(this.wi)?vo(this.wi):this.Dt.pathname}getUrlProtocol(){return this.Dt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Pm(t,e){return this.c0(e)?this.l0(t):this.h0(e)?this.u0(t):t}h0(t){return!!t.decodeURI}u0(t){return this.Om(t,1,!1)}c0(t){return!!t.decodeURIDeep}l0(t){return this.Om(t,this.i0,!0)}Om(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&L.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),qv=(()=>{class s{constructor(t,e){this.S=t,this.Ts=e}init(){this.S.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ts.updateDynamicFields("emitDebugEvents",t)})}}return s})();var Wv=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})();var jc=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.N=e,this.C=i,this.Mm=n,this.ns=o}getRequestParameters(){var t;let e={...qo(),...this.E.getRequestParameters()},i=this.C.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.N.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.Mm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.Mm.getSubProjectId()}`),this.p0(e),window.heap&&!this.E.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}p0(t){if(!this.ns)return;let e=this.ns.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})();function Yv(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function Xv(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var Tu=(()=>{class s{constructor(t){this.yl=t,this.g0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.Hs={elementSelector:"",attrSelector:"",attrSelectors:[]};let e={PIISelectors:Yv(),Attributes:Xv()};this.Hs=M.getComputedSelectorSettings(e,this.Hs)}init(){this.m0()}setMaskedElementSettingsFromCommand(t){if(t=M.sanitizeSelectorUserInput(t),!M.isSelectorUserInput(t))throw new pt(Yr[0]);this.Uu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Uu(e)}getMaskedElementSettings(t){return t?this.Dm(this.g0):this.Hs}m0(){var t,e,i,n,o,c,l;let h={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&h.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(u=>{q(u.attr)&&q(u.rule)&&h.Attributes.push({selector:u.rule,attrName:u.attr})}),(l=this.yl)===null||l===void 0||l.markClicktalePIIInUse(h),this.Uu(h)}Uu(t){this.Hs=this.Dm(t)}Dm(t){return M.getComputedSelectorSettings(t,this.Hs)}}return s})(),Jv=60*1e3,Kv=30*1e3,Qv=(()=>{class s{constructor(t,e){this.C=t,this.N=e,this.ju=!1,this.y0=qr(()=>this.C.refreshSession(),Kv)}onSessionExpired(t){this.E0=t}isSessionValid(){return this.ju?!0:!(!this.C.hasValidSession()||this.C.pollCacheRefreshEvent()&&this.N.isSessionRenewed())}isCurrentPageviewValid(){let t=this.C.hasValidSession();return this.C.pollCacheRefreshEvent(!1)?!this.N.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.y0():this.v0()&&(this.km=k.now(),this.renewSession(!1))}renewSession(t){this.ju=!0,this.E0(t),this.ju=!1}v0(){return!document.hidden&&(!st(this.km)||k.now()-this.km>Jv)}}return s})(),bu=(()=>{class s{constructor(){this.W=null,this.U=null,this.B=!1,this._i=t=>{for(let e of t)if(ke.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!ke.isEditableNode(n)){if(Tr(n)||tp(n)){ke.markEditableNode(n);continue}dt(n)&&this.xm(n)}}}}start(){this.B||(this.B=!0,this.W=new ri(t=>J(t,e=>{this.xm(e)})),this.W.observe("[contenteditable]"),this.U=new Be(this._i,(t,e)=>e==="added"&&this.S0(t)),this.U.observe())}stop(){var t,e;this.B&&(this.B=!1,(t=this.W)===null||t===void 0||t.disconnect(),this.W=null,(e=this.U)===null||e===void 0||e.disconnect(),this.U=null)}xm(t){Zt(t).visitAll(e=>{ke.markEditableNode(e)})}S0(t){ke.isEditableNode(t.host)&&ke.markEditableNode(t)}}return s})();var Zv=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),Ru=(()=>{class s extends Zv{constructor(t){super(),this.w0=t,this.pi=[{boundElement:document,type:"touchstart",listener:e=>this.Q(e)},{boundElement:document,type:"touchmove",listener:e=>this.Q(e)},{boundElement:document,type:"touchend",listener:e=>this.Q(e)}],this.Co=new mo,this.Co.onGesture((e,i)=>this.Fh(e,i))}Fh(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.pi,t=>xt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.pi,t=>Lt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}Q(t){this.w0.tryToExecute("process gesture event",()=>{if(this.Co.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Co.processActionDown(t);break;case"touchmove":this.Co.processActionMove();break;case"touchend":this.Co.processActionUp(t);break}})()}static isSwipe(t){return t.type===Rt.FLICK||t.type===Rt.DRAG}}return s})(),tS=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.Z=e,this.Ei=i,this.$t=n,this.mt=o}init(){this.Z.onChildMessage((t,e,i)=>this.mt.emitIframeEvent(t,e,i)),this.Z.setSentiveStatusCallback(()=>this.$t.getSensitiveStatus()),this.Z.setRecordingContextCallback(()=>this.Ei.getRecordingContext())}onStartTracking(){this.E.iframesTracking&&this.Z.start()}onOptout(){this.E.iframesTracking&&this.Z.stop()}onSensitiveStatusChange(){if(this.E.iframesTracking){let t=this.$t.getSensitiveStatus();this.Z.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.E.iframesTracking){let t=this.Ei.getRecordingContext();this.Z.onRecordingContextChange(t)}}}return s})(),Cu=(()=>{class s extends _t{constructor(t){super(),this.E=t,this.Bu=0,this.Le=new Map,this.Vm={boundElement:window,type:"message",listener:e=>this.Fu(e)}}onChildMessage(t){this.Um=t}setRecordingContextCallback(t){this.A0=t}setSentiveStatusCallback(t){this.T0=t}onSensitiveStatusChange(t){let e=at.buildBaseMessage(O.SensitiveStatus,Xt.Parent,this.E.projectId);e.content=t;let i=at.buildBaseMessage(O.SensitiveStatus,Xt.Parent,this.E.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Le.forEach(n=>{if(n.port){let o=this.gc(n)?i:e;this.$u(n,o)}})}onRecordingContextChange(t){let e=at.buildBaseMessage(O.RecordingContext,Xt.Parent,this.E.projectId);e.content=t,this.Le.forEach(i=>{!this.gc(i)&&i.port&&this.$u(i,e)})}sendToChildren(t,e){let i=at.buildBaseMessage(t,Xt.Parent,this.E.projectId);i.content=e,this.b0(i)}onStart(){xt(this.Vm,!1),this.jm()}onStop(){this.R0(),Lt(this.Vm,!1),this.C0()}jm(){let t=this.I0();this.P0(t),csArray.prototype.forEach.call(t,e=>{if(this.O0(e)===null){let n={iframe:e};this.Le.set(this.Bu,n),this.Bu+=1}}),this.N0()}I0(){return csArray.prototype.filter.call(mt.findAllElements("iframe"),t=>this.M0(t))}P0(t){this.Le.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.D0(i,e)})}D0(t,e){e.port&&at.closeChannelPort(e.port),this.Le.delete(t)}C0(){this.Le.forEach(t=>{t.port&&at.closeChannelPort(t.port)}),this.Le.clear()}O0(t){let e=null;return this.Le.forEach((i,n)=>{e===null&&i.iframe===t&&(e=n)}),e}M0(t){return t.id!==hl&&(!t.src||jt(t.src,"about:")||zo(Al(t.src),this.E.hostnames))}b0(t){this.Le.forEach(e=>{this.$u(e,t)})}$u(t,e){let i=e.type===O.SensitiveStatus||e.type===O.RecordingContext;t.port&&(!i||t.initialStatusSent)&&at.sendChannelMessage(t.port,e)}N0(){this.Le.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.k0(e);at.sendPostMessage(t.iframe.contentWindow,"*",i)}})}R0(){let t=this.x0();this.Le.forEach(e=>{e.port?at.sendChannelMessage(e.port,t):e.iframe.contentWindow&&at.sendPostMessage(e.iframe.contentWindow,"*",t)})}k0(t){return at.buildBaseMessage(O.Discovery,Xt.Parent,this.E.projectId,t)}x0(){return at.buildBaseMessage(O.Stop,Xt.Parent,this.E.projectId)}L0(t,e){let i=this.Le.get(t);if(i===void 0){L.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.Bu})`);return}i.port=e,i.port.onmessage=n=>{this.zu(n,i)}}V0(t){if(!t.port)return;let e=at.buildBaseMessage(O.SensitiveStatus,Xt.Parent,this.E.projectId),i=this.T0();this.gc(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,at.sendChannelMessage(t.port,e)}U0(t){if(!t.port)return;let e=at.buildBaseMessage(O.RecordingContext,Xt.Parent,this.E.projectId),i=this.A0();this.gc(t)&&(i.isRecording=!1),e.content=i,at.sendChannelMessage(t.port,e)}zu(t,e){if(e===void 0){L.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,n=t.data.content;i===O.EndOfBufferedMessages?(this.V0(e),this.U0(e),e.initialStatusSent=!0):this.Um(e.iframe,i,n)}Fu(t){if(at.isMessageValid(t,Xt.Child,this.E.projectId,this.E.hostnames))switch(t.data.type){case O.Discovery:if(t.data.id===void 0){this.jm();return}if(t.ports&&t.ports.length===1&&this.Le.has(t.data.id)){this.L0(t.data.id,t.ports[0]);return}L.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case O.ChildLogMessage:this.Um(null,O.ChildLogMessage,t.data.content);break;default:L.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}gc(t){return M.isMaskedElement(t.iframe)||M.isMaskedElementChild(t.iframe)}}return s})();var Iu=(()=>{class s{constructor(t){this.yt=t}on(t,e){return i=>{this.yt.hasValidEventTarget(i)&&this.F0(i,t)&&e(i)}}F0(t,e){let i=bt(t);return ae.call(i,e)}isMatchesSelectorSupported(){return!!ae}}return s})(),eS=(()=>{class s extends _t{constructor(){super(),this.Bm=0}onStart(){L.isPerfLoggingActive()&&(this.Io=window.csSetInterval(()=>this.Fm(),s.$0))}onStop(){L.isPerfLoggingActive()&&(this.Fm(),csClearInterval(this.Io))}Fm(){this.Bm>=s.z0||H.counters.methodPerformance.flush()&&this.Bm++}}return s.$0=5e3,s.z0=5,s})(),sS=(()=>{class s{constructor(){}init(){this.mc=new eS}onStartTracking(){this.mc.start()}onOptout(){this.mc.stop()}onArtificialPageViewEnd(t){t&&this.mc.stop()}onAfterArtificialPageView(t){t&&this.mc.start()}}return s})();var Hc=(()=>{let s;return function(r){function t(n){return q(n)||$t(n)}r.isValidIdentity=t;function e(n){let o=!1;return i(n)&&(o=!!n.hash),o}r.parseIdentityOptionsHash=e;function i(n){return Dt(n)&&ne(n)&&"hash"in n}}(s||(s={})),s})(),So=["identify"],iS=["getIdentity"],Pu=["resetIdentity"];var Bc=(()=>{let s;return function(r){function t(n){return Ps(n)}r.isValidProperties=t;let e=255;function i(n){let o={};for(let c of Object.keys(n)){let l=n[c];if(q(l)||$t(l)){let h=Ct.truncate(csString(c),e);o[h]=Ct.truncate(csString(l),e)}}return o}r.sanitizeProperties=i}(s||(s={})),s})();var _o=["addUserProperties"];var rS=1024,nS=512,xn=1024,Ln="||",Mi=(()=>{let s;return function(r){function t(c,l){return q(c)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(c),Me.CHAMELEON)!==-1?Me.CHAMELEON:l}r.handleCustomEventCommandMisuse=t;function e(c,l,h){let u=i(h);return{type:W.CUSTOM_EVENT,ts:0,customEventName:Ct.truncate(c,rS,Ct.ELLIPSIS),sourceLibrary:jg(l)?l:Me.WEB,...Gn(u)?{}:{properties:u}}}r.buildCustomEvent=e;function i(c){let l={};for(let h in c){if(h.length>nS)continue;let u=c[h];if($t(u)||bi(u))l[h]=csString(u);else if(o(u))l[h]=Ct.truncate(u,xn,Ct.ELLIPSIS);else if(Ff(u)){let d=n(u);d!==""&&(l[h]=d)}}return l}r.sanitizeCustomEventProperties=i;function n(c){let l="";for(let h=0;h<c.length;h++){let u=c[h];if(!$t(u)&&!bi(u)&&!o(u))continue;let d=csString(u);if(l==="")l=Ct.truncate(d,xn,Ct.ELLIPSIS);else if(l.length+Ln.length+d.length<=xn)l+=Ln+d;else break}return l}function o(c){return q(c)&&!jr(c)&&!csString.prototype.includes.call(c,Ln)}}(s||(s={})),s})(),Ut=(()=>{class s{static buildFromCustomEvent(t,e){return this.Zm(null,t,e)}static buildFromAnalysisEvent(t,e,i){return this.Zm(t,e,i)}static Zm(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})();var oS=(()=>{class s extends _t{constructor(t,e,i,n,o,c,l,h,u,d,g,m,v,b,C,A,S,N,I,_,B){super(),this.E=t,this.Ti=e,this.zt=i,this.Wr=n,this.Ku=o,this.as=c,this.Ve=l,this.Qu=h,this.V=u,this.le=d,this.Zu=g,this.es=m,this.X=v,this.Gt=b,this.Sc=C,this.Fs=A,this.$s=S,this.td=N,this.er=I,this.ir=_,this.rr=B,this.yi=new ca,this._c=!1,this.nr=[]}init(){var t,e,i,n,o,c,l;this.Ti.onEvent(h=>this.Ut(h)),this.zt.onEvent(h=>this.Ut(h)),this.Wr.onEvent(()=>{let h=this.Wr.getRequestParameters();this.X.setQueryParams(h),this.Ve.setQueryParams(h)}),this.Zu.onEvent(h=>this.Ae(h)),this.sd(),(t=this.Sc)===null||t===void 0||t.onEvent(h=>this.Ut(h)),(e=this.er)===null||e===void 0||e.onEvent(h=>this.Ut(h)),(i=this.Fs)===null||i===void 0||i.onEvent(h=>this.Ut(h)),(n=this.$s)===null||n===void 0||n.onEvent(h=>this.Ut(h)),this._R(),(o=this.td)===null||o===void 0||o.onEvent(h=>this.Ae(h)),(c=this.ir)===null||c===void 0||c.onEvent(h=>this.Ae(h)),(l=this.rr)===null||l===void 0||l.onEvent(h=>this.Ae(h))}_R(){this.Ve.onBeaconSuccess(()=>{this.as.clearEvents()}),this.Ve.onBeaconFailure(t=>{this.wR(t)})}initStates(){let t=this.Qu.getRequestParameters(),e=this.Ku.getRequestParameters(),i=this.Wr.getRequestParameters();this.X.setQueryParams(t),this.X.setQueryParams(e),this.X.setQueryParams(i),this.Ve.setQueryParams(t),this.Ve.setQueryParams(e),this.Ve.setQueryParams(i),this.Ll()}clearStates(t){var e,i;this.Ti.flushPendingDebouncedListeners(),(e=this.Fs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.$s)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.rd(),this.sendLastMessageBeacon()):this.sendEvents(),this.Wr.reset(),this.X.removeQueryParams()}onStart(t){var e,i,n,o,c,l,h;t||(e=this.td)===null||e===void 0||e.start(),this.es.start(),this.Ti.start(),this.Wr.start(),this.zt.start(),(i=this.Sc)===null||i===void 0||i.start(),(n=this.$s)===null||n===void 0||n.start(),t||this.Zu.start(),(o=this.Fs)===null||o===void 0||o.start(),(c=this.er)===null||c===void 0||c.start(),(l=this.ir)===null||l===void 0||l.start(),(h=this.rr)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.nr,u=>{this.Ae(u)}),this.nr=[]}collectInitialEvents(){var t;(t=this.Sc)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Ae(t)}onIframeAnalysisUserEvent(t){this.Ut(t)}onExternalEvent(t){this.Q(t)}Ae(t){this.isStarted&&this.V.isCurrentPageviewValid()&&this.Q(t)}Ut(t){this.isStarted&&(this.V.refreshSession(),this.V.isSessionValid()&&this.Q(t))}Q(t){this.as.addEvent(this.AR(t)),this.as.isFull()&&this.sendEvents(),this.E.emitDebugEvents&&this.yi.emit("analysisEvent",{...t,typeName:W[t.type]})}AR(t){return t.ts=this.ki(),t}rd(){this.Ve.setQueryParams({hlm:"true"}),this._c=!0}sendLastMessageBeacon(){this.Ve.removeQueryParams(["i"]),this.Ve.setQueryParams(this.Qu.getRequestParameters()),this.Ve.setQueryParams(this.Ku.getRequestParameters()),this.Ve.send(this.as.stringifyEvents()),this.Ve.removeQueryParams(["hlm"]),this._c=!1}sendEvents(){this.as.isEmpty()||(this.Ve.removeQueryParams(["i"]),this.X.setQueryParams(this.Qu.getRequestParameters()),this.X.setQueryParams(this.Ku.getRequestParameters()),this.X.send(this.as.getEvents()),this.as.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.es.stop(),this.Ti.stop(),this.Wr.stop(),this.zt.stop(),this.Zu.stop(),(t=this.Sc)===null||t===void 0||t.stop(),(e=this.Fs)===null||e===void 0||e.stop(),(i=this.$s)===null||i===void 0||i.stop(),(n=this.er)===null||n===void 0||n.stop(),this.as.empty(),(o=this.td)===null||o===void 0||o.stop(),(c=this.ir)===null||c===void 0||c.stop(),(l=this.rr)===null||l===void 0||l.stop()}Ll(){this.ds=k.now()}ki(){return k.now()-this.ds}sd(){this.es.onEvent(t=>{var e,i;t!==ie.Visible&&((e=this.Fs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.$s)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===ie.PagehideVisible?this.rd():t===ie.PagehideHidden?(this.rd(),this.sendLastMessageBeacon()):(!this.as.isEmpty()||this._c)&&this.sendLastMessageBeacon())})}wR(t){try{(!this.as.isEmpty()||this._c)&&this.le.save({requestParameters:t,events:this.as.getEvents()})}catch{}}pushCustomEvent(t,e,i){if(!(q(t)&&!jr(t))||i!==void 0&&!Ps(i))throw new pt(ni[0]);let n=Mi.buildCustomEvent(t,e,i),o=Ut.buildFromCustomEvent(n,this.Gt);this.isStarted?this.Ae(o):csArray.prototype.push.call(this.nr,o)}}return s})(),aS=(()=>{class s extends Fi{constructor(){super(...arguments),this.supportedEventTypes=[W.CHANGE],this.TR=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=bt(t);return Br(i)&&csArray.prototype.indexOf.call(this.TR,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var ut=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})();var Ou=(()=>{class s extends Fi{constructor(t){super(),this.yt=t,this.supportedEventTypes=[W.MOUSEDOWN,W.MOUSEUP,W.CLICK,W.MOUSEOVER,W.TAP,W.DRAG,W.FLICK,W.SUBMIT,W.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.yt.getEventTargetPath(t)),e}}return s})(),Fc=65535,cS=(()=>{let s;return function(r){function t(e){let i=bt(e);if(!i||!dt(i)||!oe(i.getBoundingClientRect)||!Dt(e.pageX)||!Dt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-At.windowOffsetX(),c=e.pageY-n.top-At.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),u=Math.round(o/l*Fc),d=Math.round(c/h*Fc);return{xRel:u,yRel:d,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),lS=(()=>{class s extends Fi{constructor(t,e){super(),this.Ts=t,this.yt=e,this.supportedEventTypes=[W.MOUSEMOVE,W.CLICK],this.od=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=cS.getRelativePosition(t);if(i){let c=this.yt.getEventTargetPath(t);c!==Ve.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===W.MOUSEMOVE&&(c!==this.od||this.Ts.iframesTracking?(this.od=c,e.tgtHM=c,this.Ts.isChild||(e.tgtHMH=kl(e.tgtHM))):e.tgtHM=""))}else e.type===W.MOUSEMOVE&&(this.od="");return e}}return s})(),Nu=(()=>{class s extends Fi{constructor(t,e){super(),this.yt=t,this.$t=e,this.supportedEventTypes=[W.CLICK,W.SUBMIT,W.CHANGE,W.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.$t.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.yt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})(),$c=100,Mu=(()=>{class s extends Fi{constructor(t,e,i){super(),this.E=t,this.$t=e,this.D=i,this.supportedEventTypes=[W.TAP,W.CLICK,W.SUBMIT]}xR(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,Ho(n.parentElement)||jo(n.parentElement)||this.$t.getElementSensitiveStatus(n.parentElement)!==ut.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=$c)break;n=i.nextNode()}return!1}LR(t){let e=eo(t,"button,a");return e||(this.E.collectTargetText===to.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(Ur(csEventtarget.apply(t))){let i=this.LR(csEventtarget.apply(t));if(i&&q(i.textContent)&&!this.xR(i)&&!this.D.hasPII(i.textContent,this.E.anonymizeDigits)){let n=Ct.truncate(csString.prototype.trim.call(i.textContent),$c);n.length>0&&(e.text=n)}}return e}}return s})();function Du(s,r,t,e,i){let n=[];return csArray.prototype.push.call(n,new lS(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new Mu(s,t,new js)),s.collectHierarchy&&csArray.prototype.push.call(n,new Nu(r,t)),csArray.prototype.push.call(n,new aS,new Ou(r)),n}function ku(s,r,t,e,i){let n=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new Mu(s,t,new js)),s.collectHierarchy&&csArray.prototype.push.call(n,new Nu(r,t)),csArray.prototype.push.call(n,new Ou(r)),n}var hS=(()=>{class s extends _t{constructor(t,e){super(),this.le=t,this.X=e,this.ry=()=>{document.visibilityState==="visible"&&this.ny()}}onStart(){this.ny(),this.Kh()}onStop(){this.Qh()}getRecoveryStorage(){return this.le}ny(){let t=this.le.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.X.send(i,e)}}Kh(){document.addEventListener("visibilitychange",this.ry)}Qh(){document.removeEventListener("visibilitychange",this.ry)}}return s})(),uS=(()=>{class s{constructor(t){this.kr=t}save(t){localStorage.setItem(this.kr,csJSON.stringify(t))}clear(){localStorage.removeItem(this.kr)}recover(){let t=localStorage.getItem(this.kr);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{L.error(`Invalid item in localStorage.
         (key:${this.kr}; value:${t})`)}finally{this.clear()}return e}}return s})(),dS=50,fS=(()=>{class s{constructor(t=[]){this.Bt=t}stringifyEvents(){return csJSON.stringify(this.Bt)}addEvent(t){csArray.prototype.push.call(this.Bt,t)}eventsCount(){return this.Bt.length}clearEvents(){this.Bt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=dS}isEmpty(){return this.Bt.length===0}getEvents(){return this.Bt}}return s})(),xu=(()=>{class s{constructor(t,e,i,n=["submit"]){this.Gt=t,this.yt=e,this.qt=i,this.VR=n,this.oy="select, select *, input, textarea",this.UR="select, select *, input, textarea",this.ay="a, a *, button, button *, select, select *, input, textarea",this.Mo="input, select, textarea",this.jR="form",this.Ic=150,this.HR=400,this.cy=!1,this.Do=_r((o,c)=>this.scrollListener(o,c),this.Ic),this.ly=_r(o=>this.resizeListener(o),this.Ic),this.BR=qr(o=>this.mouseMoveListener(o),this.HR),this.FR=[{boundElement:window,type:"resize",listener:()=>this.ly()},{boundElement:document,type:"scroll",listener:o=>this.Do(o)},{boundElement:window,type:"mousemove",listener:o=>{this.BR(Yg(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.hy=[{type:"change",listener:this.qt.on(this.UR,o=>this.changeListener(o))},{type:"submit",listener:this.qt.on(this.jR,o=>this.submitListener(o))}],this.$R=[{boundElement:document,type:"mouseover",listener:this.qt.on(this.ay,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.qt.on(this.ay,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.qt.on(this.oy,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.qt.on(this.oy,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.qt.on(this.Mo,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.qt.on(this.Mo,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.qt.on(this.Mo,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.qt.on(this.Mo,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.qt.on(this.Mo,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.hy,o=>({...o,boundElement:document}))],this.F={},this.ah=(o,c)=>{switch(c){case"initial":case"added":this.Wi(o);break;case"removed":this.Yi(o);break}},this.ye=new Fs(this.ah),this.du()}Wi(t){if(br(t)){let e=this.uy();csArray.prototype.forEach.call(e,i=>xt(i))}else{let e=this.dy();csArray.prototype.forEach.call(e,i=>{xt({...i,boundElement:t})})}}Yi(t){if(br(t)){let e=this.uy();csArray.prototype.forEach.call(e,i=>Lt(i))}else{let e=this.dy();csArray.prototype.forEach.call(e,i=>{Lt({...i,boundElement:t})})}}onEvent(t){this.j=t}start(){this.ye.observe(),this.Wi(document),this.resizeListener()}stop(){this.Yi(document),this.ye.disconnect()}flushPendingDebouncedListeners(){this.Do.flushPending(),this.ly.flushPending()}fy(t){return csArray.prototype.some.call(this.VR,e=>e===t)}dy(){return this.qt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.hy,t=>!this.fy(t.type)):(L.warn("Element.matches is not implemented yet"),[])}uy(){let t=[];return csArray.prototype.push.call(t,...this.FR),this.qt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.$R):L.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.fy(e.type))}resizeListener(t){let e=ti.getScrollContainer(),i=Ur(e);i&&(this.cy=!0);let n={type:W.RESIZE,ts:0,x:i?e.clientWidth:At.windowWidth(),y:i?e.clientHeight:At.windowHeight()};t!==void 0&&(n.d=t),this.j(n)}scrollListener(t,e){let i=ti.isEventOnScrollContainer(e);!this.cy&&i&&this.resizeListener();let n={type:W.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:At.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:At.windowOffsetY(),d:t},o=Ut.buildFromAnalysisEvent(e,n,this.Gt);this.j(o)}mouseMoveListener(t){let e={type:W.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.j(i)}mouseDownListener(t){let e={type:W.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.Te(i)}mouseUpListener(t){let e={type:W.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.Te(i)}clickListener(t){let e={type:W.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.Te(i)}mouseOverListener(t){let e={type:W.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.Te(i)}mouseOutListener(t){let e={type:W.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.yt.getEventTargetPath(t)},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.Te(i)}focusInListener(t){let e={type:W.FOCUSIN,ts:0,tgt:this.yt.getEventTargetPath(t)},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.Te(i)}focusOutListener(t){let e={type:W.FOCUSOUT,ts:0,tgt:this.yt.getEventTargetPath(t)},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.Te(i)}changeListener(t){let e={type:W.CHANGE,ts:0,tgt:""},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.Te(i)}submitListener(t){let e={type:W.SUBMIT,ts:0,tgt:""},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);this.Te(i)}copyListener(t){let e={type:W.COMMAND,ts:0,tgt:this.yt.getEventTargetPath(t),key:Zs.COPY};this.Te(e)}cutListener(t){let e={type:W.COMMAND,ts:0,tgt:this.yt.getEventTargetPath(t),key:Zs.CUT};this.Te(e)}pasteListener(t){let e={type:W.COMMAND,ts:0,tgt:this.yt.getEventTargetPath(t),key:Zs.PASTE};this.Te(e)}keyUpListener(t){let e={type:W.KEYUP,ts:0,tgt:this.yt.getEventTargetPath(t),key:this.py(t)};this.Te(e)}keyDownListener(t){let e={type:W.KEYDOWN,ts:0,tgt:this.yt.getEventTargetPath(t),key:this.py(t)};this.Te(e)}py(t){let e=this.F[t.key];return e===void 0?X.ALPHANUMERICAL:e}Te(t){Dl(t)&&t.tgt!==Ve.INVALID_ELEMENT&&this.j(t)}du(){this.F[" "]=X.SPACE,this.F.Spacebar=X.SPACE,this.F.Enter=X.ENTER,this.F.Backspace=X.BACKSPACE,this.F.Delete=X.DELETE,this.F.ArrowUp=X.ARROWUP,this.F.ArrowDown=X.ARROWDOWN,this.F.ArrowLeft=X.ARROWLEFT,this.F.ArrowRight=X.ARROWRIGHT,this.F.Up=X.ARROWUP,this.F.Down=X.ARROWDOWN,this.F.Left=X.ARROWLEFT,this.F.Right=X.ARROWRIGHT,this.F.CapsLock=X.CAPSLOCK,this.F.Shift=X.SHIFT,this.F.Tab=X.TAB}}return $([U("Event handler type: resize")],s.prototype,"resizeListener",null),$([U("Event handler type: scroll")],s.prototype,"scrollListener",null),$([U("Event handler type: mouseMove"),Mt()],s.prototype,"mouseMoveListener",null),$([U("Event handler type: mouseDown"),Mt()],s.prototype,"mouseDownListener",null),$([U("Event handler type: mouseUp"),Mt()],s.prototype,"mouseUpListener",null),$([U("Event handler type: click"),Mt()],s.prototype,"clickListener",null),$([U("Event handler type: mouseOver"),Mt()],s.prototype,"mouseOverListener",null),$([U("Event handler type: mouseOut"),Mt()],s.prototype,"mouseOutListener",null),$([U("Event handler type: focusIn")],s.prototype,"focusInListener",null),$([U("Event handler type: focusOut")],s.prototype,"focusOutListener",null),$([U("Event handler type: change")],s.prototype,"changeListener",null),$([U("Event handler type: submit"),Mt()],s.prototype,"submitListener",null),$([U("Event handler type: copy")],s.prototype,"copyListener",null),$([U("Event handler type: cut")],s.prototype,"cutListener",null),$([U("Event handler type: paste")],s.prototype,"pasteListener",null),$([U("Event handler type: keyup")],s.prototype,"keyUpListener",null),$([U("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),Lu=(()=>{class s{constructor(t,e,i){this.Gt=t,this.zt=e,this.Ot=i}processGesture(t,e){switch(t.type){case Rt.TAP:this.zR(e);break;case Rt.FLICK:this.GR(t,e);break;case Rt.DRAG:this.qR(t,e);break;default:break}}zR(t){let e={type:W.TAP,ts:0,x:0,y:0,tgt:""},i=Ut.buildFromAnalysisEvent(t,e,this.Gt);i.tgt!==Ve.INVALID_ELEMENT&&this.j(i)}qR(t,e){var i,n;let o={type:W.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Ot)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Ot)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ut.buildFromAnalysisEvent(e,o,this.Gt);c.tgt!==Ve.INVALID_ELEMENT&&this.j(c)}GR(t,e){var i,n;let o={type:W.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Ot)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Ot)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ut.buildFromAnalysisEvent(e,o,this.Gt);c.tgt!==Ve.INVALID_ELEMENT&&this.j(c)}onEvent(t){this.j=t}start(){this.zt.subscribe(s.gy,(t,e)=>this.processGesture(t,e))}stop(){this.zt.unsubscribe(s.gy)}}return s.gy="AnalysisGestureTracker",$([Mt()],s.prototype,"processGesture",null),s})();var pS=(()=>{class s{constructor(){this.by=100,this.Lo=0,this.Vo=At.documentHeight(),this.Ry={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Lo=this.gd(ti.getScrollContainer()).maxScrollRate}onEvent(t){this.j=t}start(){xt(this.Ry)}stop(){Lt(this.Ry)}reset(){let t=ti.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.gd(t);this.Vo=i,this.Lo=e,this.j()}gd(t){let e=0,i=0;if(t===null)i=At.documentHeight(),e=this.rC(i);else{let n=this.nC(t);i=this.Cy(t,n),e=this.oC(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;ti.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.gd(e);(i>this.Lo||n>this.Vo)&&(this.Lo=i,n>this.Vo&&(this.Vo=n),this.j())}rC(t){let e=Math.round(this.aC()/t*100);return Math.min(e,this.by)}aC(){let t=At.windowHeight();return At.windowOffsetY()+t}oC(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.Cy(t,e),o=Math.round(i/n*100);return Math.min(o,this.by)}nC(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Cy(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Lo}`,mdh:`${this.Vo}`}}}return $([U("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),gS=(()=>{class s{constructor(t){this.Uo=t,this.jo=e=>this.processMetric(e),this.B=!1}onEvent(t){this.j=t}start(){this.B||(this.B=!0,this.Uo.onFCP(this.jo),this.Uo.onCLS(this.jo),this.Uo.onLCP(this.jo),this.Uo.onTTFB(this.jo),this.Uo.onINP(this.jo))}stop(){this.B=!1}processMetric(t){if(!this.B)return;let e={type:W.PERFORMANCE,name:t.name,val:t.value,ts:0};this.j(e)}}return $([U("Performance metric handler")],s.prototype,"processMetric",null),s})(),mS=(()=>{class s{constructor(t){this.Mc=t.performance}getRequestParameters(){if(this.cC())return{};let t=this.lC();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}lC(){let t=this.Mc.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}cC(){return!(this.Mc&&this.Mc.timing&&this.Mc.timing.loadEventEnd>0)}}return s})();var Vu=-1,ai=s=>{addEventListener("pageshow",r=>{r.persisted&&(Vu=r.timeStamp,s(r))},!0)},Ae=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},da=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},fa=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},$i=()=>{var r;let s=fa();return(r=s==null?void 0:s.activationStart)!=null?r:0},Te=(s,r=-1)=>{let t=fa(),e="navigate";return Vu>=0?e="back-forward-cache":t&&(document.prerendering||$i()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Vn=new WeakMap;function pa(s,r){return Vn.get(s)||Vn.set(s,new r),Vn.get(s)}var wo=class{constructor(){Ce(this,"t");Ce(this,"i",0);Ce(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},zi=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},ga=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Ks=-1,zc=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Dr=s=>{document.visibilityState==="hidden"&&Ks>-1&&(Ks=s.type==="visibilitychange"?s.timeStamp:0,yS())},Gc=()=>{addEventListener("visibilitychange",Dr,!0),addEventListener("prerenderingchange",Dr,!0)},yS=()=>{removeEventListener("visibilitychange",Dr,!0),removeEventListener("prerenderingchange",Dr,!0)},Uu=()=>{var s;if(Ks<0){let r=$i(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Ks=t!=null?t:zc(),Gc(),ai(()=>{setTimeout(()=>{Ks=zc(),Gc()})})}return{get firstHiddenTime(){return Ks}}},Zr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},qc=[1800,3e3],ju=(s,r={})=>{Zr(()=>{let t=Uu(),e,i=Te("FCP"),n=zi("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-$i(),0),i.entries.push(c),e(!0)))});n&&(e=Ae(s,i,qc,r.reportAllChanges),ai(o=>{i=Te("FCP"),e=Ae(s,i,qc,r.reportAllChanges),da(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},Wc=[.1,.25],ES=(s,r={})=>{ju(ga(()=>{let t,e=Te("CLS",0),i=pa(r,wo),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=zi("layout-shift",n);o&&(t=Ae(s,e,Wc,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),ai(()=>{i.i=0,e=Te("CLS",0),t=Ae(s,e,Wc,r.reportAllChanges),da(()=>t())}),setTimeout(t))}))},Hu=0,Un=1/0,mr=0,vS=s=>{for(let r of s)r.interactionId&&(Un=Math.min(Un,r.interactionId),mr=Math.max(mr,r.interactionId),Hu=mr?(mr-Un)/7+1:0)},Ao,Yc=()=>{var s;return Ao?Hu:(s=performance.interactionCount)!=null?s:0},SS=()=>{"interactionCount"in performance||Ao||(Ao=zi("event",vS,{type:"event",buffered:!0,durationThreshold:0}))},Xc=0,To=class{constructor(){Ce(this,"u",[]);Ce(this,"l",new Map);Ce(this,"m");Ce(this,"p")}v(){Xc=Yc(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((Yc()-Xc)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},Bu=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=ga(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Jc=[200,500],_S=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Zr(()=>{var c;SS();let t,e=Te("INP"),i=pa(r,To),n=l=>{Bu(()=>{for(let u of l)i.h(u);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=zi("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=Ae(s,e,Jc,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),ai(()=>{i.v(),e=Te("INP"),t=Ae(s,e,Jc,r.reportAllChanges)}))})},bo=class{constructor(){Ce(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},Kc=[2500,4e3],wS=(s,r={})=>{Zr(()=>{let t=Uu(),e,i=Te("LCP"),n=pa(r,bo),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-$i(),0),i.entries=[h],e())},c=zi("largest-contentful-paint",o);if(c){e=Ae(s,i,Kc,r.reportAllChanges);let l=ga(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>Bu(l),{capture:!0,once:!0});ai(h=>{i=Te("LCP"),e=Ae(s,i,Kc,r.reportAllChanges),da(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},Qc=[800,1800],Ro=s=>{document.prerendering?Zr(()=>Ro(s)):document.readyState!=="complete"?addEventListener("load",()=>Ro(s),!0):setTimeout(s)},AS=(s,r={})=>{let t=Te("TTFB"),e=Ae(s,t,Qc,r.reportAllChanges);Ro(()=>{let i=fa();i&&(t.value=Math.max(i.responseStart-$i(),0),t.entries=[i],e(!0),ai(()=>{t=Te("TTFB",0),e=Ae(s,t,Qc,r.reportAllChanges),e(!0)}))})},TS=(()=>{class s{onFCP(t){try{ju(t,{reportAllChanges:!0})}catch{H.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{ES(t,{reportAllChanges:!0})}catch{H.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{wS(t,{reportAllChanges:!0})}catch{H.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{AS(t,{reportAllChanges:!0})}catch{H.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{_S(t,{reportAllChanges:!0})}catch{H.counters.webVitalsErrors.count("INP")}}}return s})();var bS="csAnalysisEventsPersisted",Zc="v2/events",ni=["trackEvent"],RS="track",CS=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d,g,m,v,b,C){this.E=t,this._t=e,this.N=i,this.et=n,this.qt=o,this.S=c,this.V=l,this.zt=h,this.mt=u,this.Ht=d,this.K=g,this.$t=m,this.nt=v,this.Wt=b,this.Yt=C}init(){let t=new fS,e=this.Ht.create(`${this.E.getTrackerUri()}/${Zc}`,"base64");this.Qr=this.wC(e),this.be=this.AC(t,this.Qr.getRecoveryStorage(),e),this.be.init(),this.K.addListener(this.be),this.mt.addListener(this.be),this.S.register(ni,i=>{if(!Ps(i))throw new pt(ni[0]);this.be.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.Qr.start(),this.be.start(t)}onAfterNaturalPageView(){this.be.initStates()}onArtificialPageViewEnd(t){this.be.clearStates(!0),t&&(this.be.stop(),this.Qr.stop())}onAfterArtificialPageView(t){this.be.initStates(),t&&(this.be.start(),this.Qr.start()),this.be.collectInitialEvents()}onBeforeSessionRenewal(){this.be.clearStates(),this.be.stop(),this.Qr.stop()}onOptout(){this.be.stop(),this.Qr.stop()}AC(t,e,i){var n,o;let c=new mS(window),l=new pS,h=Du(this.E,this.et,this.$t,this.Wt,this.Yt),u=[];this.E.collectSubmit||csArray.prototype.push.call(u,"submit");let d=new xu(h,this.et,this.qt,u),g=ku(this.E,this.et,this.$t,this.Wt,this.Yt),m=new Lu(g,this.zt),v=new gS(new TS),b=new Jh,C,A,S,N=new qh(`${this.E.getTrackerUri()}/${Zc}`),I=new Pi(this._t,this.N),_,B,F,K;return new oS(this.E,d,m,l,c,t,N,I,this.V,e,v,b,i,h,C,A,S,_,B,F,K)}wC(t){return new hS(new uS(bS),t)}}return s})(),Fu=["startDataCollection","data-collection:start"],IS=["data-collection:stop"],PS=(()=>{class s{constructor(t,e){this.cs=t,this.S=e}init(){this.S.register(Fu,()=>{this.cs.startDataCollection()}),this.S.register(IS,()=>{this.cs.stopDataCollection()})}}return s})(),jn={fromSessionRenewal:!1,isRenewedVisitor:!1},OS=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.w=e,this.us=i,this.ht=n,this.ar=o,this.V=c,this.Hy=!1,this.By=0,this.Ed=!0,this.Fy=!1,this.Ws=!1,this.startDataCollection=({fromSessionRenewal:l,onAfterDataCollectionStartedCallback:h}=jn)=>{l&&this.Ws||!this.Hy?this.TC(l,h):this.bC()}}isDataCollectionStarted(){return this.Ws}tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e,onAfterDataCollectionStartedCallback:i}=jn){this.RC(t,e)&&this.startDataCollection({fromSessionRenewal:t,onAfterDataCollectionStartedCallback:i})}disableStartDataCollection(){this.Ed=!1}allowStartDataCollection({fromSessionRenewal:t}=jn){this.Ed=!0,this.Fy&&this.startDataCollection({fromSessionRenewal:t})}stopDataCollection(){this.Ws&&(this.Ws=!1,this.w.emitArtificialPageViewEnd(!0),this.ar.stop())}bC(){this.Ws||(this.Ws=!0,this.V.isSessionValid()?(this.V.refreshSession(),this.ar.start(bs.Artificial)):this.V.renewSession(!1))}RC(t,e){return e&&!this.Ws?!1:t?!0:this.E.startMode===Or.Manual?!1:!ho(this.E)&&!this.E.isHeapSideloadsStartDataCollection()&&!this.E.isCsSideloadingHeap()}TC(t,e){if(this.us.isActive()||(this.Fy=!0,this.CC()&&(this.By++,this.By<2))||!this.Ed||this.Ws&&!t)return;this.Hy=!0,this.Ws=!0,this.ht.init();let i=t?bs.Renewal:bs.Natural;this.ar.start(i);let n=()=>{this.w.emitStartTracking(t),typeof e=="function"&&e()};mt.onDocumentLoaded(n)}CC(){return ho(this.E)&&this.E.isCsSideloadingHeap()}}return s})();var NS=(()=>{class s{constructor(t,e,i=!1){this.Rt=t,this.tt=e,this.An=i}addUrlMaskingPattern(t){this.Rt.addUrlMaskingPattern(t)}anonymize(t){let e=this.tt.removeQueryString(t.url),i={maskingPatterns:this.Rt.getUrlMaskingPatterns(),partialMaskingPatterns:this.Rt.getPartialUrlMaskingPatterns(),maskNames:this.An};return{...t,url:this.tt.anonymizeUrl(e,i),library:t.library?this.tt.anonymizeUrl(t.library,i):void 0}}}return s})();var MS=(()=>{let s;return function(r){function o(h,u,d=!1){let m={message:Ct.truncate(h,300,Ct.ELLIPSIS),errorType:"customError"};return(d||l(u))&&(c(u),m.attributes=u),m}r.buildCustomErrorEvent=o;function c(h){for(let u in h){let d=h[u];if(typeof d=="string"&&d.length>30&&(d=Ct.truncate(d,30,Ct.ELLIPSIS),h[u]=d),u.length>30){let g=Ct.truncate(u,30,Ct.ELLIPSIS);delete h[u],h[g]=d}}}function l(h){let u=Object.keys(h).length;return u>0&&u<=5}}(s||(s={})),s})();var DS=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,kS="$1$4CS_ANONYMIZED_NAME$3$6",xS=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,LS="CS_ANONYMIZED_PHONE",VS=(()=>{class s{constructor(t,e){this.D=t,this.tt=e}anonymize(t){return this.tt?csArray.prototype.join.call(csArray.prototype.map.call(lg(t),({content:e,isUrl:i})=>{var n;return i?(n=this.tt)===null||n===void 0?void 0:n.anonymizeUrl(e,{maskNames:!0}):this.Yy(e)}),""):this.Yy(t)}Yy(t){t=this.D.anonymizePII(t);let e=t;t=this.An(t),t!==e&&(H.counters.redactedPII.count("name"),H.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.QC(t),t!==i&&(H.counters.redactedPII.count("phone"),H.counters.redactedPII.count("phone-in-custom-error")),t}An(t){return csString.prototype.replace.call(t,DS,kS)}QC(t){return csString.prototype.replace.call(t,xS,LS)}}return s})();var US="CS_ANONYMIZED_VALUE",jS=(()=>{class s{constructor(t,e){this.D=t,this.A=e}anonymize(t){return q(t.message)&&(t.message=this.sI(t.message),t.message=this.D.anonymizePII(t.message)),q(t.filename)&&(t.filename=this.A.computeOverriddenUrl(t.filename)),t}sI(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${US}'`)}}return s})();var HS=(()=>{class s{constructor(t){this.S=t}init(){this.oE(s.xI,Il),this.oE(s.LI,Cl)}oE(t,e){this.S.register([t],(i,n)=>{!q(i)||!(q(n)||je(n))||L.error(n,`${e}${i}`)})}}return s.LI="logSnippetError",s.xI="logImplementationSnippetError",s})();var BS=(()=>{class s{constructor(){this.bd=As.Natural}setPageViewType(t){this.bd=t}getPageViewType(){return this.bd}getRequestParameters(){return{pvt:this.bd}}}return s})(),kr=["customProperties:page:add","addPageviewProperties"],xr=["customProperties:page:remove","removePageviewProperty"],Co=["customProperties:page:clear","clearPageviewProperties"],FS="addPageviewProperties",$S="removePageviewProperty",zS="clearPageviewProperties";var Lr=["customProperties:visit:add","addEventProperties"],Vr=["customProperties:visit:remove","removeEventProperty"],Io=["customProperties:visit:clear","clearEventProperties"],GS="addEventProperties",qS="removeEventProperty",WS="clearEventProperties";var YS=(()=>{class s{constructor(t,e){this.$t=t,this.E=e,this.aE=!1}enableRecordingContext(t,e,i){this.aE=!0,this.Vr=t,this.C=e,this.uo=i}getRecordingContext(){var t,e,i;if(!this.aE)return{isRecording:!1,recordingStartTimestamp:0,etrState:Kt.ETR_OFF,etrStatus:Yt.ETR_DISABLED,collectState:D.ANALYTICS_ONLY};let n=this.C.getSession();return{isRecording:this.Vr.isRecording(),useAnonymization:this.$t.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Vr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Vr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Vr.getRecordingStartTimestamp(),10),etrState:this.E.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF,etrStatus:this.uo.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:D.ANALYTICS_ONLY}}}return s})(),oi=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var ma=(()=>{class s extends _t{constructor(t,e,i,n,o,c){super(),this.Se=t,this.ht=e,this.Kt=i,this.vr=n,this.cn=o,this.it=c}onStart(){var t,e,i;this.Kt.start(),this.Se.setMaskedElementSettings(this.ht.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.Se.startIdentifier(),(e=this.vr)===null||e===void 0||e.start(),(i=this.cn)===null||i===void 0||i.start()}onStop(){var t,e;this.Kt.stop(),this.Se.stopIdentifier(),(t=this.vr)===null||t===void 0||t.stop(),(e=this.cn)===null||e===void 0||e.stop()}}return s})(),XS=(()=>{class s{constructor(t,e,i,n,o,c){this.it=t,this.ht=e,this.Jt=i,this.Kt=n,this.kn=o,this.ut=c,this.xn=$r(this.kn)}getSensitiveStatus(){var t,e;return{started:this.Jt.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Kt.getWhitelistedElementsSelector(),maskedElementSettings:this.ht.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ut)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.Jt.isStarted,i=this.it.shouldUseAnonymization();return e?M.isMaskedElement(t)||M.isMaskedElementChild(t)?ut.MASKED:Ch.shouldEncrypt(t)?ut.ENCRYPTED:ke.isEditableNode(t)?ut.ANONYMIZED:i?se.isWhitelistedElement(t)?ut.CAPTURED:ut.ANONYMIZED:ut.CAPTURED:ut.ANONYMIZED}getAttributeSensitiveStatus(t,e){if(!this.Jt.isStarted)return ut.ANONYMIZED;let i=this.it.shouldUseAnonymization();return M.isMaskedAttribute(t,e)?ut.MASKED:i?Vs(t)||se.isWhitelistedElement(t)||this.xn.has(e)?ut.CAPTURED:ut.ANONYMIZED:ut.CAPTURED}}return s})(),JS=(()=>{class s{constructor(t){this.V=t}onAfterVisitorRenewal(){this.V.renewSession(!0)}}return s})(),KS={MATCHED:{[D.ANALYTICS_ONLY]:D.ANALYTICS_ONLY_RULES_TARGETING,[D.RECORDING_GLOBAL_SAMPLING]:D.RECORDING_RULES_TARGETING,[D.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING]:D.RECORDING_RULES_TARGETING},MISSED:{[D.ANALYTICS_ONLY]:D.ANALYTICS_ONLY_RULES_TARGETING,[D.RECORDING_GLOBAL_SAMPLING]:D.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}},Hn=(()=>{let s;return function(r){let t;function e(m){t=m}r.setLogger=e;function i(m,v){for(let b of m)if(o(b,v))return!0;return!1}r.isUrlMatching=i;function n(m,v){if(q(v)){for(let b of m)if(o(b,v))return!0}else if(bi(v)){for(let b of m)if(o(b,csString(v)))return!0}return!1}r.isMatching=n;function o(m,v){let b=c(m,v);return m.negate?!b:b}function c(m,v){switch(m.rule_type==="date"&&(m.match_operation==="less_than"||m.match_operation==="greater_than")&&(v=(new csDate(v).valueOf()/1e3).toFixed(0)),m.match_operation){case"exact":switch(m.rule_type){case"string":return q(m.pattern)?csString.prototype.toLowerCase.call(v)===csString.prototype.toLowerCase.call(m.pattern):!1;case"boolean":return v===m.pattern||v===csString(m.pattern);case"number":return Dt(v)?Number(v)===Number(m.pattern):!1;default:return v===m.pattern}case"starts_with":return q(m.pattern)?csString.prototype.indexOf.call(v,m.pattern)===0:!1;case"ends_with":return q(m.pattern)?ki(v,m.pattern):!1;case"contains":return q(m.pattern)?csString.prototype.indexOf.call(v,m.pattern)!==-1:!1;case"regex":if(!q(m.pattern))return!1;try{return new csRegExp(m.pattern).test(v)}catch(b){return t==null||t.warn(`targeting.matchOperation.regex invalid ${b==null?void 0:b.message}`),!1}case"simple":return q(m.pattern)?g(v)===g(m.pattern):!1;case"greater_than":return Number(v)>Number(m.pattern);case"less_than":return Number(v)<Number(m.pattern);case"exact_date":{let b=Number(m.pattern);if(!$t(b))return!1;let C=new csDate(b*1e3);return new csDate(v).toDateString()===C.toDateString()}case"exact_days_ago":return l(m,v);case"more_than_days_ago":return h(m,v);case"less_than_days_ago":return u(m,v);case"unknown":return d(v);default:return t==null||t.warn(`targeting.matchOperation.regex not managed operation ${m.match_operation}`),!1}}function l(m,v){let b=new csDate,C=b.setDate(b.getDate()-Number(m.pattern)),A=new csDate(C);return new csDate(v).toDateString()===A.toDateString()}function h(m,v){let b=Number(m.pattern);if(!$t(b))return!1;let C=Number(b)+1,A=new csDate,S=new csDate(A);return S.setDate(A.getDate()-C),new csDate(v).getTime()<=S.getTime()}function u(m,v){let b=Number(m.pattern);if(!$t(b))return!1;if(b===0)return l(m,v);let C=new csDate,A=new csDate(C);return A.setDate(C.getDate()-b),new csDate(v).getTime()>=A.getTime()}function d(m){return Dt(m)?q(m)?csString.prototype.trim.call(m)==="":bi(m)?m===!0:$t(m)?m!==0:!1:!0}function g(m){let v=jt(m,"http://")||jt(m,"https://")?m:`https://${m}`,b=Go(v);return b!==null?csString.prototype.replace.call(b.host,/^www./,""):m}}(s||(s={})),s})(),QS=(()=>{let s;return function(r){r.URL="url"}(s||(s={})),s})(),Bn={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===QS.URL},ZS=(()=>{class s{constructor(t){this.lE=new ji,this.hE=[],this.uE=[],Hn.setLogger(t)}setTargetingRules(t){this.lE.setRegexRules(csArray.prototype.filter.call(t,Bn.isURL));for(let e of t)Bn.isLegacyURL(e)?csArray.prototype.push.call(this.hE,e):Bn.isLegacyTrigger(e)&&csArray.prototype.push.call(this.uE,e)}matchUrl(t){return Hn.isUrlMatching(this.hE,t)||this.lE.evaluateUrl(t)}matchTrigger(t){return Hn.isMatching(this.uE,t)}}return s})(),t_=(()=>{class s extends _t{constructor(t,e,i){super(),this.dE=t,this.Pd=e,this.A=i}init(){this.Od=new ZS(L),this.dE&&this.Od.setTargetingRules(this.dE)}onStart(){}checkTargetingRules(){let t=this.A.getAnonymizedUrl();this.Pd(this.Nd(t,"url"))}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Pd(this.Nd(t,"url"))}onExternalEvent(t){this.isStarted&&this.Pd(this.Nd(t.name,"trigger"))}Nd(t,e){var i,n;return e==="url"&&q(t)&&(!((i=this.Od)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.Od)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),e_=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.w=e,this.Ct=i,this.K=n,this.A=o,this.C=c,this.cs=l,this.ur=!1,this.Yo=(h=!1)=>{this.ur&&this.E.isSMB&&this.cs.allowStartDataCollection({fromSessionRenewal:h}),this.E.startMode===Or.Automatic&&this.cs.startDataCollection({fromSessionRenewal:h})},this.FI=h=>{this.ur||(this.ur=h,this.fE(),this.Yo())}}init(){this.E.isSMB&&this.cs.disableStartDataCollection(),this.ln=new t_(this.E.recordTargetingRules,this.FI,this.A),this.K.addListener(this.ln),this.ln.init()}start(){this.ln.start()}stop(){this.ln.stop()}maybeStartDataCollection(t){if(t){this.Yo(t);return}if(this.$I()){this.ur=!0,this.Yo(),this.stop();return}this.ln.checkTargetingRules()}onAfterArtificialPageView(){this.ln.checkTargetingRules()}onCollectStateChange(t){if(this.pE(t)){this.stop();return}let e=t===D.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING;!this.ur&&e||csSetTimeout(()=>this.gE(t),0)}onStartTracking(){this.fE()}$I(){let t=this.C.getSession();return!!(t&&this.pE(t.collectState))}pE(t){return t===D.RECORDING_RULES_TARGETING||t===D.ANALYTICS_ONLY_RULES_TARGETING}fE(){var t;if(this.ur){let e=this.C.getSession(),i=this.Ct.getInitialCollectState();this.gE((t=e==null?void 0:e.collectState)!==null&&t!==void 0?t:i),this.cs.isDataCollectionStarted()&&this.w.emitTargetingRulesMatched()}}gE(t){let e=KS[this.ur?"MATCHED":"MISSED"][t];e&&this.w.emitCollectStateChange(e,Kt.ETR_OFF)}}return s})(),$u=(()=>{class s{constructor(){this.mE=new Set,this.yE=[],this.Md=new Set,this.Dd=[]}addUrlMaskingPattern(t){if(this.mE.has(t))return;this.mE.add(t);let e=tc(t);csArray.prototype.push.call(this.yE,e)}getUrlMaskingPatterns(){return this.yE}resetPartialUrlMaskingPatterns(){this.Md.clear(),this.Dd=[]}addPartialUrlMaskingPattern(t){if(this.Md.has(t))return;this.Md.add(t);let e=tc(t);csArray.prototype.push.call(this.Dd,e)}getPartialUrlMaskingPatterns(){return this.Dd}}return s})(),s_=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.C=i,this.ds=k.now()}resetStartTime(){this.ds=k.now()}getSessionData(){let{projectId:t}=this.E,e=this.N.getVisitor();e==null&&L.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.C.getSession();o===null&&L.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:k.now()-this.ds}}}return s})(),zu=["clearSession"],Gu=["extendSession"];var i_=["getSessionData"],qu=["session:start:newVisitor"],Wu=["session:clear:visitor"],r_=(()=>{class s{constructor(t,e,i,n){this.E=t,this.N=e,this.C=i,this.S=n}init(){this.kd=new s_(this.E,this.N,this.C),this.S.register(zu,()=>this.C.removeSession()),this.S.register(Gu,()=>this.C.extendSessionPeriodically(),{disableApplyPending:!0}),this.S.register(i_,()=>this.kd.getSessionData(),{disableApplyPending:!0}),this.S.register(qu,()=>this.N.renewVisitor()),this.S.register(Wu,()=>{this.N.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.N.createOrUpdateVisitor(),this.C.createOrUpdateSession()}onBeforeArtificialPageView(){this.N.createOrUpdateVisitor(),this.C.createOrUpdateSession()}onAfterNaturalPageView(){this.kd.resetStartTime()}onAfterArtificialPageView(){this.kd.resetStartTime()}onOptout(){this.N.removeVisitor(),this.C.removeSession()}onCollectStateChange(t){this.C.updateCollectState(t)}}return s})(),n_=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d,g,m,v,b,C,A,S,N,I,_,B,F,K,vt,It,Gt,w,V,j,G,gt,Tt,ce,Re,ds,fs,Fe){this._t=t,this.$c=e,this.pe=i,this.N=n,this.C=o,this.V=c,this.Os=l,this.w=h,this.S=u,this.Al=d,this.E=g,this.Tl=m,this.us=v,this.bn=b,this.It=C,this.D=A,this.et=S,this.tt=N,this.A=I,this.zI=_,this.K=B,this.mt=F,this.bt=K,this.EE=vt,this.Xt=It,this.GI=Gt,this.M=w,this.Ht=V,this.O=j,this.Et=G,this.J=gt,this.Ct=Tt,this.ht=ce,this.Ye=Re,this.de=ds,this.Wt=fs,this.Yt=Fe,this.qI=$e=>{this.w.emitBeforeSessionRenewal(),this.hn(!0,$e),this.w.emitAfterSessionRenewal()},this.WI=$e=>{this.w.emitBeforeSessionRenewal(),this.Ct.refreshQuota(le=>{le!==D.QUOTA_REACHED&&(this.hn(!0,$e),this.w.emitAfterSessionRenewal())})}}start(){if(this.Tl.init(),this.us.init(),this.us.isActive())return;let t,e,i,n,o,c,l,h,u,d,g,m,v,b,C,A,S,N,I;this.M.schedule(()=>{C=new JS(this.V),m=new Iu(this.et),v=new Eu(()=>{}),A=new vu,I=new bu;let _=new ma(v,this.ht,A,N,I,this.xd());b=new XS(this.xd(),this.ht,_,A,this.E.whitelistedAttributes,S);let B=new Dm(this.w,this.S,this.ht,_,A,S,N);B.init(),this.w.addListener(B),t=new CS(this.E,this.$c,this.N,this.et,m,this.S,this.V,new Ru(L),this.mt,this.Ht,this.K,b,this.nt,this.Wt,this.Yt),e=new jm(this.S,this.C,this.E,this._t,this.pe,this.D),g=new YS(b,this.E);let F=null;F=new Cu(this.E),d=new tS(this.E,F,g,b,this.mt),d.init();let K=new BS;i=new hv(this.N,this.C,this.S,this.mt,F,this.E,K,g),n=new $m(this.E,this.$c,this.N,this.S,this.D,this.V,this.A);let vt,It;this.ar=new Om(this.E,this.S,this.w,this.$c,this.N,this.C,this.Os,this.It,this.bt,this.A,this.Xt,K,this.K,this.Ht,this.Ye,vt,this.Wt,this.Yt,It),this.vE=new r_(this.E,this.N,this.C,this.S),this.cs=new OS(this.E,this.w,this.us,this.ht,this.ar,this.V),new PS(this.cs,this.S).init(),l=new Wm(this.E,this.S,this.pe,this.$c,this.K),h=new HS(this.S),u=new sS}),this.M.schedule(()=>{this.bn.init()}),this.M.schedule(()=>{i.init()}),this.M.schedule(()=>{e.init()}),this.M.schedule(()=>{n.init()}),this.M.schedule(()=>{this.EE.init()}),this.M.schedule(()=>{this.ar.init()}),this.M.schedule(()=>{this.vE.init()}),this.M.schedule(()=>{l.init()}),this.M.schedule(()=>{this.zI.init()}),this.M.schedule(()=>{h.init()}),this.M.schedule(()=>{u.init()}),this.M.schedule(()=>{this.GI.init()}),this.M.schedule(()=>{this.w.addListener(this.vE),this.w.addListener(this.Al),this.w.addListener(t),this.w.addListener(this.bn),this.w.addListener(i),this.w.addListener(n),this.w.addListener(this.EE),this.w.addListener(this.ar),this.w.addListener(l),this.w.addListener(e),this.w.addListener(d),this.w.addListener(u),this.w.addListener(C)}),oi.isRecordingSupported()&&this.M.schedule(()=>{let _=new rv(g,this.C,this.E,this._t,this.S,this.D,this.V,v,this.Ze,this.St,this.He,this.Rt,this.w,this.K,this.mt,this.Xt,this.Ht,this.tt,this.so,this.xd(),this.Zr,S);_.init(),this.w.addListener(_),i.setRecordingService(_.recordingService)}),this.M.schedule(()=>{var _;let B,F}),this.M.schedule(()=>{t.init()}),this.M.schedule(()=>{this.E.isQuotaEnabled()?this.V.onSessionExpired(_=>{this.WI(_)}):this.V.onSessionExpired(_=>{this.qI(_)}),this.hn()})}hn(t=!1,e=!1){var i,n,o;if(this.E.hasTargetingRules()){this.Xo||(this.Xo=new e_(this.E,this.w,this.Ct,this.K,this.A,this.C,this.cs),this.w.addListener(this.Xo),this.Xo.init(),this.Xo.start(),this.S.start(),(i=this.nt)===null||i===void 0||i.start()),this.Xo.maybeStartDataCollection(t);return}this.S.start(),(n=this.nt)===null||n===void 0||n.start(),this.cs.tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e})}xd(){if(this.it)return this.it;let t=new ji;return this.it=new ua(this.E,this.A,t,this.It),this.it.init(),this.it.shouldUseAnonymization()&&H.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})();var Yu=(()=>{class s{constructor(t){this.configuration=t}}return s})(),o_=(()=>{class s extends Yu{constructor(t,e,i,n,o){super(t),this.configuration=t,this.w=e,this.Ld=i,this.A=n,this.Vd=o,this.Ud=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Ud=!0,this.Vd.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===D.QUOTA_REACHED||t.collectState===D.RECORDING_RULES_TARGETING||t.collectState===D.RECORDING_TEMPORARILY)&&(t.collectState=D.ANALYTICS_ONLY),t}computeInitialCollectState(){return ls.isReplayConsentNeeded(this.configuration)?D.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.zc()}computeInitialCollectStateFromRecordingConsentGranted(){return this.zc()}zc(){if(!oi.isRecordingSupported())return D.ANALYTICS_ONLY;let t=D.ANALYTICS_ONLY,e=Kt.ETR_OFF;return _e.percentage()<this.configuration.replayRecordingRate||this.Ld.isForceReplayRecorded()?t=D.RECORDING_GLOBAL_SAMPLING:this.Ud&&this.Vd.evaluateUrl(this.A.getAnonymizedUrl())&&(t=D.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Kt.ETR_ON),this.w.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!oi.isRecordingSupported())return D.ANALYTICS_ONLY;if(ls.isRecordingBlockedByConsent(t))return t.collectState===D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:D.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===D.RECORDING_GLOBAL_SAMPLING)return D.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF;return this.Ud&&this.Vd.evaluateUrl(this.A.getAnonymizedUrl())?(this.w.emitCollectStateChange(D.RECORDING_URL_SAMPLING,e),D.RECORDING_URL_SAMPLING):(this.w.emitCollectStateChange(D.ANALYTICS_ONLY,e),D.ANALYTICS_ONLY)}isReplayRecorded(t){return ls.isRecordingBlockedByConsent(t)?!1:t.collectState===D.RECORDING_TEMPORARILY||t.collectState===D.RECORDING_GLOBAL_SAMPLING||t.collectState===D.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return D.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})(),ue="_cs_s",Po=18e5,Fn=".",a_=13,yr=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),c_=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i,this.ae=null,this.jd=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?eh(e):null}getRawSession(t){if(t){let u=this.Hd();return ro(u)}let{sessionString:e,status:i}=this.YI(),n=ro(e);if(i!==yr.EXPIRED)return n;if(this.E.cookielessTrackingEnabled)return null;let o=this.Hd();if(!o)return null;let c=csString.prototype.split.call(o,Fn);if(!s.SE(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.XI(h),n}onCookieToSet(t){this.Mi=t}onCookieToRemove(t){this.Di=t}set(t,e=Po){var i;let n=k.now()+e,o=hm(t);o+=`${Fn}${n}`,this.JI(o,n),this.E.cookielessTrackingEnabled?this.J.setItem(ue,o):(this.O.set(ue,o,e),(i=this.Mi)===null||i===void 0||i.call(this,ue,o,e))}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(ue):(this.O.delete(ue),(t=this.Di)===null||t===void 0||t.call(this,ue)),this.KI()}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.E.allowSubdomains?this.O.delete(ue,zr.CURRENT_DOMAIN):this.O.delete(ue,this.O.getRootDomain()),this.set(t))}isValid(t){return t!==null&&Wr(t)}JI(t,e){this.ae={sessionString:t,expires:e}}YI(){return this.ae?this.ae&&k.now()<=this.ae.expires?{sessionString:this.ae.sessionString,status:yr.FOUND}:{sessionString:this.ae.sessionString,status:yr.EXPIRED}:{sessionString:this.Hd(),status:yr.NOT_FOUND}}KI(){this.ae=null}XI(t){this.ae&&(this.ae.expires=t,this.jd=!0)}isCacheRefreshed(){return this.jd}resetCacheRefreshed(){this.jd=!1}Hd(){if(this.E.cookielessTrackingEnabled){let e=this.J.getItem(ue);return!e||this._E(e)?null:e}let t=this.O.get(ue);return!t||this._E(t)?null:t}_E(t){let e=csString.prototype.split.call(t,Fn);if(!s.SE(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&k.now()>i}static SE(t){return t[t.length-1].length===a_}}return s})(),l_=(()=>{class s extends Yu{constructor(t,e,i){super(t),this.configuration=t,this.Jo=e,this.w=i,this.QI=D.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.wE=t,this.Ko=void 0,this.ZI()}init(t){this.tP();let e=Et.get(ue);if(e!==null&&Wr(e)){let i=th(e);t(this.canCollect(i),i==null?void 0:i.collectState)}else this.refreshQuota(i=>{t(i!==D.QUOTA_REACHED,i)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==D.QUOTA_REACHED}computeInitialCollectState(t){return this.Ko?(this.w.emitCollectStateChange(this.Ko,this.configuration.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF),this.Ko):(L.warn("Quota file error computeInitialCollectState() called before quota answered"),D.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===D.QUOTA_REACHED?D.QUOTA_REACHED:!oi.isRecordingSupported()&&this.isReplayRecorded(t)?D.ANALYTICS_ONLY:t.collectState===D.RECORDING_RULES_TARGETING?D.RECORDING_RULES_TARGETING:t.collectState===D.ANALYTICS_ONLY_RULES_TARGETING?D.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===D.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING?D.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING:t.collectState===D.RECORDING_GLOBAL_SAMPLING?D.RECORDING_GLOBAL_SAMPLING:D.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===D.RECORDING_GLOBAL_SAMPLING||t.collectState===D.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Ko||D.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return D.ANALYTICS_ONLY}Qo(t){this.Ko=t,this.wE&&this.wE(t)}tP(){this.Jo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Jo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Jo.onLoad(t=>this.quotaFileHandler(t))}ZI(){this.Jo.isInProgress()||this.Jo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.eP(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;L.warn(e),this.Qo(this.QI)}eP(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&_e.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?oi.isRecordingSupported()?this.Qo(D.RECORDING_GLOBAL_SAMPLING):this.Qo(D.ANALYTICS_ONLY):e&&!i?this.Qo(D.ANALYTICS_ONLY):this.Qo(D.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return D.ANALYTICS_ONLY}}return $([U("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),$([U("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),h_=(()=>{class s{constructor(t,e,i){this.E=t,this.Tn=e,this.sP=i}applyUpToDate(t){this.sP.retrieve(this.E.hostnames,e=>{let i=[this.Tn.get(),...e],n=Wl.select(i,this.E.lastTrackingDraw);this.Tn.apply(n),t()})}}return s})(),u_=(()=>{class s{constructor(t,e,i,n,o){this.N=t,this.C=e,this.ws=i,this.bt=n,this.E=o}get(){return{exclusion:this.ws.getAppliedTrackingDraw(),visitor:this.N.getVisitor(),session:this.C.getSession(),cvars:this.bt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.ws.exclude(this.E),this.N.removeVisitor(),this.C.removeSession(),this.bt.removeCustomVariablesSession()}include(t){this.ws.removeExclusion(),this.N.setVisitor(t.visitor),t.session?this.C.setSession(t.session):this.C.removeSession(),t.cvars?this.bt.setCustomVariableSession(t.cvars):this.bt.removeCustomVariablesSession()}}return s})(),d_="1.0.0",f_=(()=>{class s{constructor(t,e){this.Ie=t,this.Dt=e}retrieve(t,e){this.R=e,this.retrievedStates=[],this.Bd=csArray.prototype.map.call(csArray.prototype.filter.call(t,i=>this.iP(i)),s.getXdframeOrigin),this.Ie.onMessage(i=>{this.Sl(i)}),this.Ie.onTimeout(()=>{this._l()}),this.Ie.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.Bd,s.getXdframeUrl),i=>this.Ie.open(i))}Sl(t){if(this.wl(t)){let e=t.data;if(no.isValid(e))csArray.prototype.push.call(this.retrievedStates,e);else throw this.Ie.stop(),`Invalid domain state: ${csJSON.stringify(t.data)} from ${t.origin}`}this.rP()&&(this.Ie.stop(),this.R(csArray.prototype.map.call(this.retrievedStates,sh.fromRaw)))}_l(){L.warn("xdframe: all messages not received")}wl(t){return csArray.prototype.indexOf.call(this.Bd,t.origin)>-1}rP(){return this.retrievedStates.length===this.Bd.length}iP(t){return!Tl(this.Dt.hostname,t)}static getXdframeOrigin(t){return`https://csxd.${t}`}static getXdframeUrl(t){return`${t}/xdframe-${d_}.html`}}return s})(),p_=(()=>{class s{constructor(){this.nP=3e3,this.AE=t=>{this.handleMessage(t)}}onMessage(t){this.TE=t}onTimeout(t){this.Qi=t}start(){window.addEventListener("message",this.AE),this.oP=window.csSetTimeout(()=>{this.Qi()},this.nP)}open(t){var e;let i=document.createElement("iframe");return i.src=t,i.setAttribute("hidden",""),i.setAttribute("title","Intentionally blank"),(e=document.body)===null||e===void 0||e.appendChild(i),i}stop(){window.removeEventListener("message",this.AE),window.csClearTimeout(this.oP),this.TE=Ir,this.Qi=Ir}handleMessage(t){this.TE(t)}}return $([U("XdframeMessage")],s.prototype,"handleMessage",null),s})(),ya=60*1e3,g_=60*ya,m_=4*g_-ya,Xs=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),y_=(()=>{class s{constructor(t,e,i,n,o){this.Ce=t,this.Ct=e,this.w=i,this.aP=n,this.cP=o,this.Zo=null,this.Fd=0,this.ta=Xs.NO}setDynamicVariablesService(t){this.lP=t}createOrUpdateSession(){this.$d(),this.hP=k.now(),this.Fd=0;let t=this.bE();t===null?(t=this.uP(),this.zc(t),this.w.emitSessionCreated()):(t=this.Ct.sanitizeSessionCollectState(t),this.dP(t),t.collectState=this.Ct.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.Ct.getInitialCollectState(),t.collectState=this.Ct.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.ta=Xs.GRANTED}withdrawnReplayRecording(t){t.collectState=this.Ct.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.ta=Xs.WITHDRAWN}zc(t){this.ta===Xs.WITHDRAWN?(t.collectState=this.Ct.getRecordingConsentWithdrawn(),this.setSession(t)):this.ta===Xs.GRANTED?t.collectState=this.Ct.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.Ct.computeInitialCollectState(t),this.ta=Xs.NO}uP(){return{pageNumber:1,collectState:this.Ct.getInitialCollectState(),replayConsent:this.aP?io.NOT_EXPRESSED:io.UNNECESSARY,etrStatus:Yt.ETR_NOT_SAVED_SESSION}}dP(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.Ct.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===D.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Ce.get()}bE(){return this.Ce.get(!0)}doesSessionExist(){return this.Ce.get()!==null}setSession(t){this.Ce.set(t),this.w.emitSessionRefreshed()}refreshSession(){let t=this.bE();t&&this.setSession(t)}removeSession(){this.Ce.remove(),this.w.emitSessionRemoved()}getRecordingTypes(){let t=this.getSession(),e=this.fP(t);return this.pP(e)}pP(t){let e=[];return csArray.prototype.forEach.call(t,i=>{if(Yo(i)){let n=lm[i]||i;csArray.prototype.push.call(e,n)}}),e}fP(t){let e=[];return(t==null?void 0:t.collectState)!==void 0&&(csArray.prototype.push.call(e,t.collectState),this.cP&&csArray.prototype.push.call(e,D.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Ce.getRawSession();return this.Ce.isValid(t)}handleSubdomainChange(){this.Ce.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Ce.isCacheRefreshed();return e&&t&&this.Ce.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Zo||this.RE()}extendSession(){let t=this.getSession();return t===null?(L.warn("extendSession is trying to extend an expired session"),this.$d(),!1):(this.setSession(t),!0)}RE(){if(this.gP()){this.$d();return}this.extendSession()&&(this.mP(),this.yP())}yP(){this.Zo=window.csSetTimeout(()=>{this.RE()},Po-ya)}gP(){return m_-(k.now()+Po-this.hP)<0}$d(){this.Zo&&(window.csClearTimeout(this.Zo),this.Zo=null)}mP(){this.Fd+=1,this.lP.trackDynamicVariable("session_expiry_update",this.Fd)}}return s})();var E_=(()=>{class s{constructor(t,e,i){this.N=t,this.C=e,this.bP=i}handle(){this.N.hasAllowSubdomainsChanged()&&(this.N.handleSubdomainChange(),this.C.handleSubdomainChange(),this.bP.handleSubdomainChange())}}return s})(),$n="_cs_inc",v_=(()=>{class s{constructor(t,e){this.Dt=t,this.O=e}isForceIncluded(){return this.RP()||this.CP()}isForceReplayRecorded(){return this.IP(D.RECORDING_GLOBAL_SAMPLING)}RP(){return this.O.get($n)!==null}IP(t){return this.O.get($n)===t}CP(){return csString.prototype.indexOf.call(this.Dt.href,$n)>0}}return s})(),S_=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.ws=i}clear(){this.PP()&&(this.IE=this.N.getVisitor(),this.N.removeVisitor()),this.OP()&&this.ws.removeExclusion()}PP(){return this.N.doesVisitorExist()&&this.N.getVisitor().appliedTrackingDraw!==this.E.lastTrackingDraw}OP(){return this.ws.getAppliedTrackingDraw()!==this.E.lastTrackingDraw}restoreClearedVisitor(){this.IE&&this.N.setVisitor(this.IE)}}return s})(),__=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.E=t,this.N=e,this.ws=i,this.PE=n,this.NP=o,this.MP=c,this.DP=l,this.Ld=h}compute(t){var e,i;this.E.crossDomainTracking&&!this.E.cookielessTrackingEnabled?this.E.crossDomainSingleIframeTracking?(e=this.DP)===null||e===void 0||e.start(()=>this.Wd(t)):(i=this.MP)===null||i===void 0||i.applyUpToDate(()=>this.Wd(t)):this.Wd(t)}Wd(t){this.NP.handle(),this.PE.clear(),this.kP()?(this.PE.restoreClearedVisitor(),t(!0)):(this.ws.exclude(this.E),t(!1))}kP(){let t=_e.boolean(this.E.sampleRate);return this.Ld.isForceIncluded()||!this.ws.isExcluded()&&this.N.doesVisitorExist()||!this.ws.isExcluded()&&t}}return s})(),w_=(()=>{class s{constructor(t,e,i,n){this.E=t,this.pt=e,this.w=i,this.C=n,this.xP=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.LP(),(t=this.C)===null||t===void 0||t.removeSession()),this.VP(e),this.setVisitor(e)}LP(){return{id:Su.generate(),visitsCount:0,appliedTrackingDraw:this.E.lastTrackingDraw,creationTimestamp:Ua(),lastVisitTimestamp:0,hitTimestamp:0,expires:k.now()+this.E.visitorCookieTimeout,allowSubdomains:this.E.allowSubdomains,identityPrint:null}}VP(t){let e=Ua();this.C&&!this.C.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.E.lastTrackingDraw,this.OE=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.pt.get()}setVisitor(t){this.pt.set(t)}doesVisitorExist(){return this.pt.get()!==null}resetVisitor(){this.NE(),this.w.emitAfterVisitorCleared()}removeVisitor(){this.pt.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.E.allowSubdomains:!1}handleSubdomainChange(){this.pt.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.OE===void 0?!1:t.visitsCount!==this.OE}jP(){return!st(this.ME)||k.now()-this.ME>this.xP}renewVisitor(){this.jP()?(this.ME=k.now(),this.NE(),this.w.emitAfterVisitorRenewal()):L.warn("session:start:newVisitor is trying to renew visitor under time limit")}NE(){this.w.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),ye="_cs_id",A_=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i}onCookieToSet(t){this.Mi=t}onCookieToRemove(t){this.Di=t}get(){let t;return this.E.cookielessTrackingEnabled?t=this.J.getItem(ye):t=this.O.get(ye),t?(Jl(t)||L.warn(`Invalid visitor string: ${t}`),Xl(t)):null}set(t){var e;let i=nm(t);if(this.E.cookielessTrackingEnabled)this.J.setItem(ye,i);else{let n=new csDate(t.expires);this.O.set(ye,i,n),(e=this.Mi)===null||e===void 0||e.call(this,ye,i,n)}}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(ye):(this.O.delete(ye),(t=this.Di)===null||t===void 0||t.call(this,ye))}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.E.allowSubdomains,this.E.allowSubdomains?this.O.delete(ye,zr.CURRENT_DOMAIN):this.O.delete(ye,this.O.getRootDomain()),this.set(t))}}return s})(),T_=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.Ni=e,this.yr=i,this.M=n,this.w=o,this.J=c}initWithQuota(){if(!this.E.collectionEnabled){this.DE(),Vc()&&this.kE();return}let t=new Rv(this.E.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.Ct=new l_(this.E,t,this.w),this.Ct.init((e,i)=>{e?this.init():this.DE(),Vc(i)?this.kE():zv(i)&&(Lc.set(Mr.HJ_DUAL_COLLECT,!1),H.counters.trackedFeatures.count("dual-collection-csq-replay"))})}kE(){Lc.set(Mr.HJ_DUAL_COLLECT,!0),window.dispatchEvent(new CustomEvent($v)),H.counters.trackedFeatures.count("dual-collection-hj-replay")}HP(){this.M.schedule(()=>{var t;this.D=new js,this.tt=new Ml(this.D),this.A=new Au(window.location,this.tt),this.O=new zr(this.E,this.A,this.Ni),this.O.init(),this.Et=new Pv;let e;!((t=this.E.experimental)===null||t===void 0)&&t.checkPIIMigration&&(e=new zl,this.w.addListener(e)),this.S=new Gl([so.UXA],e),this.K=new qg,this.ht=new Tu(e),this.It=new Lv(this.E,new xv(this.E,this.O,this.Et),this.w)})}DE(){}init(){Cs.isSupported()&&Cs.setDigestSalt(this.E.projectId.toString());let t,e,i,n,o,c,l,h,u,d,g,m,v,b,C,A,S,N,I,_,B,F,K,vt,It,Gt,w,V,j;this.HP();let G=new gv;this.w.addListener(G),this.M.schedule(()=>{g=new v_(window.location,this.O),new Mv().init(),m=du.create(),d=new fu(m),this.Ct===void 0&&(this.Ct=new o_(this.E,this.w,g,this.A,new ji),this.Ct.init())}),this.M.schedule(()=>{t=new c_(this.E,this.O,this.J),e=new y_(t,this.Ct,this.w,this.E.replayConsentRequiredForSession,this.E.malkaEtrEnabled),i=new A_(this.E,this.O,this.J),n=new w_(this.E,i,this.w,e),this.yr.setContext(n,e)}),this.M.schedule(()=>{c=new E_(n,e,this.It),l=new ih(this.E,this.O,this.J),h=new mm(window.location,l),u=new gm(h),C=new S_(this.E,n,h),It=new ql(Ve,this.E);let gt;_=new Ll(It,this.E.isChild,gt),B=new Vl(It),F=new Ul(It),K=new jl,vt=new xl(_,B,F,K),A=new Gg(this.S,vt),S=new ah(this.A),N=new oh(S,this.S);let Tt=new rh(this.E,this.O,this.J);Gt=new Vv(this.D,Tt),I=new Mm(this.S,Gt);let ce=new u_(n,e,h,Gt,this.E);{let Re=new p_,ds=new f_(Re,window.location);this.E.crossDomainSingleIframeTracking||(v=new h_(this.E,ce,ds));{o=new im(this.E,this.O,t,i,l,Tt),o.init();let fs=new fm(this.E,Re);o.setStates(ce,fs)}}}),this.M.schedule(()=>{new __(this.E,n,h,C,c,v,o,g).compute(Tt=>{this.M.schedule(async()=>{var ce,Re,ds,fs;A.init();let Fe=new kv(this.E,this.S,this.It,e,this.w),$e=new dv(this.E,this.O,this.Et),le=new fv(this.w,window.location,$e),Pt=new uv(this.S,le),te=new qv(this.S,this.E),Gi=new Gv(this.tt,new $u),tn=new Qv(e,n),en,qi,sn,Wi=new jc(this.E,n,e,b),Yi=new jc(this.E,n,e,b,qi);Tt?(this.w.emitInitTracking(),new n_(Wi,Yi,m,n,e,tn,Gi,this.w,this.S,A,this.E,Pt,le,Fe,this.It,this.D,It,this.tt,this.A,te,this.K,vt,Gt,I,S,N,this.M,d,this.O,this.Et,this.J,this.Ct,this.ht,sn,en,V,j).start()):new pm(this.w,this.S,A,Pt,le,u,Fe).start()})})})}}return s})(),Ts=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(S){let N=S.source,I=S.data;if(c(I)){let _=()=>{let B=n(t,I);g(B,()=>N.postMessage("csBundleLoaded",S.origin))};e=I.token,A(i.loadBundle),l(S.origin)&&_()}}};function n(S,N){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(S,"{version}",N.version),"{token}",N.token),"{domain}",N.domain)}function o(){return e}r.getToken=o;function c(S){return S&&S.type==="csBundleInjection"&&l(S.domain)&&u(S.version)&&h(S.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(S){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(S)||r.hjDomainRegex.test(S)}r.isAuthorizedDomain=l;function h(S){return/^[a-zA-Z0-9]+$/.test(S)}r.isAuthorizedToken=h;function u(S){return/^[a-zA-Z0-9\.]+$/.test(S)}r.isAuthorizedTagVersion=u;function d(){let S=window.opener||window.parent;return window!==S&&window.addEventListener}r.isActivable=d;function g(S,N){let I=document.createElement("script");I.type="text/javascript",I.async=!0,I.src=S,I.onload=N,I.charset="utf-8",document.head.appendChild(I)}r.addScript=g;function m(S){let N=document.createElement("link");N.rel="stylesheet",N.href=S,document.head.appendChild(N)}r.addStyle=m;function v(S){return`${S}?cb=${new csDate().getTime()}`}r.addCacheBusting=v;function b(){C(i.loadBundle)}r.waitForBundleInjection=b;function C(S){window.addEventListener("message",S,!1)}r.listen=C;function A(S){window.removeEventListener("message",S,!1)}r.removeListener=A}(s||(s={})),s})(),tl="_hp_ved",b_=18e5,R_="/js/ved.js",C_="/css/ved.css",I_="/js/ved.css",P_=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),O_=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var zn=(()=>{let s;return function(r){let t=!1,e;function i(g){return e+g}function n(){let g=[i(C_),i(I_)];csArray.prototype.forEach.call(g,m=>{Ts.addStyle(m)})}function o(g){let m=new csRegExp("(^|;)[ ]*"+g+"=([^;]*)"),v=m.exec(document.cookie);return v?decodeURIComponent(v[2]):null}function c(g,m,v){let b=encodeURIComponent(g)+"="+encodeURIComponent(m),C=new csDate;C.setTime(C.getTime()+v);let A=b+"; expires="+C.toUTCString()+"; path=/";document.cookie=A}function l(){c(tl,"on",b_)}function h(){return o(tl)==="on"}r.isVLCookieEnabled=h;function u(g){window.heapV=Object.assign({},window.heap,{source:g==null?void 0:g.source,uri:e,loadArgs:g==null?void 0:g.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=u;function d(g,m){var v;if(e=g,m){let b={type:P_.StatusUpdate,value:O_.ReceivedInitMessage},C={targetOrigin:m==null?void 0:m.origin};(v=m==null?void 0:m.source)===null||v===void 0||v.postMessage(b,C)}t||(t=!0,l(),u(m),window.heapV&&(Ts.addScript(i(R_)),n()))}r.init=d}(s||(s={})),s})(),N_=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,Ts.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(_){var B;_.origin===l&&((B=_.data)===null||B===void 0?void 0:B.message)==="init"&&_.source&&(zn.init(l,_),S(h.initHeapVisualLabeler))},ping(_){typeof _.data=="string"&&_.data==="ping"&&g(_.origin)&&(c=_.origin,o=Ts.hjDomainRegex.test(_.origin)?i:_.origin,S(h.ping),A(h.insertMessageScript),m(Ts.addCacheBusting("utils.js")))},insertMessageScript:N(_=>{typeof _.data=="string"&&_.data!=="ping"&&(S(h.insertMessageScript),m(_.data))})};function u(){return Ts.getToken()}r.getToken=u;function d(){return window!==t&&window.addEventListener}r.isActivable=d;function g(_){return csArray.prototype.some.call(n,B=>B.test(_))}r.isAuthorizedDomain=g;function m(_,B){let F=document.createElement("script");F.type="text/javascript",F.async=!0;let K=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");F.src=`${K}/${e}/${_}`,F.onload=B,F.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(F),v(_)}function v(_){csString.prototype.includes.call(_,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(_,"&mode=")[1])}function b(){A(h.ping),Ts.waitForBundleInjection()}r.waitForConnection=b;function C(_){l=_,A(h.initHeapVisualLabeler),zn.isVLCookieEnabled()&&zn.init(l)}r.waitForHeapVisualLabeler=C;function A(_){window.addEventListener("message",_,!1)}r.listen=A;function S(_){window.removeEventListener("message",_,!1)}r.removeListener=S;function N(_){return function(B){B.origin===c&&_(B)}}r.secureListener=N;function I(_){c&&t.postMessage(_,c)}r.post=I}(s||(s={})),s})();var Er=window.CSFrameCommunication||N_,Xu=(()=>{class s extends Gr{constructor(t){super(),this.M=t;{let e=(i,n)=>{if(typeof n!="string"||!csString.prototype.startsWith.call(n,"on"))return;let o=csString.prototype.substring.call(n,2);return(...c)=>{n==="onInitialDomDone"&&(c=[]),document.dispatchEvent(new CustomEvent("cs-e2e-event",{detail:{type:"lifecycle",name:o,data:c}}))}};this.addListener(new Proxy({},{get:e}))}}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(t){for(let e of this.listeners)e.onAfterNaturalPageView&&e.onAfterNaturalPageView(t)}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.M.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.M.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(t=!1){for(let e of this.listeners)if(e.onArtificialPageViewEnd)try{e.onArtificialPageViewEnd(t)}catch(i){L.error(i)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(t=!1){for(let e of this.listeners)e.onAfterArtificialPageView&&e.onAfterArtificialPageView(t)}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}emitTargetingRulesMatched(){for(let t of this.listeners)t.onTargetingRulesMatched&&t.onTargetingRulesMatched()}}return $([Ht("emitStartTracking")],s.prototype,"emitStartTracking",null),s})(),M_=(()=>{class s extends Gr{emitTrackingContextResultMessage(t){for(let e of this.listeners)e.onTrackingContextResultCallback&&e.onTrackingContextResultCallback(t)}emitAfterPageViewCallback(t){for(let e of this.listeners)e.onAfterPageViewCallback&&e.onAfterPageViewCallback(t)}emitIntegrationSessionKeyCallback(t){for(let e of this.listeners)e.onIntegrationSessionKeyCallback&&e.onIntegrationSessionKeyCallback(t)}emitParentRecordingContextChange(t){for(let e of this.listeners)e.onParentRecordingContextChange&&e.onParentRecordingContextChange(t)}emitParentSensitiveStatusChange(t){for(let e of this.listeners)e.onParentSensitiveStatusChange&&e.onParentSensitiveStatusChange(t)}emitStartAnalytics(){for(let t of this.listeners)t.onStartAnalytics&&t.onStartAnalytics()}emitStopAnalytics(){for(let t of this.listeners)t.onStopAnalytics&&t.onStopAnalytics()}emitStartRecording(){for(let t of this.listeners)t.onStartRecording&&t.onStartRecording()}emitStopRecording(){for(let t of this.listeners)t.onStopRecording&&t.onStopRecording()}}return s})(),Ju=["trackTransaction"],D_=(()=>{class s{constructor(t){this.L=t}init(){this.L.register(Xr),this.L.register(Jo),this.L.register(oo),this.L.register(ao),this.L.register(Xo),this.L.register(co),this.L.register(hh),this.L.register(uh),this.L.register(gh),this.L.register(Qo),this.L.register(Jr),this.L.register(Zo),this.L.register(Ju),this.L.register(zu),this.L.register(Gu),this.L.register(ha),this.L.register(uu),this.L.register(qu),this.L.register(Wu),this.L.register(ta),this.L.register(ea),this.L.register(ru),this.L.register(pu),this.L.register(gu),this.L.register(mu),this.L.register(yu),this.L.register(nh),this.L.register(mh),this.L.register(yh),this.L.register(_o),this.L.register(So),this.L.register(iS),this.L.register(Pu),this.L.register(Lr),this.L.register(Vr),this.L.register(Io),this.L.register(kr),this.L.register(xr),this.L.register(Co),this.L.register(Fu),this.L.registerHeapLegacy(GS),this.L.registerHeapLegacy(qS),this.L.registerHeapLegacy(WS),this.L.registerHeapLegacy(FS),this.L.registerHeapLegacy($S),this.L.registerHeapLegacy(zS),this.L.register(Lr),this.L.register(Vr),this.L.register(Io),this.L.register(kr),this.L.register(xr),this.L.register(Co)}onStartTracking(){this.L.start()}onOptout(){this.L.stop()}}return s})(),k_=(()=>{class s extends _t{constructor(t,e,i){super(),this.S=t,this.I=e,this.nt=i,this.Qt=[]}onStart(){var t;this.commandsBatchReady(),(t=this.nt)===null||t===void 0||t.start()}onStop(){var t;this.Qt=[],(t=this.nt)===null||t===void 0||t.stop()}register(t){for(let e of t)this.S.register([e],(...i)=>this.send(e,i))}registerHeapLegacy(t){this.nt&&this.nt.register(t,(...e)=>this.send(t,e))}send(t,e){csArray.prototype.push.call(this.Qt,{name:t,params:e}),this.isStarted&&this.commandsBatchReady()}commandsBatchReady(){if(this.Qt.length===0)return;let t={commands:this.Qt};this.I.sendToParent(O.Commands,t),this.Qt=[]}}return $([U("Commands.iframe.commandsBatch.send")],s.prototype,"send",null),$([Hs({wait:0,mode:"trailing"}),U("send iframe commands batch")],s.prototype,"commandsBatchReady",null),s})(),x_="Buffer is full, events might be missing.",L_=(()=>{class s{constructor(t=25){this.xE=t,this.un=[]}reset(){this.un=[]}getMessages(){return this.un}addMessage(t){this.un.length<this.xE?csArray.prototype.push.call(this.un,t):this.un.length===this.xE&&(this.BP(t),csArray.prototype.push.call(this.un,t))}BP(t){t.type=O.ChildLogMessage,t.content={message:x_,errorCode:"",level:ct.warn}}}return s})(),Ku=(()=>{class s extends _t{constructor(t){super(),this.buffer=new L_(t)}}return s})(),V_=25,U_=(()=>{class s extends Ku{constructor(t,e,i,n,o){super(V_),this.E=t,this.w=e,this.Ks=i,this.oe=n,this.Ci=o,this.ls=null,this.LE={boundElement:window,type:"message",listener:c=>this.Fu(c)}}onStart(){xt(this.LE,!1),this.FP()}onStop(){Lt(this.LE,!1),this.ls&&(at.closeChannelPort(this.ls),this.ls=null)}sendToParent(t,e){let i=this.buildChildBaseMessage(t,e);this.va(i)}FP(){let t=this.buildChildBaseMessage(O.Discovery);at.sendPostMessage(window.parent,"*",t)}buildChildBaseMessage(t,e){let i=at.buildBaseMessage(t,Xt.Child,this.E.projectId);return e&&(i.content=e),i}va(t){this.ls!==null?at.sendChannelMessage(this.ls,t):this.buffer.addMessage(t)}$P(t,e){let i=at.getNewChannelMessage();this.ls=i.port1,this.ls.onmessage=o=>{this.zu(o)};let n=this.buildChildBaseMessage(O.Discovery);n.id=e,at.sendPostMessage(window.parent,t,n,[i.port2]),this.sendAllMessagesFromBuffer()}zu(t){switch(t.data.type){case O.TrackingContextResultMessage:this.Ci.emitTrackingContextResultMessage(t.data.content);break;case O.IntegrationCallback:{let e=t.data.content;e.initiator===si.AfterPageView?this.Ci.emitAfterPageViewCallback(e):e.initiator===si.GetSessionKey?this.Ci.emitIntegrationSessionKeyCallback(e):L.warn(`Iframe child received unknown IntegrationCallback type from parent : ${csJSON.stringify(t.data)}`);break}case O.Stop:this.w.emitOptout();break;case O.RecordingContext:{let e=t.data.content;this.Ks.setRecordingContext(e),this.Ci.emitParentRecordingContextChange(e);break}case O.SensitiveStatus:{let e=t.data.content;this.oe.setSensitiveStatus(e),this.Ci.emitParentSensitiveStatusChange(e);break}default:L.warn(`Iframe child received unknown channelMessage type from parent : ${csJSON.stringify(t.data)}`)}}Fu(t){if(this.ls===null&&at.isMessageValid(t,Xt.Parent,this.E.projectId,this.E.hostnames))switch(t.data.type){case O.Stop:this.w.emitOptout();break;case O.Discovery:if(!Se(t.data.id)||t.data.id<0){L.warn(`Iframe child received discovery without valid id from parent (${t.origin}) : ${csJSON.stringify(t.data)}`);return}this.$P(t.origin,t.data.id);break;default:L.warn(`Iframe child received unknown postMessage type from parent (${t.origin}) : ${csJSON.stringify(t.data)}`)}}sendAllMessagesFromBuffer(){if(this.ls===null)return;let t=this.buffer.getMessages();for(let e of t)at.sendChannelMessage(this.ls,e);this.zP(),this.buffer.reset()}zP(){let t=at.buildBaseMessage(O.EndOfBufferedMessages,Xt.Child,this.E.projectId);at.sendChannelMessage(this.ls,t)}}return s})(),Qu=(()=>{class s{constructor(t){this.E=t}isReplayUnanonymizedAllowedByConsent(){return!this.E.consentRequired}}return s})(),j_=(()=>{class s{constructor(t){this.I=t}onStartTracking(){this.I.start()}onOptout(){this.I.stop()}}return s})(),H_=(()=>{class s{constructor(t,e,i,n,o){this.Z=t,this.mt=e,this.I=i,this.Ks=n,this.oe=o}init(){this.Z.onChildMessage((t,e,i)=>this.mt.emitIframeEvent(t,e,i)),this.Z.setSentiveStatusCallback(()=>this.oe.getSensitiveStatus()),this.Z.setRecordingContextCallback(()=>this.Ks.getRecordingContext())}onStartTracking(){this.Z.start()}onOptout(){this.Z.stop()}onIframeRecordingUserEvent(t){let e={events:t,containsUserEvent:!0};this.I.sendToParent(O.RecordingEvent,e)}onIframeRecordingBrowserEvent(t){let e={events:t,containsUserEvent:!1};this.I.sendToParent(O.RecordingEvent,e)}onIframeAnalysisUserEvent(t){let e={event:t,isUserEvent:!0};this.I.sendToParent(O.AnalysisEvent,e)}onIframeAnalysisBrowserEvent(t){let e={event:t,isUserEvent:!1};this.I.sendToParent(O.AnalysisEvent,e)}onIframeJavascriptError(t){this.I.sendToParent(O.JavascriptError,t)}onIframeApiError(t){this.I.sendToParent(O.ApiError,t)}onIframeDetailedApiError(t){this.I.sendToParent(O.DetailedApiError,t)}onIframeEmerchandisingMessage(t){this.I.sendToParent(O.EmerchandisingMessage,t)}onIframeCommands(t){this.I.sendToParent(O.Commands,t)}onIframeIntegrationCallback(t){this.I.sendToParent(O.IntegrationCallback,t)}onTrackingContextRequestCallback(t){this.I.sendToParent(O.TrackingContextRequestMessage,t)}onIframeStaticResource(t){this.I.sendToParent(O.StaticResource,t)}onIframeCustomError(t){this.I.sendToParent(O.CustomError,t)}onTrackingContextResultCallback(t){this.Z.sendToChildren(O.TrackingContextResultMessage,t)}onAfterPageViewCallback(t){this.Z.sendToChildren(O.IntegrationCallback,t)}onIntegrationSessionKeyCallback(t){this.Z.sendToChildren(O.IntegrationCallback,t)}onParentRecordingContextChange(t){this.Z.sendToChildren(O.RecordingContext,t)}onParentSensitiveStatusChange(t){this.Z.sendToChildren(O.SensitiveStatus,t)}}return s})(),B_=(()=>{class s{constructor(){this.GP=50*1024*1024,this.qP=30*1024*1024,this.Yd=0,this.Xd=!1,this.Wc=new Map,this.wt=[]}async getAssetContent(t){let e=this.Wc.get(t);return e||new Promise((i,n)=>{csArray.prototype.push.call(this.wt,{assetUrl:t,successCallback:i,errorCallback:n}),this.Xd||this.WP()})}async WP(){for(this.Xd=!0;this.wt.length>0;){let{assetUrl:t,successCallback:e,errorCallback:i}=csArray.prototype.shift.call(this.wt),n=this.Wc.get(t);if(n){e(n);continue}try{let c=(await this.YP("GET",t,"blob")).target;if(c.status===200){let l=c.getResponseHeader("Content-Type"),h=Number(c.getResponseHeader("Content-Length"));if(h&&Number(h)>this.qP){let d=`asset is too big, size = ${h} bytes`;i(d);continue}let u=new csFileReader;u.onload=()=>{let g={data:csString.prototype.split.call(u.result,"base64,")[1],mimeType:l!=null?l:""};this.Yd+=h,this.Yd>this.GP&&(this.Yd=0,this.Wc.clear()),this.Wc.set(t,g),e(g)},u.onerror=()=>{i("Error converting XHR response to base64")},u.readAsDataURL(c.response)}else i(`error downloading ${t}: ${c.statusText}`)}catch(o){let c=`Error downloading resource ${t}: ${o.message}`;i(c)}}this.Xd=!1}YP(t,e,i){return new Promise(function(n,o){let c=new XMLHttpRequest;c.open(t,e),c.responseType=i,c.onload=n,c.onerror=o,c.send()})}}return s})(),Jt=(()=>{let s;return function(r){r[r.PAGE_VIEW=4]="PAGE_VIEW",r[r.TAP=6]="TAP",r[r.LONG_PRESS=8]="LONG_PRESS",r[r.DRAG=9]="DRAG",r[r.FLICK=10]="FLICK",r[r.DETAILED_API_ERROR=13]="DETAILED_API_ERROR",r[r.JAVASCRIPT_ERROR_SR=19]="JAVASCRIPT_ERROR_SR",r[r.CUSTOM_ERROR_SR=20]="CUSTOM_ERROR_SR",r[r.API_ERROR=21]="API_ERROR",r[r.CUSTOM_ERROR_AN=25]="CUSTOM_ERROR_AN",r[r.JAVASCRIPT_ERROR_AN=26]="JAVASCRIPT_ERROR_AN",r[r.CHANGE=100]="CHANGE",r[r.SUBMIT=101]="SUBMIT",r[r.CUSTOM_EVENT=102]="CUSTOM_EVENT"}(s||(s={})),s})(),F_=(()=>{class s{constructor(){this.As=1}transformEvent(t){switch(t.type){case W.CUSTOM_EVENT:{let e={version:this.As,type:Jt.CUSTOM_EVENT,data:{customEventName:t.customEventName,sourceLibrary:t.sourceLibrary}};return ur(t)&&(e.data.properties=t.properties),e}case W.CHANGE:{let e={version:this.As,type:Jt.CHANGE,data:{path:t.tgt}};return ur(t)&&(e.data.properties=t.properties),vn(t)&&(e.data.hrchy=t.hrchy),e}case W.SUBMIT:{let e={version:this.As,type:Jt.SUBMIT,data:{path:t.tgt}};return ur(t)&&(e.data.properties=t.properties),vn(t)&&(e.data.hrchy=t.hrchy),rc(t)&&(e.data.text=t.text),e}case W.TAP:{let e={version:this.As,type:Jt.TAP,data:{path:t.tgt}};return ur(t)&&(e.data.properties=t.properties),vn(t)&&(e.data.hrchy=t.hrchy),rc(t)&&(e.data.text=t.text),e}case W.DRAG:{let e=t;return{version:this.As,type:Jt.DRAG,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}case W.FLICK:{let e=t;return{version:this.As,type:Jt.FLICK,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}default:return null}}}return s})();var $_="REMOTE_ASSET",el="LOCAL_ASSET",z_="UNKNOWN_ASSET_TYPE",Oo="NONE",Zu="ONLY_LOCAL_ASSETS",No="ALL",G_=(()=>{class s{constructor(t){var e,i;this.XP=t,this.Jd=new Set,this.Yc=Oo;try{let n=(i=(e=window.CSJavascriptBridge)===null||e===void 0?void 0:e.getAssetTransformerMode)===null||i===void 0?void 0:i.call(e);(n===Zu||n===No)&&(this.Yc=n)}catch{}}setAssetProcessingMode(t){this.Yc=t}async getTransformedAssets(t,e){if(this.Yc===Oo)return t;let i=[];for(let n of t){let o=n.assetId,c=this.JP(o);if(this.Yc===No||c===el){let l=o;if(this.KP(o,e)&&(l=this.QP(o,e)),this.Jd.has(l)){csArray.prototype.push.call(i,n);continue}try{let h=await this.XP.getAssetContent(o);if(this.Jd.has(l)){csArray.prototype.push.call(i,n);continue}csArray.prototype.push.call(i,{...n,retrievedAssetContent:h}),this.Jd.add(n.assetId)}catch(h){L.error(`an error occurred while getting data for asset: ${l}: ${h}`),csArray.prototype.push.call(i,n)}}else csArray.prototype.push.call(i,n)}return i}JP(t){let e=window.WEBVIEW_SERVER_URL||null;try{let{protocol:i}=new csURL(t);return i==="file:"||e&&csString.prototype.startsWith.call(t,e)?el:$_}catch(i){L.error(`Error constructing URL (${t}"): ${i.message}`)}return z_}KP(t,e){return e&&Pr(t)||!1}QP(t,e){return`${t}#${e}`}}return s})(),q_=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.VE=t,this.Fe=e,this.ZP=i,this.Xc=n,this.dn=o,this.w=c,this.A=l,this.Rt=h,this.Kd=!1}async emitWebviewEventToBridge(t,e){switch(t){case O.AnalysisEvent:{let i=this.ZP.transformEvent(e.event);i&&rt.sendAnalysisEvent(i);break}case O.RecordingEvent:rt.sendSREvent(e);break;case O.ChildLogMessage:rt.sendLog(e);break;case O.Commands:L.tryToExecute(`SDKMessageUtils.sendMessage.sendCommandMessage: ${e}`,()=>{this.tO(e)})();break;case O.Assets:{let{assets:i,serializationId:n}=e,o=await this.dn.getTransformedAssets(i,n);rt.sendAssets(o,n);break}case O.JavascriptError:{let i=this.Xc.transformEvent(O.JavascriptError,e);i&&(this.Kd&&rt.sendNativeSREvent({...i,type:Jt.JAVASCRIPT_ERROR_SR}),rt.sendAnalysisEvent({...i,type:Jt.JAVASCRIPT_ERROR_AN}));break}case O.ApiError:{let i=this.Xc.transformEvent(O.ApiError,e);i&&(rt.sendAnalysisEvent({...i,type:Jt.API_ERROR}),H.counters.networkRequests.count("collected"));break}case O.DetailedApiError:{let i=this.Xc.transformEvent(O.DetailedApiError,e);i&&(rt.sendNativeSREvent({...i,type:Jt.DETAILED_API_ERROR}),H.counters.networkRequests.count("collected"));break}default:break}}setSessionReplayStatus(t){this.Kd=t}tO(t){let e=t.commands;for(let i of e)switch(!0){case csArray.prototype.indexOf.call(uu,i.name)>=0:rt.sendOptIn();break;case csArray.prototype.indexOf.call(ha,i.name)>=0:this.w.emitOptout(),rt.sendOptOut();break;case csArray.prototype.indexOf.call(Xr,i.name)>=0:this.eO(i);break;case csArray.prototype.indexOf.call(Xo,i.name)>=0:this.sO(i);break;case csArray.prototype.indexOf.call(Qo,i.name)>=0:this.UE(i);break;case csArray.prototype.indexOf.call(Jr,i.name)>=0:break;case csArray.prototype.indexOf.call(Zo,i.name)>=0:this.wa();break;case csArray.prototype.indexOf.call(Ju,i.name)>=0:this.UE(i),this.wa();break;case csArray.prototype.indexOf.call(vm,i.name)>=0:this.Rt.addUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(mh,i.name)>=0:this.Rt.addPartialUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(yh,i.name)>=0:this.Rt.resetPartialUrlMaskingPatterns();break;case csArray.prototype.indexOf.call(Nm,i.name)>=0:this.iO(i);break;case csArray.prototype.indexOf.call(So,i.name)>=0:this.rO(i);break;case csArray.prototype.indexOf.call(Pu,i.name)>=0:this.nO();break;case csArray.prototype.indexOf.call(_o,i.name)>=0:this.oO(i);break;case csArray.prototype.indexOf.call(Lr,i.name)>=0:this.aO(i);break;case csArray.prototype.indexOf.call(Vr,i.name)>=0:this.cO(i);break;case csArray.prototype.indexOf.call(Io,i.name)>=0:this.lO();break;case csArray.prototype.indexOf.call(kr,i.name)>=0:this.hO(i);break;case csArray.prototype.indexOf.call(xr,i.name)>=0:this.uO(i);break;case csArray.prototype.indexOf.call(Co,i.name)>=0:this.dO();break;default:L.warn(`WebviewBridgeEventEmitter received an unknown command: ${csJSON.stringify(i)}`);break}}rO(t){if(t.params.length<1||t.params.length>2)return;let e=t.params[0],i=t.params[1];if(!Hc.isValidIdentity(e))throw new pt(So[0]);let n=Hc.parseIdentityOptionsHash(i);rt.identify(e.toString(),{hash:n})}nO(){rt.resetIdentity()}oO(t){if(t.params.length!==1)return;let e=t.params[0];if(!Bc.isValidProperties(e))throw new pt(_o[0]);let i=Bc.sanitizeProperties(e);rt.addUserProperties(i)}aO(t){if(t.params.length!==1)return;let e=t.params[0];if(!Ps(e))throw new pt(Lr[0]);let i=Mi.sanitizeCustomEventProperties(e);i&&rt.addEventProperties(i)}cO(t){if(t.params.length!==1)return;let e=t.params[0];if(!e||!q(e))throw new pt(Vr[0]);rt.removeEventProperty(e)}lO(){rt.clearEventProperties()}hO(t){if(t.params.length!==1)return;let e=t.params[0];if(!Ps(e))throw new pt(kr[0]);let i=Mi.sanitizeCustomEventProperties(e);i&&rt.addPageviewProperties(i)}uO(t){if(t.params.length!==1)return;let e=t.params[0];if(!e||!q(e))throw new pt(xr[0]);rt.removePageviewProperty(e)}dO(){rt.clearPageviewProperties()}eO(t){if(t.params.length!==1)return;let e=t.params[0];if(!(!ne(e)||!("key"in e)||!("value"in e))&&_i.isKeyValid(e.key)&&_i.isValueValid(e.value)){let i=this.VE.anonymizePII(e.key),n=Se(e.value)?e.value:this.VE.anonymizePII(e.value);rt.sendDynamicVariable(i,n)}}sO(t){if(t.params.length!==1)return;let e=t.params[0];if(q(e)){let i={type:Jt.PAGE_VIEW,version:1,data:{url:e}};this.A.overridePath(e),this.w.emitArtificialPageViewEnd(),rt.sendAnalysisEvent(i),this.w.emitAfterArtificialPageView()}}UE(t){if(t.params.length!==1)return;let[e]=t.params;e.value&&(e.revenue=e.value),this.Fe.addTransaction(e)}wa(){let t=this.Fe.getTransaction();lo.isValid(t)&&(rt.sendTransaction(t.id?t.id:null,t.revenue,t.currency?t.currency:""),this.Fe.clear())}iO(t){if(t.params.length<1)return;let e=t.params[0],i=t.params[1]||{};if(!(q(e)&&ne(i)))return;let n=MS.buildCustomErrorEvent(e,i),o=this.Xc.transformEvent(O.CustomError,n);o&&(this.Kd&&rt.sendNativeSREvent({...o,type:Jt.CUSTOM_ERROR_SR}),rt.sendAnalysisEvent({...o,type:Jt.CUSTOM_ERROR_AN}))}}return s})(),W_=(()=>{class s{constructor(t,e,i,n){this.A=t,this.Ze=e,this.He=i,this.Zr=n,this.As=1}transformEvent(t,e){switch(t){case O.ApiError:case O.DetailedApiError:{let i=this.He.anonymize(e);return{version:this.As,data:i}}case O.JavascriptError:{let i={...e,pageUrl:this.A.getAnonymizedUrl()},n=this.Ze.anonymize(i);return{version:this.As,data:{...n,date:k.now()}}}case O.CustomError:{let i=e;return i.message=this.Zr.anonymize(i.message),{version:this.As,data:{...i,date:k.now()}}}default:return null}}}return s})(),Y_=(()=>{class s{constructor(t,e){this.Ii=t,this.jE=e}init(){this.Ii.onWebViewEvent((t,e)=>{this.jE.emitWebviewEventToBridge(t,e)})}onStartTracking(){this.Ii.start()}onOptout(){this.Ii.stop()}onStartAnalytics(){this.Ii.setAnalyticsStatus(!0)}onStopAnalytics(){this.Ii.setAnalyticsStatus(!1)}onParentRecordingContextChange(t){this.jE.setSessionReplayStatus(t.isRecording)}}return s})(),X_=(()=>{class s extends _t{constructor(t,e,i,n,o,c,l,h){super(),this.Ti=t,this.zt=e,this.I=i,this.Fs=n,this.$s=o,this.er=c,this.ir=l,this.rr=h,this.nr=[]}init(){var t,e,i,n,o;this.Ti.onEvent(c=>this.Ut(c)),this.zt.onEvent(c=>this.Ut(c)),(t=this.Fs)===null||t===void 0||t.onEvent(c=>this.Ut(c)),(e=this.$s)===null||e===void 0||e.onEvent(c=>this.Ut(c)),(i=this.er)===null||i===void 0||i.onEvent(c=>this.Ut(c)),(n=this.ir)===null||n===void 0||n.onEvent(c=>this.Ae(c)),(o=this.rr)===null||o===void 0||o.onEvent(c=>this.Ae(c))}onStart(){var t,e,i,n,o;this.Ti.start(),this.zt.start(),(t=this.Fs)===null||t===void 0||t.start(),(e=this.$s)===null||e===void 0||e.start(),(i=this.er)===null||i===void 0||i.start(),(n=this.ir)===null||n===void 0||n.start(),(o=this.rr)===null||o===void 0||o.start(),csArray.prototype.forEach.call(this.nr,c=>{this.Ae(c)}),this.nr=[]}onStop(){var t,e,i,n,o;this.Ti.stop(),this.zt.stop(),(t=this.Fs)===null||t===void 0||t.stop(),(e=this.$s)===null||e===void 0||e.stop(),(i=this.er)===null||i===void 0||i.stop(),(n=this.ir)===null||n===void 0||n.stop(),(o=this.rr)===null||o===void 0||o.stop()}Ut(t){let e={isUserEvent:!0,event:t};this.Q(e)}Ae(t){let e={isUserEvent:!1,event:t};this.Q(e)}Q(t){!this.isStarted||t.event.type===W.RESIZE||this.I.sendToParent(O.AnalysisEvent,t)}pushCustomEvent(t,e,i){if(!(q(t)&&!jr(t))||i!==void 0&&!Ps(i))throw new pt(ni[0]);let n=Mi.buildCustomEvent(t,e,i);this.isStarted?this.Ae(n):csArray.prototype.push.call(this.nr,n)}}return s})(),J_=["webview:analytics:start"],K_=["webview:analytics:stop"],Q_=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d){this.E=t,this.et=e,this.qt=i,this.I=n,this.vt=o,this.gt=c,this.S=l,this.zt=h,this.$t=u,this.nt=d}init(){let t,e,i=Du(this.E,this.et,this.$t),n=[];this.E.collectSubmit||csArray.prototype.push.call(n,"submit");let o=new xu(i,this.et,this.qt,n),c=this.vt.isInWebViewContext()?{collectGestureVelocity:!0,collectGestureDistance:!0}:{collectGestureVelocity:!1,collectGestureDistance:!1},l=ku(this.E,this.et,this.$t),h=new Lu(l,this.zt,c),u,d,g;this.pr=new X_(o,h,this.I,t,e,d,g,u),this.pr.init(),this.vt.isInWebViewContext()&&this.fO(),this.S.register(ni,m=>{if(!Ps(m))throw new pt(ni[0]);this.pr.pushCustomEvent(m.name,m.source,m.properties)}),this.nt&&this.nt.register(RS,(m,v,b)=>{let C=Mi.handleCustomEventCommandMisuse(m,b);this.pr.pushCustomEvent(m,C,v)})}onStartTracking(){this.pr.start()}onOptout(){this.pr.stop()}onStartAnalytics(){this.pr.start()}onStopAnalytics(){this.pr.stop()}fO(){this.S.register(J_,()=>this.gt.emitStartAnalytics(),{disableApplyPending:!0}),this.S.register(K_,()=>{this.gt.emitStopRecording(),this.gt.emitStopAnalytics()},{disableApplyPending:!0})}}return s})();var td=(()=>{class s{constructor(t){this.commandsService=t,this.mo=new au}registerChildCommands(){this.commandsService.register(lu,t=>this.mo.handleCommand(t,this.En))}onParentRecordingContextChange(t){this.En={isRecording:t.isRecording,recordingStartTimestamp:t.recordingStartTimestamp||0,etrState:t.etrState||Kt.ETR_OFF},this.mo.executeCallbacks(this.En)}}return $([Hs({wait:0,mode:"trailing"})],s.prototype,"onParentRecordingContextChange",null),s})(),Z_=(()=>{class s{constructor(t){this.I=t,this.ue={}}handleCommand(t){oe(t)&&this.po(t)}executeRegisteredCallbacks(t){let e=t.trackingContext;if(e)if(t.callbackId){let i=this.ue[t.callbackId];i&&this.Ft(i,e)}else for(let i in this.ue)this.Ft(this.ue[i],e)}po(t){let e=_e.integer(),i={callbackId:e,initiator:si.AfterPageView};this.ue[e]=t,this.I.sendToParent(O.IntegrationCallback,i)}Ft(t,e){csSetTimeout(()=>{t(e)})}}return s})(),tw=(()=>{class s{constructor(t){this.I=t,this.Ki={}}handleCommand(t){ne(t)&&oe(t.callback)&&this.go(t.callback)}executePendingCallbacks(t){let{trackingContext:e,callbackId:i}=t;if(!i||!e)return;let n=this.Ki[i];n&&(delete this.Ki[i],this.Ft(n,e.sessionKey))}go(t){let e=_e.integer(),i={callbackId:e,initiator:si.GetSessionKey};this.Ki[e]=t,this.I.sendToParent(O.IntegrationCallback,i)}Ft(t,e){csSetTimeout(()=>{t(e)})}}return s})(),ew=(()=>{class s{constructor(t,e){this.I=t,this.Z=e,this.Kc={}}handleCommand(t,e){ne(t)&&oe(e)&&this.go(t,e)}executePendingCommand(t){let{trackingContext:e,callbackId:i}=t;if(!(!i||!e))if(this.Kc[i]){let[n,o]=this.Kc[i];n&&(delete this.Kc[i],this.Ft(e,n,o))}else this.Z.sendToChildren(O.TrackingContextResultMessage,t)}go(t,e){let i=_e.integer();this.Kc[i]=[t,e],this.I.sendToParent(O.TrackingContextRequestMessage,{callbackId:i})}Ft(t,e,i){csSetTimeout(()=>{let n=ou(t,e);i(n)})}}return s})(),sw=(()=>{class s extends td{constructor(t,e,i){super(t),this.commandsService=t,this.I=e,this.Z=i}init(){this.HE=new Z_(this.I),this.BE=new tw(this.I),this.FE=new ew(this.I,this.Z),this.ft()}onAfterPageViewCallback(t){this.HE.executeRegisteredCallbacks(t)}onIntegrationSessionKeyCallback(t){this.BE.executePendingCallbacks(t)}onTrackingContextResultCallback(t){this.FE.executePendingCommand(t)}ft(){super.registerChildCommands(),this.commandsService.register(la,t=>{this.HE.handleCommand(t)}),this.commandsService.register(cu,t=>this.BE.handleCommand(t)),this.commandsService.register(hu,(t,e)=>{this.FE.handleCommand(t,e)})}}return s})();function iw(s,r){let t=Th({...r,async:!1}),e;return t(s,i=>e=i),e}var Mo=(()=>{class s{static isWebViewLocalAssetsSupported(){return"URL"in window}}return s})(),rw=(()=>{class s{constructor(t,e){this.I=t,this.Qd=e,this.$E=new tu({maskingEnabled:!1})}yO(){let t=new Set;Zt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{t.has(i)||(this.$E.scanElement(i),t.add(i))})}handleCommand(t){let e=t&&t.withAssets,i=[],n=new Set,o=new Set,c=[];e&&Mo.isWebViewLocalAssetsSupported()?(this.$E.onScannedAsset(({type:u,asset:d})=>{u==="stylesheet"&&!o.has(d.assetId)&&(o.add(d.assetId),csArray.prototype.push.call(c,d)),n.has(d.assetId)||(n.add(d.assetId),csArray.prototype.push.call(i,d))}),this.yO()):Mo.isWebViewLocalAssetsSupported()||L.warn("Local asset is not supported on this browser");let l=nw(),h=csJSON.stringify(l);if(e){let u=Su.generate();return this.EO(i,c,u),csJSON.stringify({serializedDom:h,serializationId:u})}return h}EO(t,e,i){e.length===0?this.sa(t,i):this.vO(t,e,i,(n,o)=>this.sa(n,o))}vO(t,e,i,n){let o=0,c=0,l=new Set(csArray.prototype.map.call(t,m=>m.assetId)),h=m=>!l.has(m),u=m=>{l.has(m.assetId)||(l.add(m.assetId),csArray.prototype.push.call(e,m),csArray.prototype.push.call(t,m))},d=m=>{for(let v of m)l.has(v.assetId)||(l.add(v.assetId),csArray.prototype.push.call(t,v));o++,o+c===e.length&&n(t,i)},g=m=>{c++,L.error("An error occurred while fetching a styleSheet: "+m),o+c===e.length&&n(t,i)};csArray.prototype.forEach.call(e,m=>{this.Qd.getStyleSheetAssets(m.assetId,d,g,h,u)})}sa(t,e){this.I.sendToParent(O.Assets,{assets:t,serializationId:e})}}return s})();function nw(){return Hv(),Uv(iw(document))}function ow(s){var r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return s.replace(r,function(t,e,i,n){if(e==="\\")return t.slice(1);if(n)return n;var o=parseInt(i,16),c=55296<=o&&o<=57343;return c||o===0||o>1114111?"\uFFFD":String.fromCodePoint(o)})}var aw=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function cw(s,r){var t=s.replace(aw,function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e[3]||e[4],o=e[9]||e[10]||e[11],c=ow((n||o).trim()),l=n?"@import ":"",h=r(c)||c;return l+"url("+lw(h)+")"});return t}function lw(s){return s.indexOf('"')===-1?'"'+s+'"':s.indexOf("'")===-1?"'"+s+"'":s}function hw(s){var r=[];return cw(s,function(t){return r.push(t),t}),r}var ed=(()=>{class s{constructor(t){this.SO=t}getStyleSheetAssets(t,e,i,n,o){let c=[];if(!Pr(t)){i(`Not a recognized valid css file path ${t}`);return}let l=(h,u)=>{let d=this._O(h,u);csArray.prototype.forEach.call(d,g=>{csArray.prototype.push.call(c,g),Pr(g.assetId)&&n(g.assetId)&&(o==null||o(g),this.getStyleSheetAssets(g.assetId,e,i,n,o))}),e(c)};this.SO.getResourceContentText(t,l,i)}_O(t,e){return this.wO(t,hw(e))}wO(t,e){return csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(e,i=>!fe(i)),i=>!Pl(i)),i=>({assetId:wl(i,t),assetBasePath:t,assetRawPath:i}))}}return s})(),sd=(()=>{class s{getResourceContentText(t,e,i){let n=c=>{e(t,c.responseText)},o=this.AO(n,i);o.open("GET",t),o.send()}AO(t,e){let i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(i.status===200?t(i):e(i.statusText))},i}}return s})(),uw=(()=>{class s{constructor(t){this.E=t,this.Zd=null}isSdkTrackingContext(t){return Dt(t)&&ne(t)&&q(t.sessionKey)&&Se(t.pageNumber)&&q(t.pageViewType)&&bi(t.isRecording)}update(t){if(!this.isSdkTrackingContext(t)){L.warn(`webViewTrackingContext.service received wrong sdkTrackingContext, content:${csJSON.stringify(t)}`),this.Zd=null;return}this.Zd={...t,recordingConsentState:Ei.NOT_NEEDED,projectId:this.E.projectId,uxaDomain:this.E.uxaDomain,...this.E.smbConfig}}getTrackingContext(){return this.Zd}}return s})(),dw=(()=>{class s{constructor(t){this.Pi=t,this.ue=[]}handleCommand(t){if(!oe(t))return;this.po(t);let e=this.Pi.getTrackingContext();e!==null&&this.Ft(t,e)}executeRegisteredCallbacks(t){let e=t.trackingContext;e&&csArray.prototype.map.call(this.ue,i=>this.Ft(i,e))}po(t){csArray.prototype.push.call(this.ue,t)}Ft(t,e){csSetTimeout(()=>{t(e)})}}return s})(),fw=(()=>{class s{constructor(t,e){this.Z=t,this.Pi=e}onIframeIntegrationCallback(t){let e=this.Pi.getTrackingContext();e!==null&&(t.trackingContext=e,this.Z.sendToChildren(O.IntegrationCallback,t))}}return s})(),pw=["serializeWebView","webview:serializeWebView"],gw=["setAssetTransformerMode","webview:setAssetTransformerMode"],mw=["webview:onAfterScreenView"],yw=(()=>{class s extends td{constructor(t,e,i,n,o,c,l){super(t),this.commandsService=t,this.I=e,this.Z=i,this.dn=n,this.TO=o,this.mt=c,this.E=l}init(){this.Pi=new uw(this.E),this.bO=new fw(this.Z,this.Pi),this.mt.addListener(this.bO),this.zE=new dw(this.Pi);let t=new ed(new sd);this.RO=new rw(this.I,t),this.ft()}onAfterPageViewCallback(t){this.zE.executeRegisteredCallbacks(t)}ft(){super.registerChildCommands(),this.commandsService.register(la,t=>{this.zE.handleCommand(t)}),this.commandsService.register(mw,t=>{this.Pi.update(t);let e=this.Pi.getTrackingContext();e!==null&&this.TO.emitAfterPageViewCallback({initiator:si.AfterPageView,trackingContext:e})}),this.commandsService.register(pw,t=>this.RO.handleCommand(t)),this.commandsService.register(gw,t=>{(t===Oo||t===Zu||t===No)&&this.dn.setAssetProcessingMode(t)})}}return s})(),Ew=(()=>{class s extends _t{constructor(t,e,i,n,o=[],c){super(),this.E=t,this.ut=e,this.I=i,this.Ge=n,this.ze=o,this.ie=c,this.tf=!1,this.zi=!1,this.yi=new ca,this.z=[],this.Qc=!1,this.Vs=l=>this.Ae(l),this.io=l=>this.Ut(l)}init(){this.su()}su(){var t;this.Ge.onEvent(this.Vs,this.io),(t=this.ut)===null||t===void 0||t.onInputNodeToEncrypt(this.io)}setEnableOnlineAssets(t){this.tf=t!=null?t:!1}setOnlineAssetsEnabledOnNextStart(t){this.zi=t}getStaticResourceManagerStatus(){return this.ie?{supported:ii.isSupported(),onlineAssets:{activated:this.tf,enableOnNextStart:this.zi}}:null}Ae(t){this.CO(t),this.Zc()}Ut(t){this.GE(t),this.Zc()}GE(t){csArray.prototype.push.call(this.z,t),this.Qc=!0}CO(t){csArray.prototype.push.call(this.z,t)}Zc(){J(this.ze,e=>{var i;return(i=e.flushEvents)===null||i===void 0?void 0:i.call(e)});let t={containsUserEvent:this.Qc,events:this.z};this.I.sendToParent(O.RecordingEvent,t),this.z=[],this.Qc=!1}onStart(){this.ie&&this.tf&&this.ie.enableOnlineAssets(),this.Ge.start(),this.E.emitDebugEvents&&this.yi.emit("replayRecordingStarted"),J(this.ze,t=>{t.start&&t.start()})}onStop(){var t;this.Ge.stop(),(t=this.ie)===null||t===void 0||t.disableOnlineAssets(),J(this.ze,e=>{e.stop&&e.stop()})}addInitialDom(t){for(let e=0;e<this.z.length;e+=1)if(this.z[e].date>=t.date){csArray.prototype.splice.call(this.z,e,0,t),this.Qc=!0,this.Zc();return}this.GE(t),this.Zc()}}return s})(),vw=(()=>{class s extends _t{constructor(t,e){super(),this.ke=t,this.I=e}onStart(){}onStop(){}init(){this.ke.onSendStaticResource(t=>this.I.sendToParent(O.StaticResource,t))}}return s})(),Sw=["webview:replay:start"],_w=["webview:replay:stop"],ww=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.E=t,this.gt=e,this.qE=i,this.Ii=n,this.Qd=o,this.S=c,this.A=l,this.oe=h,this.ef=!1}init(){let t=new Qu(this.E),e=new ji;if(this.Xt=new ah(this.A),new oh(this.Xt,this.S).init(),this.it=new ua(this.E,this.A,e,t),this.it.init(),Mo.isWebViewLocalAssetsSupported()){let n=u=>{this.sa(u)},o=u=>L.error("An error occurred while fetching a styleSheet: "+u),c=new Set,l=u=>!c.has(u),h=u=>{c.add(u.assetId),this.sa([u])};this.qE.onAsset(u=>{this.IO(u)}),this.qE.onStyleSheetFound(u=>{this.Qd.getStyleSheetAssets(u.assetId,n,o,l,h)})}this.PO()}onStartRecording(){if(this.ef=!0,!this.Xt.isUrlExcludedForSessionReplay()){let t=this.oe.getSensitiveStatus();this.gt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}onStopRecording(){this.ef=!1,this.gt.emitParentRecordingContextChange({isRecording:!1})}onArtificialPageViewEnd(){this.gt.emitParentRecordingContextChange({isRecording:!1})}onAfterArtificialPageView(){if(this.B()&&!this.Xt.isUrlExcludedForSessionReplay()){let t=this.oe.getSensitiveStatus();this.gt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}B(){return this.ef}PO(){this.S.register(Sw,()=>{this.gt.emitStartAnalytics(),this.gt.emitStartRecording()},{disableApplyPending:!0}),this.S.register(_w,()=>this.gt.emitStopRecording(),{disableApplyPending:!0})}IO(t){this.Ii.sendToParent(O.Assets,{assets:[t]})}sa(t){t.length!==0&&this.Ii.sendToParent(O.Assets,{assets:t})}}return s})(),Aw=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d,g,m,v){this.E=t,this.D=e,this.Se=i,this.w=n,this.I=o,this.Ks=c,this.S=l,this.Ci=h,this.vt=u,this.A=d,this.oe=g,this.tt=m,this.ut=v}init(){var t;let e=[],i=this.Ks.getRecordingContext();this.ho=new Ih(!!i.useAnonymization,this.E.whitelistedAttributes,this.D,this.E.anonymizeDigits);let n=[];csArray.prototype.push.call(n,new Rh),csArray.prototype.push.call(n,new Mh);let o=new su;csArray.prototype.push.call(e,o),!this.vt.isInWebViewContext()&&this.E.useStaticResourceManager&&ii.isSupported()&&(this.ie=new ii,csArray.prototype.push.call(n,this.ie),this.ke=new Wh,this.sf=new vw(this.ke,this.I),this.sf.init()),csArray.prototype.push.call(n,this.ho),csArray.prototype.push.call(n,new Nh(this.tt)),this.Ji=new Zh,this.Ji.init(),csArray.prototype.push.call(e,this.Ji),csArray.prototype.push.call(e,new Qh(window.location,this.D));let c=!1,l=[this.Se,c?new Dh:new bh,new Xh(csArray.prototype.filter.call(e,d=>d)),...c?[]:[new jh,new Vh(this.ut,(t=this.E.experimental)===null||t===void 0?void 0:t.trackedCustomInputProperties)],new Hh,new Fh],h=new Gh(l,n),u=new Yh(h,this.w,this.ke);if(this.Oi=new Ew(this.E,this.ut,this.I,u,e,this.ie),this.S.register(iu,()=>this.Ks.getRecordingContext().isRecording),this.S.register(nu,()=>this.Oi.getStaticResourceManagerStatus()),this.Oi.init(),this.vt.isInWebViewContext()){let d=new ed(new sd);this.rf=new ww(this.E,this.Ci,o,this.I,d,this.S,this.A,this.oe),this.Ci.addListener(this.rf),this.w.addListener(this.rf),this.rf.init()}}onParentRecordingContextChange(t){var e,i;t.useAnonymization!==void 0&&this.Xi(t.useAnonymization),t.enableOnlineResourcesOnNextPageview!==void 0&&this.Oi.setOnlineAssetsEnabledOnNextStart(t.enableOnlineResourcesOnNextPageview),t.isRecording?(this.mu(),this.Oi.setEnableOnlineAssets(t.enableOnlineResources),this.Oi.start(),(e=this.sf)===null||e===void 0||e.start()):(this.Oi.stop(),(i=this.sf)===null||i===void 0||i.stop())}onInitialDomStart(){}onInitialDomDone(t){this.Ji.start(),this.Oi.addInitialDom(t)}Xi(t){var e;this.ho.setAnonymization(t),(e=this.BT)===null||e===void 0||e.setAnonymization(t)}onOptout(){this.Oi.stop()}mu(){var t,e,i,n,o,c;if(!((i=(e=(t=this.E.experimental)===null||t===void 0?void 0:t.sessionReplay)===null||e===void 0?void 0:e.shadowRoot)===null||i===void 0)&&i.filterByHostSelector){let l=(c=(o=(n=this.E.experimental)===null||n===void 0?void 0:n.sessionReplay)===null||o===void 0?void 0:o.shadowRoot)===null||c===void 0?void 0:c.filterByHostSelector;J(l,h=>{Qs(h)&&Be.setShadowRootFilter(u=>{try{return ae.call(u.host,h)}catch{return!1}})})}}}return s})(),Tw=(()=>{class s{constructor(t,e,i,n,o,c,l){this.S=t,this.ht=e,this.Se=i,this.Kt=n,this.ut=o,this.ia=c,this.cn=l}init(){var t,e;this.ia&&this.ut&&((t=this.ia)===null||t===void 0||t.addSelector((e=this.ut)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ft(),this.Jt=new ma(this.Se,this.ht,this.Kt,this.ia,this.cn)}jr(){this.Jt.start()}tu(){this.Jt.stop()}onParentSensitiveStatusChange(t){var e,i;t.maskedElementSettings&&this.ht.setMaskedElementSettingsFromParent(t.maskedElementSettings),t.capturedElementSelector&&this.Kt.setWhitelistedElementsSelector(t.capturedElementSelector,!1),t.encryptionSelectors&&((e=this.ia)===null||e===void 0||e.addSelector(t.encryptionSelectors),(i=this.ut)===null||i===void 0||i.setEncryptionSelectors(t.encryptionSelectors,!1)),t.started?this.jr():this.tu()}ft(){this.S.register(Ko,t=>{this.Kt.setWhitelistedElementsSelector(t)}),this.S.register(Yr,t=>{this.ht.setMaskedElementSettingsFromCommand(t)}),this.S.register(dh,t=>{var e,i;(e=this.ut)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.ia)===null||i===void 0||i.addSelector(t)})}}return s})(),bw=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.w=t,this.S=e,this.ht=i,this.Se=n,this.it=o,this.Kt=c,this.oe=l,this.cn=h,this.Jt=new ma(this.Se,this.ht,this.Kt,void 0,this.cn,this.it)}init(){this.it.init(),this.ft()}onStartAnalytics(){this.hn()}onAfterArtificialPageView(){this.WE(),this.hn()}onStopAnalytics(){this.WE()}hn(){this.Jt.start(),this.oe.setSensitiveStatus({started:!0,useAnonymization:this.it.shouldUseAnonymization()}),this.w.emitSensitiveStatusChange()}WE(){this.Jt.stop(),this.oe.setSensitiveStatus({started:!1,useAnonymization:this.it.shouldUseAnonymization()}),this.w.emitSensitiveStatusChange()}ft(){this.S.register(Ko,t=>{this.Kt.setWhitelistedElementsSelector(t),this.w.emitSensitiveStatusChange()}),this.S.register(Yr,t=>{this.ht.setMaskedElementSettingsFromCommand(t),this.w.emitSensitiveStatusChange()})}}return s})(),Rw=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,d){this.gt=t,this.w=e,this.E=i,this.I=n,this.Ks=o,this.S=c,this.vt=l,this.M=h,this.oe=u,this.nf=d,this.Yo=()=>{var g;this.S.start(),(g=this.nt)===null||g===void 0||g.start(),this.YE.start()}}start(){let t,e,i,n,o,c,l,h,u,d,g,m,v,b,C,A;this.M.schedule(()=>{if(this.nf&&this.gt.addListener(this.nf),o=new Tu(this.nf),c=new Eu(()=>{}),v=new vu,A=new bu,this.vt.isInIframeContext()){let S=new Tw(this.S,o,c,v,b,C,A);S.init(),this.gt.addListener(S)}if(i=new js,d=new Ml(i),g=new Au(window.location,d),this.vt.isInWebViewContext()){let S=new Qu(this.E),N=new ji,I=new ua(this.E,g,N,S),_=new bw(this.w,this.S,o,c,I,v,this.oe);_.init(),this.gt.addListener(_),this.w.addListener(_)}}),this.M.schedule(()=>{t=new ql(Ve,this.E),e=new Iu(t),n=new Q_(this.E,t,e,this.I,this.vt,this.gt,this.S,new Ru(L),this.oe,this.nt),this.gt.addListener(n)}),oi.isRecordingSupported()&&this.M.schedule(()=>{let S=new Aw(this.E,i,c,this.w,this.I,this.Ks,this.S,this.gt,this.vt,g,this.oe,d,b);this.w.addListener(S),this.gt.addListener(S),S.init()}),this.M.schedule(()=>{u=new Cu(this.E);let S=new Ll(t,this.E.isChild),N=new Vl(t),I=new Ul(t),_=new jl;h=new xl(S,N,I,_),l=new H_(u,h,this.I,this.Ks,this.oe)}),this.M.schedule(()=>{h.addListener(l),this.gt.addListener(l),this.w.addListener(l),this.w.addListener(n)}),this.M.schedule(()=>{let S;if(this.vt.isInWebViewContext()){let N=new B_;this.dn=new G_(N),S=new yw(this.S,this.I,u,this.dn,this.gt,h,this.E)}else S=new sw(this.S,this.I,u);this.gt.addListener(S),S.init()}),this.M.schedule(()=>{l.init(),n.init()}),this.M.schedule(()=>{var S,N,I,_;if(this.vt.isInWebViewContext()){let B=new F_,F=new jS(i,g),K=new $u,vt=new NS(K,d,!!(!((N=(S=this.E)===null||S===void 0?void 0:S.experimental)===null||N===void 0)&&N.anonymizeNameInUrls)),It=new VS(i,!((_=(I=this.E)===null||I===void 0?void 0:I.experimental)===null||_===void 0)&&_.anonymizeNameInUrls?d:void 0),Gt=new W_(g,F,vt,It),w=new q_(i,new ph(i,null,null),B,Gt,this.dn,this.w,g,K),V=new Y_(this.I,w);V.init(),this.w.addListener(V),this.gt.addListener(V)}else{let B=new j_(this.I);this.w.addListener(B)}}),this.YE=new Fv,this.M.schedule(()=>{this.YE.onLoad(()=>{this.w.emitStartTracking()}),this.Yo()})}}return s})();var Cw=(()=>{class s{constructor(){this.En=null}getRecordingContext(){return this.En===null?{isRecording:!1}:this.En}setRecordingContext(t){this.En=t}}return s})(),Iw=(()=>{class s{constructor(t){this.kn=t,this.Sn={started:!1,useAnonymization:!0},this.xn=$r(this.kn)}getSensitiveStatus(){return this.Sn}setSensitiveStatus(t){this.Sn=t}getElementSensitiveStatus(t){return this.Sn.started?M.isMaskedElement(t)||M.isMaskedElementChild(t)?ut.MASKED:Ch.shouldEncrypt(t)?ut.ENCRYPTED:ke.isEditableNode(t)?ut.ANONYMIZED:this.Sn.useAnonymization?se.isWhitelistedElement(t)?ut.CAPTURED:ut.ANONYMIZED:ut.CAPTURED:ut.ANONYMIZED}getAttributeSensitiveStatus(t,e){return this.Sn.started?M.isMaskedAttribute(t,e)?ut.MASKED:this.Sn.useAnonymization?Vs(t)||se.isWhitelistedElement(t)||this.xn.has(e)?ut.CAPTURED:ut.ANONYMIZED:ut.CAPTURED:ut.ANONYMIZED}}return s})(),Pw=2500,Ow=500,Nw=(()=>{class s extends Ku{constructor(t,e,i=Ow){super(Pw),this.gt=t,this.E=e,this.OO=i,this.gr=!1,this.il=void 0,this.cf=!0}onStart(){this.MO()}onStop(){this.buffer.reset(),this.lf&&window.csClearInterval(this.lf)}sendToParent(t,e){var i;if(this.DO()){(i=this.hf)===null||i===void 0||i.call(this,t,e);return}if(this.kO(t)){let n=this.buildChildBaseMessage(t,e);this.buffer.addMessage(n)}}DO(){return this.gr&&this.cf}kO(t){return!this.gr||t===O.Commands}onWebViewEvent(t){this.hf=t}setAnalyticsStatus(t){this.cf=t,this.cf&&this.xO()}sendAllMessagesFromBuffer(){var t;let e=this.buffer.getMessages();for(let i of e)(t=this.hf)===null||t===void 0||t.call(this,i.type,i.content);this.buffer.reset()}xO(){var t;if(!this.gr)return;let e=this.buffer.getMessages();for(let i of e)i.type===O.Commands&&((t=this.hf)===null||t===void 0||t.call(this,i.type,i.content));this.buffer.reset()}buildChildBaseMessage(t,e){return{type:t,content:e}}MO(){this.gr=rt.isCSJavascriptBridgeDefined(),this.gr?this.XE():this.lf=window.csSetInterval(()=>{this.gr=rt.isCSJavascriptBridgeDefined(),this.gr&&(this.XE(),window.csClearInterval(this.lf))},this.OO)}XE(){this.LO(),this.il=rt.getBridgeVersion(),this.il===null?this.sendAllMessagesFromBuffer():this.il>=ag?(this.VO(),rt.notifyIsReadyForTracking()):L.warn(`bridge version ${this.il} is not supported`)}LO(){let t={message:csJSON.stringify(this.E),errorCode:"TAG_CONFIGURATION",level:ct.critical};rt.sendLog(t)}VO(){this.gt.emitStopAnalytics()}}return s})(),Mw=(()=>{class s{constructor(t,e,i){this.E=t,this.vt=e,this.M=i}init(){this.E.isChild=!0,Cs.isSupported()&&Cs.setDigestSalt(this.E.projectId.toString());let t,e,i,n,o,c,l,h,u,d;this.M.schedule(()=>{var g;t=new Xu(this.M),e=new M_,i=new Cw,n=new Iw(this.E.whitelistedAttributes);let m=[so.UXA];this.vt.isInWebViewContext()?(window.cs_wvt=window.cs_wvt||[],csArray.prototype.push.call(m,so.WVT),o=new Nw(e,this.E)):(o=new U_(this.E,t,i,n,e),!((g=this.E.experimental)===null||g===void 0)&&g.checkPIIMigration&&(d=new zl)),c=new Gl(m,d)}),this.M.schedule(()=>{let g;l=new k_(c,o,g),h=new D_(l)}),this.M.schedule(()=>{h.init()}),this.M.schedule(()=>{}),this.M.schedule(()=>{}),this.M.schedule(()=>{t.addListener(h)}),this.M.schedule(()=>{t.emitInitTracking()}),this.M.schedule(()=>{new Rw(e,t,this.E,o,i,c,this.vt,this.M,n,d).start()})}}return s})();var Dw=(()=>{class s{constructor(t,e,i){this.E=t,this.vt=e,this.yr=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.E.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new Wv,l=new eu(!!(!((t=this.E.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.E.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.E.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new Cg(this.vt,this.E);h.init();let u=new Pg(this.E,h);if(this.vt.isTopWindowTracker()&&u.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&L.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){L.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}bg();let g=new Xu(l),m=new T_(this.E,h,this.yr,l,g,c);this.E.isQuotaEnabled()?m.initWithQuota():m.init()}else!this.vt.isTopWindowTracker()&&u.canTrackInChild()&&new Mw(this.E,this.vt,l).init();let d=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(g){return M.isMaskedElement(g)||M.isMaskedElementChild(g)},isAttributeSensitive(g,m){return M.isMaskedAttribute(g,m)},getSensitiveAttributes(g){return ll(g.attributes,m=>M.isMaskedAttribute(g,m.name))}},Console:{warn(g){d&&console.warn("cs.tracking.warning",g)},error(g){d&&console.error("cs.tracking.error",g)}},Version:Rl},window.CSFrameCommunication||(window.CSFrameCommunication=Er,Er.isActivable()&&Er.waitForConnection(),this.E.isCsCrosswritingHeap()&&Er.waitForHeapVisualLabeler(this.E.getHeapWebAppUri()))}}return $([Ht("main.start"),U("main.start")],s.prototype,"start",null),s})();function kw(){csSetTimeout(()=>{let s=0;typeof CompressionStream!="undefined"&&(s|=1),typeof TransformStream!="undefined"&&(s|=2),typeof performance!="undefined"&&typeof performance.now=="function"&&(s|=4),typeof Worker!="undefined"&&(s|=8),typeof scheduler!="undefined"&&(typeof scheduler.yield=="function"&&(s|=16),typeof scheduler.postTask=="function"&&(s|=32)),H.counters.availableFeatures.set(s)})}var xw=(()=>{class s{constructor(t,e,i){this.X=t,this.D=e,this.$O=i,this.wt=[],this.zO=qo().v,kw()}flush(){this.wt.length!==0&&(this.X.send({m:csArray.prototype.map.call(this.wt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.D.anonymizePII(window.location.pathname),pid:this.$O,v:this.zO}),this.wt=[])}push(t){csArray.prototype.push.call(this.wt,...t),this.flush()}}return s.THROTTLE_INTERVAL=5e3,$([Hs({wait:s.THROTTLE_INTERVAL,mode:"trailing"})],s.prototype,"flush",null),s})();function Lw(s,r){let t=s.validationRate/10,e=_e.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=du.create(r.isTopWindowTracker()),l=new fu(o).create(s.getMetricsUri(),void 0,void 0,!0),h=new js,u=new xw(l,h,s.projectId);H.setService(u)}catch(o){L.warn(`Error initializing metrics: ${o.message}`)}}function Vw(){var s;zf();let r=new wg(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Vp(window,r);t.init();let e=new Bp;if(If(L),xp(),L.computeIsActive(r.validationRate),t.isTopWindowTracker()){let n=new og(r,e);L.setStrategy(n)}else if(t.isInIframeContext()){let n=new Hp(r);L.setStrategy(n)}else if(t.isInWebViewContext()){let n=new cg;L.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=xs(window,"MutationObserver")),Np(),Lw(r,t),new Dw(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{Lp(Vw)}catch{}});})();

// signature-bc6e460e484d63d8d6ba1a8da913d9a21c677ec9f5c8b9d81cd1aea5c8cf3305